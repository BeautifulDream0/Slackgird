{"version":3,"sources":["ng://angular-slickgrid/app/modules/angular-slickgrid/models/caseType.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/delimiterType.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/extensionName.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/fieldType.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/fileType.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/filterMultiplePassType.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/gridStateType.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/keyCode.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/operatorType.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/sortDirection.enum.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/models/sortDirectionNumber.enum.ts","node_modules/tslib/tslib.es6.js","ng://angular-slickgrid/app/modules/angular-slickgrid/services/utilities.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/compareDateUtility.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/dateUsShortSorter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/dateSorter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/dateIsoSorter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/dateUsSorter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/numericSorter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/stringSorter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/sorters/sorterUtilities.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/collection.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/export.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/constants.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/shared.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/extensionUtility.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/autoTooltipExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/cellExternalCopyManagerExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/checkboxSelectorExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/columnPickerExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/draggableGroupingExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/booleanFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/filterUtilities.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/dateFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/dateIsoFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/dateUsFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/dateUsShortFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/dateUtcFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/collectionSearchFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/numberFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/stringFilterCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/executeMappedCondition.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filter-conditions/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/compoundDateFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/graphql.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/compoundInputFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/compoundInputNumberFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/compoundInputPasswordFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/compoundSliderFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/inputFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/inputNumberFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/inputPasswordFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/selectFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/multipleSelectFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/nativeSelectFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/singleSelectFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/sliderFilter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/global-grid-options.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/slickgrid-config.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/filters/filterFactory.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/filter.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/sort.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/gridMenuExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/groupItemMetaProviderExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/headerButtonExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/headerMenuExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/rowMoveManagerExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/extensions/rowSelectionExtension.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/extension.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/graphqlQueryBuilder.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/global-utilities.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/grid-odata.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/odata.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/gridEvent.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/gridState.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/grid.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/groupingAndColspan.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/services/resizer.service.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/aggregators/avgAggregator.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/aggregators/minAggregator.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/aggregators/maxAggregator.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/aggregators/sumAggregator.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/aggregators/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/checkboxEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/dateEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/floatEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/integerEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/longTextEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/selectEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/multipleSelectEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/singleSelectEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/sliderEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/textEditor.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/editors/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/arrayObjectToCsvFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/arrayToCsvFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/boldFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/checkboxFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/checkmarkFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/collectionFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/collectionEditorFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/complexObjectFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateIsoFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateTimeIsoFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateTimeIsoAmPmFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateTimeUsAmPmFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateTimeUsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateTimeShortIsoFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateTimeShortUsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dateUsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/decimalFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/deleteIconFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dollarColoredBoldFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dollarColoredFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/dollarFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/editIconFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/hyperlinkFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/hyperlinkUriPrefixFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/infoIconFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/lowercaseFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/maskFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/multipleFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/percentFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/percentCompleteBarFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/percentCompleteFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/percentSymbolFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/progressBarFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/translateFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/translateBooleanFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/uppercaseFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/yesNoFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/formatters/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/avgTotalsPercentageFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/avgTotalsDollarFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/avgTotalsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/minTotalsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/maxTotalsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsColoredFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsDollarColoredBoldFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsDollarColoredFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsDollarBoldFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsDollarFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/sumTotalsBoldFormatter.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/grouping-formatters/index.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/components/slick-pagination.component.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/components/angular-slickgrid.component.ts","ng://angular-slickgrid/app/modules/angular-slickgrid/modules/angular-slickgrid.module.ts"],"names":["camelCase","pascalCase","snakeCase","colon","comma","equalSign","pipe","semicolon","space","tab","doubleColon","doublePipe","doubleSemicolon","autoTooltip","cellExternalCopyManager","checkboxSelector","columnPicker","draggableGrouping","groupItemMetaProvider","gridMenu","headerButton","headerMenu","noname","rowMoveManager","rowSelection","unknown","string","boolean","integer","float","number","date","dateIso","dateUtc","dateTime","dateTimeIso","dateTimeIsoAmPm","dateTimeIsoAM_PM","dateTimeShortIso","dateUs","dateUsShort","dateTimeShortUs","dateTimeUs","dateTimeUsAmPm","dateTimeUsAM_PM","dateTimeUsShort","dateTimeUsShortAmPm","dateTimeUsShortAM_PM","csv","doc","docx","pdf","txt","xls","xlsx","merge","chain","columns","filter","pagination","sorter","BACKSPACE","DELETE","DOWN","END","ENTER","ESCAPE","HOME","INSERT","LEFT","PAGE_DOWN","PAGE_UP","RIGHT","TAB","UP","empty","contains","notContains","lessThan","lessThanOrEqual","greaterThan","greaterThanOrEqual","notEqual","equal","endsWith","startsWith","in","notIn","inContains","notInContains","asc","ASC","desc","DESC","neutral","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","__values","o","m","__read","r","ar","error","__spread","concat","moment","moment_","addWhiteSpaces","nbSpaces","htmlEncode","$","text","html","htmlEntityDecode","input","replace","match","dec","String","fromCharCode","arraysEqual","a","orderMatters","sort","castToPromise","fromServiceName","promise","Observable","first","toPromise","take","Error","findOrDefault","array","logic","defaultVal","find","decimalFormatted","minDecimal","maxDecimal","isNaN","minDec","undefined","maxDec","amount","Math","round","pow","indexOf","getDescendantProperty","obj","path","split","reduce","acc","part","getScrollBarWidth","$outer","css","visibility","width","overflow","appendTo","widthWithScroll","outerWidth","remove","ceil","mapMomentDateFormatWithFieldType","fieldType","map","FieldType","mapFlatpickrDateFormatWithFieldType","mapOperatorType","operator","OperatorType","mapOperatorByFieldType","parseUtcDate","inputDateString","useUtc","test","dateString","decodeURIComponent","dateMoment","Date","isValid","year","toString","utc","format","sanitizeHtmlToText","htmlString","temp","document","createElement","innerHTML","textContent","innerText","titleCase","charAt","toUpperCase","slice","toCamelCase","str","offset","toLowerCase","uniqueArray","arr","item","index","unsubscribeAllObservables","subscriptions","isArray","forEach","subscription","unsubscribe","compareDates","value1","value2","sortDirection","strict","diff","date1","date2","parseInt","FORMAT","dateUsShortSorter","dateSorter","ISO_8601","dateIsoSorter","dateUsSorter","numericSorter","x","parseFloat","stringSorter","position","Sorters","numeric","sortByFieldType","sortResult","CollectionService","translate","filterCollection","collection","filterByOptions","filterResultBy","FilterMultiplePassType","filteredCollection","filterByOptions_1","tslib_1.__values","filterByOptions_1_1","singleFilterCollection","filterBy","property_1","property","value_1","sortCollection","sortByOptions","enableTranslateLabel","_this","sortedCollection","dataRow1","dataRow2","l","sortBy","sortDesc","SortDirectionNumber","propertyName","instant","propertyName_1","sortDirection_1","fieldType_1","Injectable","TranslateService","ExportService","_lineCarriageReturn","_hasGroupedItems","onGridBeforeExportToFile","Subject","onGridAfterExportToFile","defineProperty","_gridOptions","datasetIdPropertyName","_grid","getOptions","init","grid","dataView","_dataView","exportToFile","options","_exportOptions","extend","exportOptions","dataOutput","getDataOutput","setTimeout","downloadOptions","filename","csvContent","useUtf8WithBom","startDownloadFile","getColumns","delimiter","groupByColumnHeader","groupingColumnHeaderTitle","_exportQuoteWrapper","FileType","outputDataString","grouping","getGrouping","_columnHeaders","getColumnHeaders","header","title","join","getAllGridRowData","lineCarriageReturn","outputDataStrings","lineCount","getLength","rowNumber","itemObj","getItem","datasetIdName","readRegularRowData","__groupTotals","readGroupedTitleRow","readGroupedTotalRow","columnHeaders","columnDef","fieldName","headerKey","name","skippedField","excludeFromExport","key","field","id","row","idx","rowOutputStrings","exportQuoteWrapper","col","ln","fieldId","isEvaluatingFormatter","exportWithFormatter","exportCustomFormatter","itemData","formatter","sanitizeDataExport","keepAsStringWrapper","exportCsvForceToKeepAsString","groupName","level","groupingAggregatorRowText","outputStrings","groupTotalsFormatter","navigator","appName","outputData","mimeType","TextEncoder","encode","blob","Blob","type","msSaveOrOpenBlob","link","csvUrl","URL","createObjectURL","href","setAttribute","style","appendChild","click","removeChild","Constants","TEXT_CANCEL","TEXT_CLEAR_ALL_FILTERS","TEXT_CLEAR_ALL_SORTING","TEXT_COLUMNS","TEXT_COMMANDS","TEXT_EXPORT_IN_CSV_FORMAT","TEXT_EXPORT_IN_TEXT_FORMAT","TEXT_FORCE_FIT_COLUMNS","TEXT_HIDE_COLUMN","TEXT_REFRESH_DATASET","TEXT_SAVE","TEXT_SYNCHRONOUS_RESIZE","TEXT_SORT_ASCENDING","TEXT_SORT_DESCENDING","TEXT_TOGGLE_FILTER_ROW","TEXT_TOGGLE_PRE_HEADER_ROW","VALIDATION_EDITOR_VALID_NUMBER","VALIDATION_EDITOR_VALID_INTEGER","VALIDATION_EDITOR_NUMBER_BETWEEN","VALIDATION_EDITOR_NUMBER_MAX","VALIDATION_EDITOR_NUMBER_MIN","VALIDATION_EDITOR_DECIMAL_BETWEEN","SharedService","_allColumns","allColumns","gridOptions","_groupItemMetadataProvider","groupItemMetadataProvider","_visibleColumns","visibleColumns","ExtensionUtility","sharedService","arrayRemoveItemByIndex","el","loadExtensionDynamically","extensionName","ExtensionName","require","getPickerTitleOutputString","propName","pickerName","output","picker","enableTranslate","titleKey","sortItems","items","itemA","itemB","translateItems","inputKey","outputKey","items_1","items_1_1","AutoTooltipExtension","extensionUtility","dispose","_extension","destroy","register","Slick","AutoTooltips","autoTooltipOptions","registerPlugin","CellExternalCopyManagerExtension","createUndoRedoBuffer","hookUndoShortcutKey","newRowIds_1","pluginOptions","clipboardCommandHandler","editCommand","_undoRedoBuffer","queueAndExecuteCommand","dataItemColumnValueExtractor","editable","editor","formattedOutput","readOnlyMode","includeHeaderWhenCopying","newRowCreator","count","getData","addItem","setSelectionModel","CellSelectionModel","CellExternalCopyManager","commandQueue","commandCtr","execute","undo","command","GlobalEditorLock","cancelCurrentEdit","redo","keydown","which","ctrlKey","metaKey","shiftKey","CheckboxSelectorExtension","columnDefinitions","CheckboxSelectColumn","selectionColumn","getColumnDefinition","excludeFromQuery","excludeFromHeaderMenu","unshift","rowSelectionPlugin","getSelectionModel","RowSelectionModel","rowSelectionOptions","preselectedRows","selectRows","ColumnPickerExtension","_eventHandler","EventHandler","unsubscribeAll","columnTitle","forceFitTitle","syncResizeTitle","Controls","ColumnPicker","enableColumnPicker","subscribe","onColumnsChanged","args","translateColumnPicker","emptyColumnPickerTitles","DraggableGroupingExtension","DraggableGrouping","onExtensionRegistered","onGroupChanged","parseBoolean","booleanFilterCondition","searchTerm","searchTerms","cellValue","testFilterCondition","includes","findIndex","val","dateFilterCondition","searchDateFormat","filterSearchType","dateCell","dateSearch","dateIsoFilterCondition","dateUsFilterCondition","dateUsShortFilterCondition","dateUtcFilterCondition","collectionSearchFilterCondition","numberFilterCondition","stringFilterCondition","cellValueLastChar","executeMappedCondition","FilterConditions","booleanFilter","collectionSearchFilter","dateFilter","dateIsoFilter","dateUtcFilter","dateUsFilter","dateUsShortFilter","numberFilter","stringFilter","testFilter","timer","CompoundDateFilter","_clearFilterTriggered","_operator","callback","$filterElm","createDomElement","$filterInputElm","keyup","onTriggerEvent","$selectOperatorElm","change","clear","flatInstance","off","setValues","values","setDate","buildDatePickerInput","inputFormat","outputFormat","outputType","currentLocale","currentLang","substring","pickerOptions","defaultDate","altInput","altFormat","dateFormat","wrap","closeOnSelect","locale","loadFlatpickrLocale","onChange","selectedDates","dateStr","instance","_currentValue","enableTime","CustomEvent","placeholder","defaultFilterPlaceholder","flatpickr","buildSelectOperatorHtmlString","optionValues","getOptionValues","optionValueString","option","description","$headerElm","getHeaderRowColumn","$filterContainerElm","$containerInputGroup","$operatorInputGroupAddon","append","attr","data","addClass","params","flapickrLocale","localeDefault","default","clearFilterTriggered","selectedOperator","removeClass","hide","close","show","open","CompoundInputFilter","_inputType","on","buildInputHtmlString","CompoundInputNumberFilter","_super","inputType","tslib_1.__extends","CompoundInputPasswordFilter","CompoundSliderFilter","_elementRangeInputId","_elementRangeOutputId","filterParams","hideSliderNumber","target","getElementById","clearedValue","sliderStartValue","$containerInputGroupElm","children","last","buildTemplateHtmlString","minValue","filterProperties","maxValue","defaultValue","valueStep","buildTemplateSliderTextHtmlString","searchTermInput","$sliderTextInputAppendAddon","InputFilter","filterTemplate","trigger","InputNumberFilter","InputPasswordFilter","DOMPurify","DOMPurify_","SelectFilter","collectionService","isMultipleSelect","isFilled","autoAdjustDropHeight","autoAdjustDropPosition","autoAdjustDropWidthByTextSize","container","maxHeight","single","textTemplate","$elm","enableRenderHtml","onClose","selectedItems","multipleSelect","siblings","okButton","addTitle","countSelected","allSelected","selectAllText","selectAllDelimiter","defaultOptions","collectionOptions","customStructure","columnFilter","collectionAsync","labelName","labelPrefixName","labelPrefix","labelSuffixName","labelSuffix","optionLabel","valueName","newCollection","renderDomElement","renderOptionsAsync","inputCollection","outputCollection","collectionFilterBy","filterCollectionBy","filterResultAfterEachPass","collectionSortBy","awaitedCollection","_a","renderDomElementFromCollectionAsync","createCollectionAsyncSubject","newCollectionAsync","collectionInObjectProperty","addBlankEntry","createBlankEntry","optionCollection","separatorBetweenLabels","separatorBetweenTextLabels","isRenderHtmlEnabled","sanitizedOptions","sanitizeHtmlOptions","every","selected","term","labelKey","labelText","prefixText","suffixText","optionText","sanitize","blankEntry","elementName","elementOptions","filterOptions","filterElmOptions","MultipleSelectFilter","NativeSelectFilter","textLabel","SingleSelectFilter","SliderFilter","Filters","compoundDate","compoundInput","compoundInputNumber","compoundInputPassword","compoundInputText","compoundSlider","inputNumber","inputPassword","inputText","select","singleSelect","slider","GlobalGridOptions","alwaysShowVerticalScroll","autoEdit","asyncEditorLoading","autoFitColumnsOnFirstLoad","autoResize","bottomPadding","minHeight","minWidth","sidePadding","cellHighlightCssClass","cssClass","hideForceFitButton","hideSyncResizeButton","defaultFilter","enableAutoResize","enableAutoSizeColumns","enableCellNavigation","enableColumnReorder","enableExport","enableGridMenu","enableHeaderMenu","enableMouseHoverHighlightRow","enableSorting","enableTextSelectionOnCells","explicitInitialization","DelimiterType","forceFitColumns","hideClearAllFiltersCommand","hideClearAllSortingCommand","hideExportCsvCommand","hideExportTextDelimitedCommand","hideRefreshDatasetCommand","hideToggleFilterCommand","hideTogglePreHeaderCommand","iconCssClass","iconClearAllFiltersCommand","iconClearAllSortingCommand","iconExportCsvCommand","iconExportTextDelimitedCommand","iconRefreshDatasetCommand","iconToggleFilterCommand","iconTogglePreHeaderCommand","menuWidth","resizeOnShowHeaderRow","autoAlign","autoAlignOffset","iconSortAscCommand","iconSortDescCommand","iconColumnHideCommand","hideColumnHideCommand","hideSortCommands","headerRowHeight","multiColumnSort","numberedMultiColumnSort","tristateMultiColumnSort","sortColNumberInSeparateSpan","suppressActiveCellChangeOnEdit","pageSizes","pageSize","totalItems","rowHeight","topPanelHeight","SlickgridConfig","FilterFactory","config","_options","createFilter","model","isequal","isequal_","FilterService","filterFactory","_filters","_columnFilters","onFilterChanged","onFilterCleared","attachBackendOnFilter","_slickSubscriber","Event","attachBackendOnFilterSubscribe","bind","onHeaderRowCellRendered","addFilterTemplateToHeaderRow","event","backendApi","backendServiceApi","process","service","startTime","preProcess","processOnFilterChanged","query","emitFilterChanged","processResult","endTime","internalPostProcess","postProcess","statistics","executionTime","valueOf","totalItemCount","onError","e_1","attachLocalOnFilter","setFilterArgs","columnFilters","setFilter","customLocalFilter","columnId","refresh","clearFilters","invalidate","render","_b","keys","_c","columnIndex","getColumnIndex","queryField","queryFieldFilter","searchValues","fieldSearchValue","matches","lastValueChar","k","useFormatterOuputToFilter","rowIndex","getIdxById","disposeColumnFilters","getColumnFilters","getCurrentLocalFilters","currentFilters","colId","callbackSearchEvent","hasSearchTerms","termsCount","oldColumnFilters","colFilter","triggerEvent","serviceOptions","_onFilterChangedOptions","column","filterable","filter_1","updateColumnFilters","filterArguments","filterExistIndex","filt","sender","backendService","getCurrentFilters","populateColumnFilterSearchTerms","presets","filters","filters_1","_columnDefinitions","columnPreset","presetFilter","slickEvent","isPropagationStopped","EventData","notify","SortService","_currentLocalSorters","_isBackendGrid","onSortChanged","onSortCleared","attachBackendOnSort","onSort","onBackendSortChanged","processOnSortChanged","emitSortChanged","attachLocalOnSort","sortColumns","sortCols","sortAsc","sortCol","sortColumn","direction","SortDirection","onLocalSortChanged","clearSorting","setSortColumns","getCurrentLocalSorters","getPreviousColumnSorts","oldSortColumns","getSortColumns","cols","loadLocalPresets","sorters","presetSorting","gridColumn","columnSortObj","sortField","currentSorters","getCurrentSorters","GridMenuExtension","exportService","filterService","sortService","_areVisibleColumnDifferent","_userOriginalGridMenu","getDefaultGridMenuOptions","customItems","addGridMenuCustomCommands","GridMenu","onBeforeMenuShow","onCommand","executeGridMenuInternalCustomCommands","onMenuClose","autosizeColumns","gridUid","getUID","setHeaderRowVisibility","showHeaderRow","setTopPanelVisibility","showTopPanel","setPreHeaderPanelVisibility","showPreHeaderPanel","refreshBackendDataset","buildQuery","startTime_1","gridMenuCustomItems","enableFiltering","disabled","positionOrder","customTitle","executeHeaderMenuInternalCommands","hideColumn","newSortColumns","setColumns","translateGridMenu","emptyGridMenuTitles","GroupItemMetaProviderExtension","HeaderButtonExtension","Plugins","HeaderButtons","HeaderMenuExtension","getDefaultHeaderMenuOptions","addHeaderMenuCustomCommands","HeaderMenu","headerMenuOptions","menu","columnHeaderMenuItems","sortable","sortOutput","resetHeaderMenuTranslations","columnHeaderMenuItems_1","translateHeaderMenu","RowMoveManagerExtension","RowMoveManager","cancelEditOnDrag","onBeforeMoveRows","onMoveRows","RowSelectionExtension","ExtensionService","autoTooltipExtension","cellExternalCopyExtension","checkboxSelectorExtension","columnPickerExtension","draggableGroupingExtension","gridMenuExtension","groupItemMetaExtension","headerButtonExtension","headerMenuExtension","rowMoveManagerExtension","rowSelectionExtension","extensionList","class","getAllColumns","getVisibleColumns","getAllExtensions","getExtensionByName","autoResizeColumns","attachDifferentExtensions","enableAutoTooltip","extension","enableDraggableGrouping","enableGrouping","enableCheckboxSelector","enableRowMoveManager","enableRowSelection","enableHeaderButton","enableExcelCopyBuffer","registerPlugins","plugin","createExtensionsBeforeGridCreation","getSetupColumnReorder","removeColumnByIndex","translateColumnHeaders","newColumnDefinitions","use","renderColumnHeaders","GraphqlQueryBuilder","queryFnName","aliasOrFilter","head","alias","prop","getGraphQLValue","searches","_i","searchKeys","parceFind","setAlias","ReferenceError","_levelA","currentValue","itemX","RangeError","propsAA","JSON","stringify","propS","objectToString","sourceA","GraphqlService","defaultOrderBy","defaultPaginationOptions","datasetName","queryQb","QueryBuilder","datasetQb","dataQb","columnIds","columnDefinitions_1","columnDefinitions_1_1","fields","buildFilterQuery","isWithCursor","pageInfoQb","node","datasetFilters","enablePagination","paginationOptions","sortingOptions","orderBy","filteringOptions","addLocaleIntoQuery","i18n","extraQueryArguments","_d","queryArgument","trimDoubleQuotesOnEnumField","keepArgumentFieldDoubleQuotes","inputArray","set","shift","getInitPaginationOptions","getDatasetName","_currentFilters","getCurrentPagination","_currentPagination","_currentSorters","resetPaginationOptions","after","before","pageNumber","updateOptions","debounceTypingDelay","filterTypingDebounce","castFilterToColumnFilter","clearTimeout","updateFilters","processOnPaginationChanged","updatePagination","newPage","updateSorters","isUpdatedByPreset","searchValue","searchByArray","columnFilter_1","this_1","presetSorters","graphqlSorters","tmpSorterArray","queryFieldSorter","sortColumns_1","sortColumns_1_1","inputStr","enumSearchWords","patternWordInQuotes","patternRegex","reg","RegExp","group1","group2","group3","removeDoubleQuotes","tmpFilter","padZero","trim","allTitleCase","outputStr","substr","OdataService","_odataOptions","filterQueue","_defaultSortBy","queryTmpArray","top","skip","argument","filterStr","filterBySeparator","saveColumnFilter","updateFilterFromListTerms","getFilterByColumn","columnName","getFilterCount","removeColumnFilter","search","filterOptionObject","updateFilterFromTerm","searchBy","tmpSearchByArray","fieldSearchTerms","tmpSearchTerms","j","lnj","lnk","caseType","CaseType","GridOdataService","odataService","mergedOptions","terms","bypassOdataQuery","bypassBackendQuery","encodeURIComponent","dateFormatted","mapOdataOperator","sortByArray","sorterArray","columnFieldName","csvString","GridEventService","attachOnCellChange","onCellChange","cell","getDataItem","returnedArgs","gridDefinition","dataContext","attachOnClick","onClick","onCellClick","GridStateService","_columns","_currentColumns","onGridStateChanged","extensionService","subscribeToAllGridChanges","getCurrentGridState","gridState","getCurrentColumns","currentPagination","getAssociatedCurrentColumns","gridColumns","currentColumns","headerCssClass","getAssociatedGridColumns","currentColumn","c","hookExtensionEventToGridStateChange","eventName","newValues","GridStateType","hookSlickGridEventToGridStateChange","resetColumns","resetRowSelection","setSelectedRows","GridService","gridStateService","getColumnFromEventArguments","getDataItemByRowNumber","getItemRowMetadataToHighlight","previousItemMetadata","meta","cssClasses","_dirty","rowClass","highlightRow","fadeDelay","rowIndexes","highlightRowByMetadata","getItemMetadata","updateItem","gridId","getDataItemByRowIndex","getDataItemByRowIndexes","indexes","dataItems","getSelectedRows","getSelectedRowsDataItem","selectedRowIndexes","setSelectedRow","renderGrid","resetGrid","originalColumns","addItemToDatagrid","shouldHighlightRow","insertItem","scrollRowIntoView","addItemsToDatagrid","deleteDataGridItem","itemId","deleteDataGridItemById","deleteItem","updateDataGridItem","updateDataGridItemById","updateDataGridItems","gridIndexes","getRowById","gridIdx","GroupingAndColspanService","createPreHeaderPanel","createPreHeaderRowGroupingTitle","onColumnsResized","onRowCountChanged","$preHeaderPanel","getPreHeaderPanel","getHeadersWidth","parent","headerColumnWidthDiff","getHeaderColumnWidthDiff","lastColumnGroup","widthTotal","columnGroup","ResizerService","onGridBeforeResize","fixedDimensions","_fixedHeight","height","_fixedWidth","attachAutoResizeDataGrid","newSizes","gridDomElm","resizeGrid","window","_gridUid","calculateGridNewDimensions","autoResizeOptions","containerElm","containerId","gridContainerId","windowElm","gridHeight","coordOffsetTop","availableHeight","availableWidth","maxWidth","newHeight","newWidth","compensateHorizontalScroll","gridElm","scrollbarDimensions","getScrollbarDimensions","slickGridScrollbarWidth","calculatedScrollbarWidth","getLastResizeDimensions","_lastDimensions","delay","_timer","resizeGridWithDimensions","availableDimensions","gridContainerElm","exec","userAgent","resizeCanvas","heightWithPagination","AvgAggregator","_field","_count","_nonNullCount","_sum","accumulate","storeResult","groupTotals","avg","MinAggregator","_min","min","MaxAggregator","_max","max","SumAggregator","sum","Aggregators","Avg","Min","Max","Sum","CheckboxEditor","internalColumnEditor","columnEditor","validator","$input","focus","autoCommitEdit","getEditorLock","commitCurrentEdit","loadValue","preClick","serializeValue","applyValue","state","isValueChanged","validate","validationResults","valid","msg","DateEditor","getCurrentLocale","save","validation","commitChanges","getColumnEditor","domValue","toDate","FloatEditor","getInputDecimalSteps","keyCode","KeyCode","stopImmediatePropagation","hasAutoCommitEdit","getDecimalPlaces","rtn","decimalPlaces","decimals","zeroString","decPlaces","toFixed","elmValue","floatNumber","errorMsg","errorMessage","mapValidation","{{minValue}}","{{maxValue}}","{{minDecimal}}","{{maxDecimal}}","matched","IntegerEditor","LongTextEditor","_translate","cancelText","saveText","$container","$wrapper","cancel","handleKeyDown","preventDefault","navigatePrev","navigateNext","cancelChanges","left","SelectEditor","_subscriptions","_destroying","libOptions","onBlur","$editorElm","isIncludingPrefixSuffix","includePrefixSuffixToSelectedValues","itemFound","_collectionService","loadMultipleValues","loadSingleValue","each","$e","currentValues","filterAfterEachPass","editorTemplate","editorElmOptions","MultipleSelectEditor","SingleSelectEditor","SliderEditor","$sliderNumber","editorParams","TextEditor","getValue","setValue","Editors","checkbox","longText","arrayObjectToCsvFormatter","propertyNames","parentObjectKeyName","outputStrings_1","strings","arrayToCsvFormatter","boldFormatter","checkboxFormatter","checkmarkFormatter","collectionFormatter","collectionEditorFormatter","complexObjectFormatter","dateIsoFormatter","isDateValid","dateTimeIsoFormatter","dateTimeIsoAmPmFormatter","dateTimeUsAmPmFormatter","dateTimeUsFormatter","dateTimeShortIsoFormatter","dateTimeShortUsFormatter","dateUsFormatter","decimalFormatter","minDecimalPlaces","maxDecimalPlaces","deleteIconFormatter","dollarColoredBoldFormatter","isNumber","outputValue","dollarColoredFormatter","dollarFormatter","editIconFormatter","hyperlinkFormatter","matchUrl","hyperlinkUriPrefixFormatter","uriPrefix","infoIconFormatter","lowercaseFormatter","maskFormatter","mask","i_1","v_1","multipleFormatter","formatters","formatters_1","formatters_1_1","percentFormatter","percentCompleteBarFormatter","percentCompleteFormatter","percentSymbolFormatter","progressBarFormatter","color","translateFormatter","translateBooleanFormatter","uppercaseFormatter","yesNoFormatter","Formatters","arrayObjectToCsv","arrayToCsv","bold","checkmark","complexObject","collectionEditor","deleteIcon","decimal","dollar","dollarColored","dollarColoredBold","editIcon","hyperlink","hyperlinkUriPrefix","infoIcon","lowercase","multiple","percent","percentComplete","percentCompleteBar","percentSymbol","progressBar","translateBoolean","uppercase","yesNo","avgTotalsPercentageFormatter","totals","prefix","groupFormatterPrefix","suffix","groupFormatterSuffix","avgTotalsDollarFormatter","avgTotalsFormatter","minTotalsFormatter","maxTotalsFormatter","sumTotalsColoredFormatter","sumTotalsDollarColoredBoldFormatter","sumTotalsDollarColoredFormatter","sumTotalsDollarBoldFormatter","sumTotalsDollarFormatter","sumTotalsFormatter","sumTotalsBoldFormatter","GroupTotalFormatters","avgTotals","avgTotalsDollar","avgTotalsPercentage","maxTotals","minTotals","sumTotals","sumTotalsBold","sumTotalsColored","sumTotalsDollar","sumTotalsDollarBold","sumTotalsDollarColored","sumTotalsDollarColoredBold","SlickPaginationComponent","_isFirstRender","onPaginationChanged","EventEmitter","dataFrom","dataTo","pageCount","paginationPageSizes","fromToParams","from","to","_gridPaginationOptions","gridPaginationOptions","refreshPagination","ngOnDestroy","ngAfterViewInit","_filterSubcription","changeToFirstPage","onPageChanged","changeToLastPage","changeToNextPage","changeToPreviousPage","changeToCurrentPage","currentTarget","onChangeItemPerPage","itemsPerPage","isPageNumberReset","recalculateFromToIndexes","itemCount","emit","Component","selector","template","Output","Input","AngularSlickgridComponent","elm","gridService","gridEventService","groupingAndColspanService","resizer","forRootConfig","_hideHeaderRowAfterPageLoad","groupingDefinition","showPagination","isGridInitialized","onAngularGridCreated","onDataviewCreated","onGridCreated","onGridInitialized","onBeforeGridCreate","onBeforeGridDestroy","onAfterGridDestroyed","updateColumnDefinitionsList","getItems","dataset","_dataset","refreshGridData","ngOnInit","gridHeightString","gridWidthString","emptyDomElementContainer","initialization","mergeGridOptions","createBackendApiInternalPostProcessCallback","customDataView","Data","GroupItemMetadataProvider","DataView","loadEditorCollectionAsync","Grid","attachDifferentHooks","beginUpdate","setItems","endUpdate","executeAfterDataviewCreated","attachResizeHook","attachBackendCallbackFunctions","slickGrid","groupingService","pluginService","resizerService","commitEdit","activeNode_1","getActiveCellNode","isActive","backendApi_1","nodes","totalCount","onLangChange","checkboxColumn","dispatchCustomEvent","eventData","this_2","gridStateChange","updateRowCount","onRowsChanged","invalidateRows","rows","colspanCallback","isExecuteCommandOnInit","onInit","observableOrPromise_1","paginationChanged","reSort","isShowing","toggleHeaderRow","isBubbling","isCancelable","eventInit","bubbles","cancelable","detail","nativeElement","dispatchEvent","resolvedCollection","updateEditorCollection","providers","ElementRef","Inject","AngularSlickgridModule","forRoot","ngModule","provide","useValue","NgModule","imports","CommonModule","TranslateModule","declarations","exports","entryComponents","htmlDecode","htmlEntityEncode","buf","charCodeAt","toKebabCase"],"mappings":"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","sourcesContent":["export enum CaseType {\r\n  camelCase,\r\n  pascalCase,\r\n  snakeCase\r\n}\r\n","export enum DelimiterType {\r\n  colon = ':',\r\n  comma = ',',\r\n  equalSign = '=',\r\n  pipe = '|',\r\n  semicolon = ';',\r\n  space = ' ',\r\n  tab = '\\t',\r\n\r\n  doubleColon = '::',\r\n  doublePipe = '||',\r\n  doubleSemicolon = ';;',\r\n}\r\n\r\n","/** List of available SlickGrid Extensions (Controls & Plugins) */\r\nexport enum ExtensionName {\r\n  autoTooltip = 'autoTooltip',\r\n  cellExternalCopyManager = 'cellExternalCopyManager',\r\n  checkboxSelector = 'checkboxSelector',\r\n  columnPicker = 'columnPicker',\r\n  draggableGrouping = 'draggableGrouping',\r\n  groupItemMetaProvider = 'groupItemMetaProvider',\r\n  gridMenu = 'gridMenu',\r\n  headerButton = 'headerButton',\r\n  headerMenu = 'headerMenu',\r\n  noname = 'noname',\r\n  rowMoveManager = 'rowMoveManager',\r\n  rowSelection = 'rowSelection',\r\n}\r\n","export enum FieldType {\r\n  unknown,\r\n  string,\r\n  boolean,\r\n  integer,\r\n  float,\r\n\r\n  /** number includes Integer and Float */\r\n  number,\r\n\r\n  /** new Date(), javascript Date object */\r\n  date,\r\n\r\n  /** Format: 'YYYY-MM-DD' => 2001-01-01 */\r\n  dateIso,\r\n\r\n  /** Format: 'YYYY-MM-DDTHH:mm:ss.SSSZ' => 2001-01-01T14:00:00.123Z */\r\n  dateUtc,\r\n\r\n  /** new Date(), javacript Date Object with Time */\r\n  dateTime,\r\n\r\n  /** Format: 'YYYY-MM-DD HH:mm:ss' => 2001-01-01 14:01:01 */\r\n  dateTimeIso,\r\n\r\n  /** Format: 'YYYY-MM-DD h:mm:ss a' => 2001-01-01 11:01:01 pm */\r\n  dateTimeIsoAmPm,\r\n\r\n  /** Format: 'YYYY-MM-DD h:mm:ss A' => 2001-01-01 11:01:01 PM */\r\n  dateTimeIsoAM_PM,\r\n\r\n  /** Format: 'YYYY-MM-DD HH:mm' => 2001-01-01 14:01 */\r\n  dateTimeShortIso,\r\n\r\n  /** Format: 'MM/DD/YYYY' => 02/28/2001 */\r\n  dateUs,\r\n\r\n  /** Format: 'M/D/YY' => 2/28/12 */\r\n  dateUsShort,\r\n\r\n  /** Format: 'MM/DD/YYYY HH:mm' => 02/28/2001 13:01 */\r\n  dateTimeShortUs,\r\n\r\n  /** Format: 'MM/DD/YYYY HH:mm:ss' => 02/28/2001 13:01:01 */\r\n  dateTimeUs,\r\n\r\n  /** Format: 'MM/DD/YYYY hh:mm:ss a' => 02/28/2001 11:01:01 pm */\r\n  dateTimeUsAmPm,\r\n\r\n  /** Format: 'MM/DD/YYYY hh:mm:ss A' => 02/28/2001 11:01:01 PM */\r\n  dateTimeUsAM_PM,\r\n\r\n  /** Format: 'M/D/YY H:m:s' => 2/28/14 14:1:2 */\r\n  dateTimeUsShort,\r\n\r\n  /** Format: 'M/D/YY h:m:s a' => 2/28/14 1:2:10 pm */\r\n  dateTimeUsShortAmPm,\r\n\r\n  /** Format: 'M/D/YY h:m:s A' => 2/28/14 14:1:1 PM */\r\n  dateTimeUsShortAM_PM\r\n}\r\n","export enum FileType {\r\n  csv = 'csv',\r\n  doc = 'doc',\r\n  docx = 'docx',\r\n  pdf = 'pdf',\r\n  txt = 'txt',\r\n  xls = 'xls',\r\n  xlsx = 'xlsx'\r\n}\r\n","export enum FilterMultiplePassType {\r\n  merge = 'merge',\r\n  chain = 'chain'\r\n}\r\n","export enum GridStateType {\r\n  columns = 'columns',\r\n  filter = 'filter',\r\n  pagination = 'pagination',\r\n  sorter = 'sorter'\r\n}\r\n","export enum KeyCode {\r\n  BACKSPACE = 8,\r\n  DELETE = 46,\r\n  DOWN = 40,\r\n  END = 35,\r\n  ENTER = 13,\r\n  ESCAPE = 27,\r\n  HOME = 36,\r\n  INSERT = 45,\r\n  LEFT = 37,\r\n  PAGE_DOWN = 34,\r\n  PAGE_UP = 33,\r\n  RIGHT = 39,\r\n  TAB = 9,\r\n  UP = 38\r\n}\r\n","export enum OperatorType {\r\n  /** value is empty */\r\n  empty = '',\r\n\r\n  /** value contains x */\r\n  contains = 'Contains',\r\n\r\n  /** value not contains x (inversed of contains) */\r\n  notContains = 'Not_Contains',\r\n\r\n  /** value less than x */\r\n  lessThan = 'LT',\r\n\r\n  /** value less than or equal to x */\r\n  lessThanOrEqual = 'LE',\r\n\r\n  /** value greater than x */\r\n  greaterThan = 'GT',\r\n\r\n  /** value great than or equal to x */\r\n  greaterThanOrEqual = 'GE',\r\n\r\n  /** value not equal to x */\r\n  notEqual = 'NE',\r\n\r\n  /** value equal to x */\r\n  equal = 'EQ',\r\n\r\n  /** String ends with value */\r\n  endsWith = 'EndsWith',\r\n\r\n  /** String starts with value */\r\n  startsWith = 'StartsWith',\r\n\r\n  /** Find an equal match inside a collection */\r\n  in = 'IN',\r\n\r\n  /** Inverse (Not In) of an equal match inside a collection */\r\n  notIn = 'NOT_IN',\r\n\r\n  /**\r\n   * Find a substring contained inside a collection\r\n   * For example, this condition would return True with \"IN_CONTAINS\":: value='Task2,Task3', collection=['Task2','Task3']\r\n   * This would have returned False with \"IN\" because 'Task2' does not equal 'Task2,Task3'. However 'Task2' is contained in 'Task2,Task3'\r\n   */\r\n  inContains = 'IN_CONTAINS',\r\n\r\n  /** Inversed (Not In) of substring contained inside a collection */\r\n  notInContains = 'NOT_IN_CONTAINS',\r\n}\r\n","export enum SortDirection {\r\n  asc = 'asc',\r\n  ASC = 'ASC',\r\n  desc = 'desc',\r\n  DESC = 'DESC'\r\n}\r\n","export enum SortDirectionNumber {\r\n  asc = 1,\r\n  desc = -1,\r\n  neutral = 0,\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { FieldType, OperatorType } from '../models/index';\nimport { Observable, Subscription } from 'rxjs';\nimport { first, take } from 'rxjs/operators';\n\n\n\nimport * as moment_ from 'moment-mini';\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n/** Simple function to which will loop and create as demanded the number of white spaces,\n * this will be used in the Excel export\n * @param int nbSpaces: number of white spaces to create\n */\nexport function addWhiteSpaces(nbSpaces): string {\n  let result = '';\n\n  for (let i = 0; i < nbSpaces; i++) {\n    result += ' ';\n  }\n  return result;\n}\n\n/** HTML encode using jQuery */\nexport function htmlEncode(value) {\n  // create a in-memory div, set it's inner text(which jQuery automatically encodes)\n  // then grab the encoded contents back out.  The div never exists on the page.\n  return $('<div/>').text(value).html();\n}\n\n/** HTML decode using jQuery */\nexport function htmlDecode(value) {\n  return $('<div/>').html(value).text();\n}\n\n/** decode text into html entity\n * @param string text: input text\n * @param string text: output text\n */\nexport function htmlEntityDecode(input: string): string {\n  return input.replace(/&#(\\d+);/g, function (match, dec) {\n    return String.fromCharCode(dec);\n  });\n}\n\n/** decode text into html entity\n * @param string text: input text\n * @param string text: output text\n */\nexport function htmlEntityEncode(input: any): string {\n  const buf = [];\n  for (let i = input.length - 1; i >= 0; i--) {\n    buf.unshift(['&#', input[i].charCodeAt(), ';'].join(''));\n  }\n  return buf.join('');\n}\n\n/**\n * Compares two arrays to determine if all the items are equal\n * @param a first array\n * @param b second array to compare with a\n * @param [orderMatters=false] flag if the order matters, if not arrays will be sorted\n * @return boolean true if equal, else false\n */\nexport function arraysEqual(a: any[], b: any[], orderMatters: boolean = false): boolean {\n  if (a === b) {\n    return true;\n  }\n\n  if (!a || !b) {\n    return false;\n  }\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  if (!orderMatters) {\n    a.sort();\n    b.sort();\n  }\n\n  for (let i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Try casting an input of type Promise | Observable into a Promise type.\n * @param object which could be of type Promise or Observable\n * @param fromServiceName string representing the caller service name and will be used if we throw a casting problem error\n */\nexport function castToPromise<T>(input: Promise<T> | Observable<T>, fromServiceName: string = ''): Promise<T> {\n  let promise: any = input;\n\n  if (input instanceof Promise) {\n    // if it's already a Promise then return it\n    return input;\n  } else if (input instanceof Observable) {\n    promise = input.pipe(first()).toPromise();\n    if (!(promise instanceof Promise)) {\n      promise = input.pipe(take(1)).toPromise();\n    }\n    if (!(promise instanceof Promise)) {\n      throw new Error(\n        `Something went wrong, Angular-Slickgrid ${fromServiceName} is not able to convert the Observable into a Promise.\n        If you are using Angular HttpClient, you could try converting your http call to a Promise with \".toPromise()\"\n        for example::  this.http.post('graphql', { query: graphqlQuery }).toPromise()\n        `);\n    }\n  }\n\n  return promise;\n}\n\n/**\n * Uses the logic function to find an item in an array or returns the default\n * value provided (empty object by default)\n * @param any[] array the array to filter\n * @param function logic the logic to find the item\n * @param any [defaultVal={}] the default value to return\n * @return object the found object or default value\n */\nexport function findOrDefault(array: any[], logic: (item: any) => boolean, defaultVal = {}): any {\n  return array.find(logic) || defaultVal;\n}\n\n/**\n  * Take a number (or a string) and display it as a formatted decimal string with defined minimum and maximum decimals\n  * @param input\n  * @param minDecimal\n  * @param maxDecimal\n  */\nexport function decimalFormatted(input: number | string, minDecimal?: number, maxDecimal?: number) {\n  if (isNaN(+input)) {\n    return input;\n  }\n\n  const minDec = (minDecimal === undefined) ? 2 : minDecimal;\n  const maxDec = (maxDecimal === undefined) ? 2 : maxDecimal;\n  let amount = String(Math.round(+input * Math.pow(10, maxDec)) / Math.pow(10, maxDec));\n\n  if (amount.indexOf('.') < 0) {\n    amount += '.';\n  }\n  while ((amount.length - amount.indexOf('.')) <= minDec) {\n    amount += '0';\n  }\n  return amount;\n}\n\n/** From a dot (.) notation find and return a property within an object given a path */\nexport function getDescendantProperty(obj: any, path: string) {\n  return path.split('.').reduce((acc, part) => acc && acc[part], obj);\n}\n\n/** Get the browser's scrollbar width, this is different to each browser */\nexport function getScrollBarWidth() {\n  const $outer = $('<div>').css({ visibility: 'hidden', width: 100, overflow: 'scroll' }).appendTo('body');\n  const widthWithScroll = $('<div>').css({ width: '100%' }).appendTo($outer).outerWidth();\n  $outer.remove();\n  return Math.ceil(100 - widthWithScroll);\n}\n\n/**\n * From a Date FieldType, return it's equivalent moment.js format\n * refer to moment.js for the format standard used: https://momentjs.com/docs/#/parsing/string-format/\n * @param fieldType\n */\nexport function mapMomentDateFormatWithFieldType(fieldType: FieldType): string {\n  let map: string;\n  switch (fieldType) {\n    case FieldType.dateTime:\n    case FieldType.dateTimeIso:\n      map = 'YYYY-MM-DD HH:mm:ss';\n      break;\n    case FieldType.dateTimeShortIso:\n      map = 'YYYY-MM-DD HH:mm';\n      break;\n    case FieldType.dateTimeIsoAmPm:\n      map = 'YYYY-MM-DD hh:mm:ss a';\n      break;\n    case FieldType.dateTimeIsoAM_PM:\n      map = 'YYYY-MM-DD hh:mm:ss A';\n      break;\n    case FieldType.dateUs:\n      map = 'MM/DD/YYYY';\n      break;\n    case FieldType.dateUsShort:\n      map = 'M/D/YY';\n      break;\n    case FieldType.dateTimeUs:\n      map = 'MM/DD/YYYY HH:mm:ss';\n      break;\n    case FieldType.dateTimeShortUs:\n      map = 'MM/DD/YYYY HH:mm';\n      break;\n    case FieldType.dateTimeUsAmPm:\n      map = 'MM/DD/YYYY hh:mm:ss a';\n      break;\n    case FieldType.dateTimeUsAM_PM:\n      map = 'MM/DD/YYYY hh:mm:ss A';\n      break;\n    case FieldType.dateTimeUsShort:\n      map = 'M/D/YY H:m:s';\n      break;\n    case FieldType.dateTimeUsShortAmPm:\n      map = 'M/D/YY h:m:s a';\n      break;\n    case FieldType.dateUtc:\n      map = 'YYYY-MM-DDTHH:mm:ss.SSSZ';\n      break;\n    case FieldType.date:\n    case FieldType.dateIso:\n    default:\n      map = 'YYYY-MM-DD';\n      break;\n  }\n  return map;\n}\n\n/**\n * From a Date FieldType, return it's equivalent Flatpickr format\n * refer to Flatpickr for the format standard used: https://chmln.github.io/flatpickr/formatting/#date-formatting-tokens\n * also note that they seem very similar to PHP format (except for am/pm): http://php.net/manual/en/function.date.php\n * @param fieldType\n */\nexport function mapFlatpickrDateFormatWithFieldType(fieldType: FieldType): string {\n  /*\n    d: Day of the month, 2 digits with leading zeros\t01 to 31\n    D: A textual representation of a day\tMon through Sun\n    l: (lowercase 'L')\tA full textual representation of the day of the week\tSunday through Saturday\n    j: Day of the month without leading zeros\t1 to 31\n    J: Day of the month without leading zeros and ordinal suffix\t1st, 2nd, to 31st\n    w: Numeric representation of the day of the week\t0 (for Sunday) through 6 (for Saturday)\n    F: A full textual representation of a month\tJanuary through December\n    m: Numeric representation of a month, with leading zero\t01 through 12\n    n: Numeric representation of a month, without leading zeros\t1 through 12\n    M: A short textual representation of a month\tJan through Dec\n    U: The number of seconds since the Unix Epoch\t1413704993\n    y: A two digit representation of a year\t99 or 03\n    Y: A full numeric representation of a year, 4 digits\t1999 or 2003\n    H: Hours (24 hours)\t00 to 23\n    h: Hours\t1 to 12\n    i: Minutes\t00 to 59\n    S: Seconds, 2 digits\t00 to 59\n    s: Seconds\t0, 1 to 59\n    K: AM/PM\tAM or PM\n  */\n  let map: string;\n  switch (fieldType) {\n    case FieldType.dateTime:\n    case FieldType.dateTimeIso:\n      map = 'Y-m-d H:i:S';\n      break;\n    case FieldType.dateTimeIsoAmPm:\n      map = 'Y-m-d h:i:S K'; // there is no lowercase in Flatpickr :(\n      break;\n    case FieldType.dateTimeIsoAM_PM:\n      map = 'Y-m-d h:i:S K';\n      break;\n    case FieldType.dateUs:\n      map = 'm/d/Y';\n      break;\n    case FieldType.dateUsShort:\n      map = 'm/d/y';\n      break;\n    case FieldType.dateTimeUs:\n      map = 'm/d/Y H:i:S';\n      break;\n    case FieldType.dateTimeUsAmPm:\n      map = 'm/d/Y h:i:S K'; // there is no lowercase in Flatpickr :(\n      break;\n    case FieldType.dateTimeUsAM_PM:\n      map = 'm/d/Y h:i:s K';\n      break;\n    case FieldType.dateTimeUsShort:\n      map = 'm/d/y H:i:s';\n      break;\n    case FieldType.dateTimeUsShortAmPm:\n      map = 'm/d/y h:i:s K'; // there is no lowercase in Flatpickr :(\n      break;\n    case FieldType.dateUtc:\n      map = 'Z';\n      break;\n    case FieldType.date:\n    case FieldType.dateIso:\n    default:\n      map = 'Y-m-d';\n      break;\n  }\n  return map;\n}\n\n/**\n * Mapper for query operators (ex.: <= is \"le\", > is \"gt\")\n * @param string operator\n * @returns string map\n */\nexport function mapOperatorType(operator: string): OperatorType {\n  let map: OperatorType;\n\n  switch (operator) {\n    case '<':\n      map = OperatorType.lessThan;\n      break;\n    case '<=':\n      map = OperatorType.lessThanOrEqual;\n      break;\n    case '>':\n      map = OperatorType.greaterThan;\n      break;\n    case '>=':\n      map = OperatorType.greaterThanOrEqual;\n      break;\n    case '<>':\n    case '!=':\n    case 'neq':\n    case 'NEQ':\n      map = OperatorType.notEqual;\n      break;\n    case '*':\n    case '.*':\n    case 'startsWith':\n      map = OperatorType.startsWith;\n      break;\n    case '*.':\n    case 'endsWith':\n      map = OperatorType.endsWith;\n      break;\n    case '=':\n    case '==':\n    case 'eq':\n    case 'EQ':\n      map = OperatorType.equal;\n      break;\n    case 'in':\n    case 'IN':\n      map = OperatorType.in;\n      break;\n    case 'notIn':\n    case 'NIN':\n    case 'NOT_IN':\n      map = OperatorType.notIn;\n      break;\n    default:\n      map = OperatorType.contains;\n      break;\n  }\n\n  return map;\n}\n\n/**\n * Mapper for query operator by a Filter Type\n * For example a multiple-select typically uses 'IN' operator\n * @param operator\n * @returns string map\n */\nexport function mapOperatorByFieldType(fieldType: FieldType | string): OperatorType {\n  let map: OperatorType;\n\n  switch (fieldType) {\n    case FieldType.string:\n    case FieldType.unknown:\n      map = OperatorType.contains;\n      break;\n    case FieldType.float:\n    case FieldType.number:\n    case FieldType.date:\n    case FieldType.dateIso:\n    case FieldType.date:\n    case FieldType.dateUtc:\n    case FieldType.dateTime:\n    case FieldType.dateTimeIso:\n    case FieldType.dateTimeIsoAmPm:\n    case FieldType.dateTimeIsoAM_PM:\n    case FieldType.dateUs:\n    case FieldType.dateUsShort:\n    case FieldType.dateTimeUs:\n    case FieldType.dateTimeUsAmPm:\n    case FieldType.dateTimeUsAM_PM:\n    case FieldType.dateTimeUsShort:\n    case FieldType.dateTimeUsShortAmPm:\n    case FieldType.dateTimeUsShortAM_PM:\n    default:\n      map = OperatorType.equal;\n      break;\n  }\n\n  return map;\n}\n\n/**\n * Parse a date passed as a string and return a Date object (if valid)\n * @param inputDateString\n * @returns string date formatted\n */\nexport function parseUtcDate(inputDateString: string, useUtc: boolean): string | null {\n  let date = null;\n\n  if (/^[0-9\\-\\/]*$/.test(inputDateString)) {\n    // get the UTC datetime with moment.js but we need to decode the value so that it's valid text\n    const dateString = decodeURIComponent(inputDateString);\n    const dateMoment = moment(new Date(dateString));\n    if (dateMoment.isValid() && dateMoment.year().toString().length === 4) {\n      date = (useUtc) ? dateMoment.utc().format() : dateMoment.format();\n    }\n  }\n\n  return date;\n}\n\n/**\n * Sanitize, return only the text without HTML tags\n * @input htmlString\n * @return text\n */\nexport function sanitizeHtmlToText(htmlString: string) {\n  const temp = document.createElement('div');\n  temp.innerHTML = htmlString;\n  return temp.textContent || temp.innerText;\n}\n\n/**\n * Title case the complete sentence (upper case first char of each word while changing everything else to lower case)\n * @param string\n * @returns string\n */\nexport function titleCase(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n/**\n * Converts a string to camel case\n * @param str the string to convert\n * @return the string in camel case\n */\nexport function toCamelCase(str: string): string {\n  return str.replace(/(?:^\\w|[A-Z]|\\b\\w|[\\s+\\-_\\/])/g, (match: string, offset: number) => {\n    // remove white space or hypens or underscores\n    if (/[\\s+\\-_\\/]/.test(match)) {\n      return '';\n    }\n\n    return offset === 0 ? match.toLowerCase() : match.toUpperCase();\n  });\n}\n\n/**\n * Converts a string to kebab (hypen) case\n * @param str the string to convert\n * @return the string in kebab case\n */\nexport function toKebabCase(str: string): string {\n  return toCamelCase(str).replace(/([A-Z])/g, '-$1').toLowerCase();\n}\n\n/**\n * Takes an input array and makes sure the array has unique values by removing duplicates\n * @param array input with possible duplicates\n * @return array output without duplicates\n */\nexport function uniqueArray(arr: any[]): any[] {\n  return arr.filter((item: any, index: number) => {\n    return arr.indexOf(item) >= index;\n  });\n}\n\n/**\n * Unsubscribe all Observables Subscriptions\n * It will return an empty array if it all went well\n * @param subscriptions\n */\nexport function unsubscribeAllObservables(subscriptions: Subscription[]): Subscription[] {\n  if (Array.isArray(subscriptions)) {\n    subscriptions.forEach((subscription: Subscription) => {\n      if (subscription && subscription.unsubscribe) {\n        subscription.unsubscribe();\n      }\n    });\n    subscriptions = [];\n  }\n\n  return subscriptions;\n}\n","import * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\n\r\nexport function compareDates(value1, value2, format, sortDirection, strict?: boolean) {\r\n  let diff = 0;\r\n\r\n  if (value1 === null || value1 === '' || !moment(value1, format, strict).isValid()) {\r\n    diff = -1;\r\n  } else if (value2 === null || value2 === '' || !moment(value2, format, strict).isValid()) {\r\n    diff = 1;\r\n  } else {\r\n    const date1 = moment(value1, format, strict);\r\n    const date2 = moment(value2, format, strict);\r\n    diff = parseInt(date1.format('X'), 10) - parseInt(date2.format('X'), 10);\r\n  }\r\n\r\n  return sortDirection * (diff === 0 ? 0 : (diff > 0 ? 1 : -1));\r\n}\r\n","import { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport { FieldType, Sorter } from './../models/index';\r\nimport { compareDates } from './compareDateUtility';\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateUsShort);\r\n\r\nexport const dateUsShortSorter: Sorter = (value1, value2, sortDirection) => {\r\n  return compareDates(value1, value2, FORMAT, sortDirection, true);\r\n};\r\n","import { Sorter } from './../models/index';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nimport { compareDates } from './compareDateUtility';\r\n\r\nexport const dateSorter: Sorter = (value1, value2, sortDirection) => {\r\n  return compareDates(value1, value2, moment.ISO_8601, sortDirection);\r\n};\r\n","import { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport { FieldType, Sorter } from './../models/index';\r\nimport { compareDates } from './compareDateUtility';\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateIso);\r\n\r\nexport const dateIsoSorter: Sorter = (value1, value2, sortDirection) => {\r\n  return compareDates(value1, value2, FORMAT, sortDirection, true);\r\n};\r\n","import { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport { FieldType, Sorter } from './../models/index';\r\nimport { compareDates } from './compareDateUtility';\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateUs);\r\n\r\nexport const dateUsSorter: Sorter = (value1, value2, sortDirection) => {\r\n  return compareDates(value1, value2, FORMAT, sortDirection, true);\r\n};\r\n","import { Sorter } from './../models/index';\r\n\r\nexport const numericSorter: Sorter = (value1, value2, sortDirection) => {\r\n  const x = (isNaN(value1) || value1 === '' || value1 === null) ? -99e+10 : parseFloat(value1);\r\n  const y = (isNaN(value2) || value2 === '' || value2 === null) ? -99e+10 : parseFloat(value2);\r\n  return sortDirection * (x === y ? 0 : (x > y ? 1 : -1));\r\n};\r\n","import { Sorter } from './../models/index';\r\n\r\nexport const stringSorter: Sorter = (value1, value2, sortDirection) => {\r\n  let position;\r\n  if (value1 === null) {\r\n    position = -1;\r\n  } else if (value2 === null) {\r\n    position = 1;\r\n  } else if (value1 === value2) {\r\n    position = 0;\r\n  } else if (sortDirection) {\r\n    position = value1 < value2 ? -1 : 1;\r\n  } else if (!sortDirection) {\r\n    position = value1 < value2 ? 1 : -1;\r\n  }\r\n  return sortDirection * position;\r\n};\r\n","import { SortDirectionNumber } from './../models/sortDirectionNumber.enum';\r\nimport { dateUsShortSorter } from './dateUsShortSorter';\r\nimport { dateSorter } from './dateSorter';\r\nimport { dateIsoSorter } from './dateIsoSorter';\r\nimport { dateUsSorter } from './dateUsSorter';\r\nimport { numericSorter } from './numericSorter';\r\nimport { stringSorter } from './stringSorter';\r\n\r\nexport const Sorters = {\r\n  date: dateSorter,\r\n  dateIso: dateIsoSorter,\r\n  dateUs: dateUsSorter,\r\n  dateUsShort: dateUsShortSorter,\r\n  numeric: numericSorter,\r\n  string: stringSorter\r\n};\r\n","import { FieldType } from './../models/index';\r\nimport { Sorters } from './index';\r\n\r\nexport function sortByFieldType(value1: any, value2: any, fieldType: FieldType, sortDirection: number) {\r\n  let sortResult = 0;\r\n\r\n  switch (fieldType) {\r\n    case FieldType.number:\r\n      sortResult = Sorters.numeric(value1, value2, sortDirection);\r\n      break;\r\n    case FieldType.date:\r\n      sortResult = Sorters.date(value1, value2, sortDirection);\r\n      break;\r\n    case FieldType.dateIso:\r\n      sortResult = Sorters.dateIso(value1, value2, sortDirection);\r\n      break;\r\n    case FieldType.dateUs:\r\n      sortResult = Sorters.dateUs(value1, value2, sortDirection);\r\n      break;\r\n    case FieldType.dateUsShort:\r\n      sortResult = Sorters.dateUsShort(value1, value2, sortDirection);\r\n      break;\r\n    default:\r\n      sortResult = Sorters.string(value1, value2, sortDirection);\r\n      break;\r\n  }\r\n\r\n  return sortResult;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport {\r\n  CollectionFilterBy,\r\n  CollectionSortBy,\r\n  FilterMultiplePassType,\r\n  FilterMultiplePassTypeString,\r\n  FieldType,\r\n  OperatorType,\r\n  SortDirectionNumber,\r\n} from './../models/index';\r\nimport { sortByFieldType } from '../sorters/sorterUtilities';\r\nimport { uniqueArray } from './utilities';\r\n\r\n@Injectable()\r\nexport class CollectionService {\r\n  constructor(private translate: TranslateService) { }\r\n\r\n  /**\r\n   * Filter 1 or more items from a collection\r\n   * @param collection\r\n   * @param filterByOptions\r\n   */\r\n  filterCollection(collection: any[], filterByOptions: CollectionFilterBy | CollectionFilterBy[], filterResultBy: FilterMultiplePassType | FilterMultiplePassTypeString | null = FilterMultiplePassType.chain): any[] {\r\n    let filteredCollection: any[] = [];\r\n\r\n    // when it's array, we will use the new filtered collection after every pass\r\n    // basically if input collection has 10 items on 1st pass and 1 item is filtered out, then on 2nd pass the input collection will be 9 items\r\n    if (Array.isArray(filterByOptions)) {\r\n      filteredCollection = (filterResultBy === FilterMultiplePassType.merge) ? [] : collection;\r\n\r\n      for (const filter of filterByOptions) {\r\n        if (filterResultBy === FilterMultiplePassType.merge) {\r\n          const filteredPass = this.singleFilterCollection(collection, filter);\r\n          filteredCollection = uniqueArray([...filteredCollection, ...filteredPass]);\r\n        } else {\r\n          filteredCollection = this.singleFilterCollection(filteredCollection, filter);\r\n        }\r\n      }\r\n    } else {\r\n      filteredCollection = this.singleFilterCollection(collection, filterByOptions);\r\n    }\r\n\r\n    return filteredCollection;\r\n  }\r\n\r\n  /**\r\n   * Filter an item from a collection\r\n   * @param collection\r\n   * @param filterBy\r\n   */\r\n  singleFilterCollection(collection: any[], filterBy: CollectionFilterBy): any[] {\r\n    let filteredCollection: any[] = [];\r\n\r\n    if (filterBy) {\r\n      const property = filterBy.property || '';\r\n      const operator = filterBy.operator || OperatorType.equal;\r\n      // just check for undefined since the filter value could be null, 0, '', false etc\r\n      const value = typeof filterBy.value === 'undefined' ? '' : filterBy.value;\r\n\r\n      switch (operator) {\r\n        case OperatorType.equal:\r\n          filteredCollection = collection.filter((item) => item[property] === value);\r\n          break;\r\n        case OperatorType.contains:\r\n          filteredCollection = collection.filter((item) => item[property].toString().indexOf(value.toString()) !== -1);\r\n          break;\r\n        case OperatorType.notContains:\r\n          filteredCollection = collection.filter((item) => item[property].toString().indexOf(value.toString()) === -1);\r\n          break;\r\n        case OperatorType.notEqual:\r\n        default:\r\n          filteredCollection = collection.filter((item) => item[property] !== value);\r\n      }\r\n    }\r\n\r\n    return filteredCollection;\r\n  }\r\n\r\n  /**\r\n   * Sort 1 or more items in a collection\r\n   * @param collection\r\n   * @param sortByOptions\r\n   * @param enableTranslateLabel\r\n   */\r\n  sortCollection(collection: any[], sortByOptions: CollectionSortBy | CollectionSortBy[], enableTranslateLabel?: boolean): any[] {\r\n    let sortedCollection: any[] = [];\r\n\r\n    if (sortByOptions) {\r\n      if (Array.isArray(sortByOptions)) {\r\n        // multi-sort\r\n        sortedCollection = collection.sort((dataRow1: any, dataRow2: any) => {\r\n          for (let i = 0, l = sortByOptions.length; i < l; i++) {\r\n            const sortBy = sortByOptions[i];\r\n\r\n            if (sortBy) {\r\n              const sortDirection = sortBy.sortDesc ? SortDirectionNumber.desc : SortDirectionNumber.asc;\r\n              const propertyName = sortBy.property || '';\r\n              const fieldType = sortBy.fieldType || FieldType.string;\r\n              const value1 = (enableTranslateLabel) ? this.translate.instant(dataRow1[propertyName] || ' ') : dataRow1[propertyName];\r\n              const value2 = (enableTranslateLabel) ? this.translate.instant(dataRow2[propertyName] || ' ') : dataRow2[propertyName];\r\n\r\n              const sortResult = sortByFieldType(value1, value2, fieldType, sortDirection);\r\n              if (sortResult !== SortDirectionNumber.neutral) {\r\n                return sortResult;\r\n              }\r\n            }\r\n          }\r\n          return SortDirectionNumber.neutral;\r\n        });\r\n      } else {\r\n        // single sort\r\n        const propertyName = sortByOptions.property || '';\r\n        const sortDirection = sortByOptions.sortDesc ? SortDirectionNumber.desc : SortDirectionNumber.asc;\r\n        const fieldType = sortByOptions.fieldType || FieldType.string;\r\n\r\n        sortedCollection = collection.sort((dataRow1: any, dataRow2: any) => {\r\n          const value1 = (enableTranslateLabel) ? this.translate.instant(dataRow1[propertyName] || ' ') : dataRow1[propertyName];\r\n          const value2 = (enableTranslateLabel) ? this.translate.instant(dataRow2[propertyName] || ' ') : dataRow2[propertyName];\r\n          const sortResult = sortByFieldType(value1, value2, fieldType, sortDirection);\r\n          if (sortResult !== SortDirectionNumber.neutral) {\r\n            return sortResult;\r\n          }\r\n          return SortDirectionNumber.neutral;\r\n        });\r\n      }\r\n    }\r\n\r\n    return sortedCollection;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport {\r\n  Column,\r\n  ExportOption,\r\n  FileType,\r\n  Formatter,\r\n  GridOption\r\n} from './../models/index';\r\nimport { addWhiteSpaces, htmlEntityDecode, sanitizeHtmlToText } from './../services/utilities';\r\nimport { Subject } from 'rxjs';\r\nimport { TextEncoder } from 'text-encoding-utf-8';\r\n\r\n// using external non-typed js libraries\r\ndeclare let $: any;\r\n\r\nexport interface ExportColumnHeader {\r\n  key: string;\r\n  title: string;\r\n}\r\n\r\n@Injectable()\r\nexport class ExportService {\r\n  private _lineCarriageReturn = '\\n';\r\n  private _dataView: any;\r\n  private _grid: any;\r\n  private _exportQuoteWrapper: string;\r\n  private _columnHeaders: ExportColumnHeader[];\r\n  private _groupedHeaders: ExportColumnHeader[];\r\n  private _hasGroupedItems = false;\r\n  private _exportOptions: ExportOption;\r\n  onGridBeforeExportToFile = new Subject<boolean>();\r\n  onGridAfterExportToFile = new Subject<{ options: any }>();\r\n\r\n  constructor(private translate: TranslateService) { }\r\n\r\n  private get datasetIdName(): string {\r\n    return this._gridOptions && this._gridOptions.datasetIdPropertyName || 'id';\r\n  }\r\n\r\n  /** Getter for the Grid Options pulled through the Grid Object */\r\n  private get _gridOptions(): GridOption {\r\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\r\n  }\r\n\r\n  /**\r\n   * Initialize the Export Service\r\n   * @param grid\r\n   * @param gridOptions\r\n   * @param dataView\r\n   */\r\n  init(grid: any, dataView: any): void {\r\n    this._grid = grid;\r\n    this._dataView = dataView;\r\n  }\r\n\r\n  /**\r\n   * Function to export the Grid result to an Excel CSV format using javascript for it to produce the CSV file.\r\n   * This is a WYSIWYG export to file output (What You See is What You Get)\r\n   *\r\n   * NOTES: The column position needs to match perfectly the JSON Object position because of the way we are pulling the data,\r\n   * which means that if any column(s) got moved in the UI, it has to be reflected in the JSON array output as well\r\n   *\r\n   * Example: exportToFile({ format: FileType.csv, delimiter: DelimiterType.comma })\r\n   */\r\n  exportToFile(options: ExportOption) {\r\n    this.onGridBeforeExportToFile.next(true);\r\n    this._exportOptions = $.extend(true, {}, this._gridOptions.exportOptions, options);\r\n\r\n    // get the CSV output from the grid data\r\n    const dataOutput = this.getDataOutput();\r\n\r\n    // trigger a download file\r\n    // wrap it into a setTimeout so that the EventAggregator has enough time to start a pre-process like showing a spinner\r\n    setTimeout(() => {\r\n      const downloadOptions = {\r\n        filename: `${this._exportOptions.filename}.${this._exportOptions.format}`,\r\n        csvContent: dataOutput,\r\n        format: this._exportOptions.format,\r\n        useUtf8WithBom: this._exportOptions.useUtf8WithBom\r\n      };\r\n      this.startDownloadFile(downloadOptions);\r\n      this.onGridAfterExportToFile.next({ options: downloadOptions });\r\n    }, 0);\r\n  }\r\n\r\n  // -----------------------\r\n  // Private functions\r\n  // -----------------------\r\n\r\n  getDataOutput(): string {\r\n    const columns = this._grid.getColumns() || [];\r\n    const delimiter = this._exportOptions.delimiter || '';\r\n    const format = this._exportOptions.format || '';\r\n    const groupByColumnHeader = this._exportOptions.groupingColumnHeaderTitle || this.translate.instant('GROUP_BY');\r\n\r\n    // a CSV needs double quotes wrapper, the other types do not need any wrapper\r\n    this._exportQuoteWrapper = (format === FileType.csv) ? '\"' : '';\r\n\r\n    // data variable which will hold all the fields data of a row\r\n    let outputDataString = '';\r\n\r\n    // get grouped column titles and if found, we will add a \"Group by\" column at the first column index\r\n    const grouping = this._dataView.getGrouping();\r\n    if (grouping && Array.isArray(grouping) && grouping.length > 0) {\r\n      this._hasGroupedItems = true;\r\n      outputDataString += `${groupByColumnHeader}` + delimiter;\r\n    } else {\r\n      this._hasGroupedItems = false;\r\n    }\r\n\r\n    // get all column headers\r\n    this._columnHeaders = this.getColumnHeaders(columns) || [];\r\n    if (this._columnHeaders && Array.isArray(this._columnHeaders) && this._columnHeaders.length > 0) {\r\n      // add the header row + add a new line at the end of the row\r\n      const outputHeaderTitles = this._columnHeaders.map((header) => {\r\n        return this._exportQuoteWrapper + header.title + this._exportQuoteWrapper;\r\n      });\r\n      outputDataString += (outputHeaderTitles.join(delimiter) + this._lineCarriageReturn);\r\n    }\r\n\r\n    // Populate the rest of the Grid Data\r\n    outputDataString += this.getAllGridRowData(columns, this._lineCarriageReturn);\r\n\r\n    return outputDataString;\r\n  }\r\n\r\n  /**\r\n   * Get all the grid row data and return that as an output string\r\n   */\r\n  getAllGridRowData(columns: Column[], lineCarriageReturn: string): string {\r\n    const outputDataStrings = [];\r\n    const lineCount = this._dataView.getLength();\r\n\r\n    // loop through all the grid rows of data\r\n    for (let rowNumber = 0; rowNumber < lineCount; rowNumber++) {\r\n      const itemObj = this._dataView.getItem(rowNumber);\r\n\r\n      if (itemObj != null) {\r\n        // Normal row (not grouped by anything) would have an ID which was predefined in the Grid Columns definition\r\n        if (itemObj[this.datasetIdName] != null) {\r\n          // get regular row item data\r\n          outputDataStrings.push(this.readRegularRowData(columns, rowNumber, itemObj));\r\n        } else if (this._hasGroupedItems && itemObj.__groupTotals === undefined) {\r\n          // get the group row\r\n          outputDataStrings.push(this.readGroupedTitleRow(itemObj));\r\n        } else if (itemObj.__groupTotals) {\r\n          // else if the row is a Group By and we have agreggators, then a property of '__groupTotals' would exist under that object\r\n          outputDataStrings.push(this.readGroupedTotalRow(columns, itemObj));\r\n        }\r\n      }\r\n    }\r\n\r\n    return outputDataStrings.join(this._lineCarriageReturn);\r\n  }\r\n\r\n  /**\r\n   * Get all header titles and their keys, translate the title when required.\r\n   * @param columns of the grid\r\n   */\r\n  getColumnHeaders(columns: Column[]): ExportColumnHeader[] {\r\n    if (!columns || !Array.isArray(columns) || columns.length === 0) {\r\n      return null;\r\n    }\r\n    const columnHeaders = [];\r\n\r\n    // Populate the Column Header, pull the name defined\r\n    columns.forEach((columnDef) => {\r\n      const fieldName = (columnDef.headerKey) ? this.translate.instant(columnDef.headerKey) : columnDef.name;\r\n      const skippedField = columnDef.excludeFromExport || false;\r\n\r\n      // if column width is 0 then it's not evaluated since that field is considered hidden should not be part of the export\r\n      if ((columnDef.width ===  undefined || columnDef.width > 0) && !skippedField) {\r\n        columnHeaders.push({\r\n          key: columnDef.field || columnDef.id,\r\n          title: fieldName\r\n        });\r\n      }\r\n    });\r\n\r\n    return columnHeaders;\r\n  }\r\n\r\n  /**\r\n   * Get the data of a regular row (a row without grouping)\r\n   * @param row\r\n   * @param itemObj\r\n   */\r\n  readRegularRowData(columns: Column[], row: number, itemObj: any) {\r\n    let idx = 0;\r\n    const rowOutputStrings = [];\r\n    const delimiter = this._exportOptions.delimiter;\r\n    const format = this._exportOptions.format;\r\n    const exportQuoteWrapper = this._exportQuoteWrapper || '';\r\n\r\n    for (let col = 0, ln = columns.length; col < ln; col++) {\r\n      const columnDef = columns[col];\r\n      const fieldId = columnDef.field || columnDef.id || '';\r\n\r\n      // skip excluded column\r\n      if (columnDef.excludeFromExport) {\r\n          continue;\r\n      }\r\n\r\n      // if we are grouping and are on 1st column index, we need to skip this column since it will be used later by the grouping text:: Group by [columnX]\r\n      if (this._hasGroupedItems && idx === 0) {\r\n        rowOutputStrings.push(`\"\"`);\r\n      }\r\n\r\n      // does the user want to evaluate current column Formatter?\r\n      const isEvaluatingFormatter = (columnDef.exportWithFormatter !== undefined) ? columnDef.exportWithFormatter : this._exportOptions.exportWithFormatter;\r\n\r\n      // did the user provide a Custom Formatter for the export\r\n      const exportCustomFormatter: Formatter = (columnDef.exportCustomFormatter !== undefined) ? columnDef.exportCustomFormatter : undefined;\r\n\r\n      let itemData = '';\r\n\r\n      if (exportCustomFormatter) {\r\n        itemData = exportCustomFormatter(row, col, itemObj[fieldId], columnDef, itemObj, this._grid);\r\n      } else if (isEvaluatingFormatter && !!columnDef.formatter) {\r\n        itemData = columnDef.formatter(row, col, itemObj[fieldId], columnDef, itemObj, this._grid);\r\n      } else {\r\n        itemData = (itemObj[fieldId] === null || itemObj[fieldId] === undefined) ? '' : itemObj[fieldId];\r\n      }\r\n\r\n      // does the user want to sanitize the output data (remove HTML tags)?\r\n      if (columnDef.sanitizeDataExport || this._exportOptions.sanitizeDataExport) {\r\n        itemData = sanitizeHtmlToText(itemData);\r\n      }\r\n\r\n      // when CSV we also need to escape double quotes twice, so \" becomes \"\"\r\n      if (format === FileType.csv && itemData) {\r\n        itemData = itemData.toString().replace(/\"/gi, `\"\"`);\r\n      }\r\n\r\n      // do we have a wrapper to keep as a string? in certain cases like \"1E06\", we don't want excel to transform it into exponential (1.0E06)\r\n      // to cancel that effect we can had = in front, ex: =\"1E06\"\r\n      const keepAsStringWrapper = (columnDef && columnDef.exportCsvForceToKeepAsString) ? '=' : '';\r\n\r\n      rowOutputStrings.push(keepAsStringWrapper + exportQuoteWrapper + itemData + exportQuoteWrapper);\r\n      idx++;\r\n    }\r\n\r\n    return rowOutputStrings.join(delimiter);\r\n  }\r\n\r\n  /**\r\n   * Get the grouped title(s), for example if we grouped by salesRep, the returned result would be:: 'Sales Rep'\r\n   * @param itemObj\r\n   */\r\n  readGroupedTitleRow(itemObj: any) {\r\n    let groupName = sanitizeHtmlToText(itemObj.title);\r\n    const exportQuoteWrapper = this._exportQuoteWrapper || '';\r\n    const format = this._exportOptions.format;\r\n\r\n    groupName = addWhiteSpaces(5 * itemObj.level) + groupName;\r\n\r\n    if (format === FileType.csv) {\r\n      // when CSV we also need to escape double quotes twice, so \" becomes \"\"\r\n      groupName = groupName.toString().replace(/\"/gi, `\"\"`);\r\n    }\r\n    return exportQuoteWrapper + ' ' + groupName + exportQuoteWrapper;\r\n  }\r\n\r\n  /**\r\n   * Get the grouped totals, these are set by Slick Aggregators.\r\n   * For example if we grouped by \"salesRep\" and we have a Sum Aggregator on \"sales\", then the returned output would be:: [\"Sum 123$\"]\r\n   * @param itemObj\r\n   */\r\n  readGroupedTotalRow(columns: Column[], itemObj: any) {\r\n    const delimiter = this._exportOptions.delimiter;\r\n    const format = this._exportOptions.format;\r\n    const groupingAggregatorRowText = this._exportOptions.groupingAggregatorRowText || '';\r\n    const exportQuoteWrapper = this._exportQuoteWrapper || '';\r\n    const outputStrings = [`${exportQuoteWrapper}${groupingAggregatorRowText}${exportQuoteWrapper}`];\r\n\r\n    columns.forEach((columnDef) => {\r\n      let itemData = '';\r\n\r\n      // if there's a groupTotalsFormatter, we will re-run it to get the exact same output as what is shown in UI\r\n      if (columnDef.groupTotalsFormatter) {\r\n        itemData = columnDef.groupTotalsFormatter(itemObj, columnDef);\r\n      }\r\n\r\n      // does the user want to sanitize the output data (remove HTML tags)?\r\n      if (columnDef.sanitizeDataExport || this._exportOptions.sanitizeDataExport) {\r\n        itemData = sanitizeHtmlToText(itemData);\r\n      }\r\n\r\n      if (format === FileType.csv) {\r\n        // when CSV we also need to escape double quotes twice, so a double quote \" becomes 2x double quotes \"\"\r\n        itemData = itemData.toString().replace(/\"/gi, `\"\"`);\r\n      }\r\n      outputStrings.push(exportQuoteWrapper + itemData + exportQuoteWrapper);\r\n    });\r\n\r\n    return outputStrings.join(delimiter);\r\n  }\r\n\r\n  /**\r\n   * Triggers download file with file format.\r\n   * IE(6-10) are not supported\r\n   * All other browsers will use plain javascript on client side to produce a file download.\r\n   * @param options\r\n   */\r\n  startDownloadFile(options: { filename: string, csvContent: any, format: FileType | string, useUtf8WithBom: boolean }): void {\r\n    // IE(6-10) don't support javascript download and our service doesn't support either so throw an error, we have to make a round trip to the Web Server for exporting\r\n    if (navigator.appName === 'Microsoft Internet Explorer') {\r\n      throw new Error('Microsoft Internet Explorer 6 to 10 do not support javascript export to CSV. Please upgrade your browser.');\r\n    }\r\n\r\n    // set the correct MIME type\r\n    const mimeType = (options.format === FileType.csv) ? 'text/csv' : 'text/plain';\r\n\r\n    // make sure no html entities exist in the data\r\n    const csvContent = htmlEntityDecode(options.csvContent);\r\n\r\n    // dealing with Excel CSV export and UTF-8 is a little tricky.. We will use Option #2 to cover older Excel versions\r\n    // Option #1: we need to make Excel knowing that it's dealing with an UTF-8, A correctly formatted UTF8 file can have a Byte Order Mark as its first three octets\r\n    // reference: http://stackoverflow.com/questions/155097/microsoft-excel-mangles-diacritics-in-csv-files\r\n    // Option#2: use a 3rd party extension to javascript encode into UTF-16\r\n    let outputData: Uint8Array | string;\r\n    if (options.format === FileType.csv) {\r\n      outputData = new TextEncoder('utf-8').encode(csvContent);\r\n    } else {\r\n      outputData = csvContent;\r\n    }\r\n\r\n    // create a Blob object for the download\r\n    const blob = new Blob([options.useUtf8WithBom ? '\\uFEFF' : '', outputData], {\r\n      type: `${mimeType};charset=utf-8;`\r\n    });\r\n\r\n    // when using IE/Edge, then use different download call\r\n    if (typeof navigator.msSaveOrOpenBlob === 'function') {\r\n      navigator.msSaveOrOpenBlob(blob, options.filename);\r\n    } else {\r\n      // this trick will generate a temp <a /> tag\r\n      // the code will then trigger a hidden click for it to start downloading\r\n      const link = document.createElement('a');\r\n      const csvUrl = URL.createObjectURL(blob);\r\n\r\n      link.textContent = 'download';\r\n      link.href = csvUrl;\r\n      link.setAttribute('download', options.filename);\r\n\r\n      // set the visibility to hidden so there is no effect on your web-layout\r\n      link.style.visibility = 'hidden';\r\n\r\n      // this part will append the anchor tag, trigger a click (for download to start) and finally remove the tag once completed\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    }\r\n  }\r\n}\r\n","export class Constants {\r\n  static TEXT_CANCEL = 'Cancel';\r\n  static TEXT_CLEAR_ALL_FILTERS = 'Clear All Filters';\r\n  static TEXT_CLEAR_ALL_SORTING = 'Clear All Sorting';\r\n  static TEXT_COLUMNS = 'Columns';\r\n  static TEXT_COMMANDS = 'Commands';\r\n  static TEXT_EXPORT_IN_CSV_FORMAT = 'Export in CSV format';\r\n  static TEXT_EXPORT_IN_TEXT_FORMAT = 'Export in Text format (Tab delimited)';\r\n  static TEXT_FORCE_FIT_COLUMNS = 'Force fit columns';\r\n  static TEXT_HIDE_COLUMN = 'Hide Column';\r\n  static TEXT_REFRESH_DATASET = 'Refresh Dataset';\r\n  static TEXT_SAVE = 'Save';\r\n  static TEXT_SYNCHRONOUS_RESIZE = 'Synchronous resize';\r\n  static TEXT_SORT_ASCENDING = 'Sort Ascending';\r\n  static TEXT_SORT_DESCENDING = 'Sort Descending';\r\n  static TEXT_TOGGLE_FILTER_ROW = 'Toggle Filter Row';\r\n  static TEXT_TOGGLE_PRE_HEADER_ROW = 'Toggle Pre-Header Row';\r\n  static VALIDATION_EDITOR_VALID_NUMBER = 'Please enter a valid number';\r\n  static VALIDATION_EDITOR_VALID_INTEGER = 'Please enter a valid integer number';\r\n  static VALIDATION_EDITOR_NUMBER_BETWEEN = 'Please enter a valid number between {{minValue}} and {{maxValue}}';\r\n  static VALIDATION_EDITOR_NUMBER_MAX = 'Please enter a valid number that is lower than {{maxValue}}';\r\n  static VALIDATION_EDITOR_NUMBER_MIN = 'Please enter a valid number that is greater than {{minValue}}';\r\n  static VALIDATION_EDITOR_DECIMAL_BETWEEN = 'Please enter a valid number with a maximum of {{maxDecimal}} decimals';\r\n}\r\n","import { Column, GridOption } from '../models';\r\n\r\nexport class SharedService {\r\n  private _allColumns: Column[];\r\n  private _dataView: any;\r\n  private _groupItemMetadataProvider: any;\r\n  private _grid: any;\r\n  private _visibleColumns: Column[];\r\n\r\n  // --\r\n  // public\r\n\r\n  /** Getter for All Columns  in the grid (hidden/visible) */\r\n  get allColumns(): Column[] {\r\n    return this._allColumns;\r\n  }\r\n  /** Setter for All Columns  in the grid (hidden/visible) */\r\n  set allColumns(allColumns: Column[]) {\r\n    this._allColumns = allColumns;\r\n  }\r\n\r\n  /** Getter for the Column Definitions pulled through the Grid Object */\r\n  get columnDefinitions(): Column[] {\r\n    return (this._grid && this._grid.getColumns) ? this._grid.getColumns() : [];\r\n  }\r\n\r\n  /** Getter for SlickGrid DataView object */\r\n  get dataView(): any {\r\n    return this._dataView;\r\n  }\r\n  /** Setter for SlickGrid DataView object */\r\n  set dataView(dataView: any) {\r\n    this._dataView = dataView;\r\n  }\r\n\r\n  /** Getter for SlickGrid Grid object */\r\n  get grid(): any {\r\n    return this._grid;\r\n  }\r\n  /** Setter for SlickGrid Grid object */\r\n  set grid(grid: any) {\r\n    this._grid = grid;\r\n  }\r\n\r\n  /** Getter for the Grid Options pulled through the Grid Object */\r\n  get gridOptions(): GridOption {\r\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\r\n  }\r\n\r\n  /** Setter for the Grid Options pulled through the Grid Object */\r\n  set gridOptions(gridOptions: GridOption) {\r\n    this.gridOptions = gridOptions;\r\n  }\r\n\r\n  /** Getter for the Grid Options */\r\n  get groupItemMetadataProvider(): any {\r\n    return this._groupItemMetadataProvider;\r\n  }\r\n  /** Setter for the Grid Options */\r\n  set groupItemMetadataProvider(groupItemMetadataProvider: any) {\r\n    this._groupItemMetadataProvider = groupItemMetadataProvider;\r\n  }\r\n\r\n  /** Getter for the Visible Columns in the grid */\r\n  get visibleColumns(): Column[] {\r\n    return this._visibleColumns;\r\n  }\r\n  /** Setter for the Visible Columns in the grid */\r\n  set visibleColumns(visibleColumns: Column[]) {\r\n    this._visibleColumns = visibleColumns;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Constants } from '../constants';\r\nimport { ExtensionName } from '../models/index';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\ndeclare function require(name: string);\r\n\r\n@Injectable()\r\nexport class ExtensionUtility {\r\n  constructor(private sharedService: SharedService, private translate: TranslateService) { }\r\n\r\n  /**\r\n   * Remove a column from the grid by it's index in the grid\r\n   * @param array input\r\n   * @param index\r\n   */\r\n  arrayRemoveItemByIndex(array: any[], index: number) {\r\n    return array.filter((el: any, i: number) => {\r\n      return index !== i;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load SlickGrid Extension (Control/Plugin) dynamically (on demand)\r\n   * This will basically only load the extension when user enables the feature\r\n   * @param extensionName\r\n   */\r\n  loadExtensionDynamically(extensionName: ExtensionName): any {\r\n    try {\r\n      switch (extensionName) {\r\n        case ExtensionName.autoTooltip:\r\n          require('slickgrid/plugins/slick.autotooltips');\r\n          break;\r\n        case ExtensionName.cellExternalCopyManager:\r\n          require('slickgrid/plugins/slick.cellexternalcopymanager');\r\n          break;\r\n        case ExtensionName.checkboxSelector:\r\n          require('slickgrid/plugins/slick.checkboxselectcolumn');\r\n          break;\r\n        case ExtensionName.columnPicker:\r\n          require('slickgrid/controls/slick.columnpicker');\r\n          break;\r\n        case ExtensionName.draggableGrouping:\r\n          require('slickgrid/plugins/slick.draggablegrouping.js');\r\n          break;\r\n        case ExtensionName.gridMenu:\r\n          require('slickgrid/controls/slick.gridmenu');\r\n          break;\r\n        case ExtensionName.groupItemMetaProvider:\r\n          require('slickgrid/slick.groupitemmetadataprovider');\r\n          break;\r\n        case ExtensionName.headerButton:\r\n          require('slickgrid/plugins/slick.headerbuttons');\r\n          break;\r\n        case ExtensionName.headerMenu:\r\n          require('slickgrid/plugins/slick.headermenu');\r\n          break;\r\n        case ExtensionName.rowSelection:\r\n          require('slickgrid/plugins/slick.rowselectionmodel');\r\n          break;\r\n        case ExtensionName.rowMoveManager:\r\n          require('slickgrid/plugins/slick.rowmovemanager.js');\r\n          break;\r\n      }\r\n    } catch (e) {\r\n      // do nothing, we fall here when using Aurelia-CLI and RequireJS\r\n      // if you do use RequireJS then you need to make sure to include all necessary extensions in your `aurelia.json`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * From a Grid Menu object property name, we will return the correct title output string following this order\r\n   * 1- if user provided a title, use it as the output title\r\n   * 2- else if user provided a title key, use it to translate the output title\r\n   * 3- else if nothing is provided use\r\n   */\r\n  getPickerTitleOutputString(propName: string, pickerName: 'gridMenu' | 'columnPicker') {\r\n    let output = '';\r\n    const picker = this.sharedService.gridOptions && this.sharedService.gridOptions[pickerName] || {};\r\n    const enableTranslate = this.sharedService.gridOptions && this.sharedService.gridOptions.enableTranslate || false;\r\n\r\n    const title = picker && picker[propName];\r\n    const titleKey = picker && picker[`${propName}Key`];\r\n\r\n    if (titleKey) {\r\n      output = this.translate.instant(titleKey || ' ');\r\n    } else {\r\n      switch (propName) {\r\n        case 'customTitle':\r\n          output = title || (enableTranslate ? this.translate.instant('COMMANDS') : Constants.TEXT_COMMANDS);\r\n          break;\r\n        case 'columnTitle':\r\n          output = title || (enableTranslate ? this.translate.instant('COLUMNS') : Constants.TEXT_COLUMNS);\r\n          break;\r\n        case 'forceFitTitle':\r\n          output = title || (enableTranslate ? this.translate.instant('FORCE_FIT_COLUMNS') : Constants.TEXT_FORCE_FIT_COLUMNS);\r\n          break;\r\n        case 'syncResizeTitle':\r\n          output = title || (enableTranslate ? this.translate.instant('SYNCHRONOUS_RESIZE') : Constants.TEXT_SYNCHRONOUS_RESIZE);\r\n          break;\r\n        default:\r\n          output = title;\r\n          break;\r\n      }\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /**\r\n   * Sort items in an array by a property name\r\n   * @params items array\r\n   * @param property name to sort with\r\n   * @return sorted array\r\n   */\r\n  sortItems(items: any[], propertyName: string) {\r\n    // sort the custom items by their position in the list\r\n    items.sort((itemA: any, itemB: any) => {\r\n      if (itemA && itemB && itemA.hasOwnProperty(propertyName) && itemB.hasOwnProperty(propertyName)) {\r\n        return itemA[propertyName] - itemB[propertyName];\r\n      }\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  /** Translate the an array of items from an input key and assign to the output key */\r\n  translateItems(items: any[], inputKey: string, outputKey: string) {\r\n    for (const item of items) {\r\n      if (item[inputKey]) {\r\n        item[outputKey] = this.translate.instant(item[inputKey]);\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Extension, ExtensionName } from '../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class AutoTooltipExtension implements Extension {\r\n  private _extension: any;\r\n\r\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) {}\r\n\r\n  dispose() {\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  register(): any {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.autoTooltip);\r\n       this._extension = new Slick.AutoTooltips(this.sharedService.gridOptions.autoTooltipOptions || {});\r\n      this.sharedService.grid.registerPlugin(this._extension);\r\n       return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Column, Extension, ExtensionName } from '../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { sanitizeHtmlToText } from '../services/utilities';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\ndeclare var $: any;\r\n\r\n@Injectable()\r\nexport class CellExternalCopyManagerExtension implements Extension {\r\n  private _extension: any;\r\n  private _undoRedoBuffer: any;\r\n\r\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) { }\r\n\r\n  dispose() {\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  register(): any {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.cellExternalCopyManager);\r\n      this.createUndoRedoBuffer();\r\n      this.hookUndoShortcutKey();\r\n      let newRowIds = 0;\r\n      const pluginOptions = {\r\n        clipboardCommandHandler: (editCommand: any) => {\r\n          this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer, editCommand);\r\n        },\r\n        dataItemColumnValueExtractor: (item: any, columnDef: Column) => {\r\n          // when grid or cell is not editable, we will possibly evaluate the Formatter if it was passed\r\n          // to decide if we evaluate the Formatter, we will use the same flag from Export which is \"exportWithFormatter\"\r\n          if (!this.sharedService.gridOptions.editable || !columnDef.editor) {\r\n            const isEvaluatingFormatter = (columnDef.exportWithFormatter !== undefined) ? columnDef.exportWithFormatter : (this.sharedService.gridOptions.exportOptions && this.sharedService.gridOptions.exportOptions.exportWithFormatter);\r\n            if (columnDef.formatter && isEvaluatingFormatter) {\r\n              const formattedOutput = columnDef.formatter(0, 0, item[columnDef.field], columnDef, item, this.sharedService.grid);\r\n              if (columnDef.sanitizeDataExport || (this.sharedService.gridOptions.exportOptions && this.sharedService.gridOptions.exportOptions.sanitizeDataExport)) {\r\n                return sanitizeHtmlToText(formattedOutput);\r\n              }\r\n              return formattedOutput;\r\n            }\r\n          }\r\n          // else use the default \"dataItemColumnValueExtractor\" from the plugin itself\r\n          // we can do that by setting back the getter with null\r\n          return null;\r\n        },\r\n        readOnlyMode: false,\r\n        includeHeaderWhenCopying: false,\r\n        newRowCreator: (count: number) => {\r\n          for (let i = 0; i < count; i++) {\r\n            const item = {\r\n              id: 'newRow_' + newRowIds++\r\n            };\r\n            this.sharedService.grid.getData().addItem(item);\r\n          }\r\n        }\r\n      };\r\n      this.sharedService.grid.setSelectionModel(new Slick.CellSelectionModel());\r\n      this._extension = new Slick.CellExternalCopyManager(pluginOptions);\r\n      this.sharedService.grid.registerPlugin(this._extension);\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /** Create an undo redo buffer used by the Excel like copy */\r\n  private createUndoRedoBuffer() {\r\n    const commandQueue: any[] = [];\r\n    let commandCtr = 0;\r\n    this._undoRedoBuffer = {\r\n      queueAndExecuteCommand: (editCommand: any) => {\r\n        commandQueue[commandCtr] = editCommand;\r\n        commandCtr++;\r\n        editCommand.execute();\r\n      },\r\n      undo: () => {\r\n        if (commandCtr === 0) { return; }\r\n        commandCtr--;\r\n        const command = commandQueue[commandCtr];\r\n        if (command && Slick.GlobalEditorLock.cancelCurrentEdit()) {\r\n          command.undo();\r\n        }\r\n      },\r\n      redo: () => {\r\n        if (commandCtr >= commandQueue.length) { return; }\r\n        const command = commandQueue[commandCtr];\r\n        commandCtr++;\r\n        if (command && Slick.GlobalEditorLock.cancelCurrentEdit()) {\r\n          command.execute();\r\n        }\r\n      }\r\n    };\r\n  }\r\n\r\n  /** Attach an undo shortcut key hook that will redo/undo the copy buffer */\r\n  private hookUndoShortcutKey() {\r\n    // undo shortcut\r\n    $(document).keydown((e: any) => {\r\n      if (e.which === 90 && (e.ctrlKey || e.metaKey)) {    // CTRL + (shift) + Z\r\n        if (e.shiftKey) {\r\n          this._undoRedoBuffer.redo();\r\n        } else {\r\n          this._undoRedoBuffer.undo();\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Column, Extension, ExtensionName, GridOption } from '../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class CheckboxSelectorExtension implements Extension {\r\n  private _extension: any;\r\n\r\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) { }\r\n\r\n  dispose() {\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Attach/Create different plugins before the Grid creation.\r\n   * For example the multi-select have to be added to the column definition before the grid is created to work properly\r\n   */\r\n  create(columnDefinitions: Column[], gridOptions: GridOption) {\r\n    if (columnDefinitions && gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.checkboxSelector);\r\n       if (!this._extension) {\r\n        this._extension = new Slick.CheckboxSelectColumn(gridOptions.checkboxSelector || {});\r\n      }\r\n      const selectionColumn: Column = this._extension.getColumnDefinition();\r\n      selectionColumn.excludeFromExport = true;\r\n      selectionColumn.excludeFromQuery = true;\r\n      selectionColumn.excludeFromHeaderMenu = true;\r\n      columnDefinitions.unshift(selectionColumn);\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  register(rowSelectionPlugin?: any) {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // when enabling the Checkbox Selector Plugin, we need to also watch onClick events to perform certain actions\r\n      // the selector column has to be created BEFORE the grid (else it behaves oddly), but we can only watch grid events AFTER the grid is created\r\n      this.sharedService.grid.registerPlugin(this._extension);\r\n       // this also requires the Row Selection Model to be registered as well\r\n      if (!rowSelectionPlugin || !this.sharedService.grid.getSelectionModel()) {\r\n        this.extensionUtility.loadExtensionDynamically(ExtensionName.rowSelection);\r\n        rowSelectionPlugin = new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions || {});\r\n        this.sharedService.grid.setSelectionModel(rowSelectionPlugin);\r\n      }\r\n       // user might want to pre-select some rows\r\n      // the setTimeout is because of timing issue with styling (row selection happen but rows aren't highlighted properly)\r\n      if (this.sharedService.gridOptions.preselectedRows && rowSelectionPlugin && this.sharedService.grid.getSelectionModel()) {\r\n        setTimeout(() => this._extension.selectRows(this.sharedService.gridOptions.preselectedRows), 0);\r\n      }\r\n       return rowSelectionPlugin;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CellArgs, Extension, ExtensionName } from '../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class ColumnPickerExtension implements Extension {\r\n  private _eventHandler: any = new Slick.EventHandler();\r\n  private _extension: any;\r\n\r\n  constructor(\r\n    private extensionUtility: ExtensionUtility,\r\n    private sharedService: SharedService,\r\n  ) {}\r\n\r\n  dispose() {\r\n    // unsubscribe all SlickGrid events\r\n    this._eventHandler.unsubscribeAll();\r\n     if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  register(): any {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.columnPicker);\r\n       // localization support for the picker\r\n      const columnTitle = this.extensionUtility.getPickerTitleOutputString('columnTitle', 'columnPicker');\r\n      const forceFitTitle = this.extensionUtility.getPickerTitleOutputString('forceFitTitle', 'columnPicker');\r\n      const syncResizeTitle = this.extensionUtility.getPickerTitleOutputString('syncResizeTitle', 'columnPicker');\r\n       this.sharedService.gridOptions.columnPicker = this.sharedService.gridOptions.columnPicker || {};\r\n      this.sharedService.gridOptions.columnPicker.columnTitle = this.sharedService.gridOptions.columnPicker.columnTitle || columnTitle;\r\n      this.sharedService.gridOptions.columnPicker.forceFitTitle = this.sharedService.gridOptions.columnPicker.forceFitTitle || forceFitTitle;\r\n      this.sharedService.gridOptions.columnPicker.syncResizeTitle = this.sharedService.gridOptions.columnPicker.syncResizeTitle || syncResizeTitle;\r\n       this._extension = new Slick.Controls.ColumnPicker(this.sharedService.columnDefinitions, this.sharedService.grid, this.sharedService.gridOptions);\r\n      if (this.sharedService.grid && this.sharedService.gridOptions.enableColumnPicker) {\r\n        this._eventHandler.subscribe(this._extension.onColumnsChanged, (e: any, args: CellArgs) => {\r\n          if (this.sharedService.gridOptions.columnPicker && typeof this.sharedService.gridOptions.columnPicker.onColumnsChanged === 'function') {\r\n            this.sharedService.gridOptions.columnPicker.onColumnsChanged(e, args);\r\n          }\r\n        });\r\n      }\r\n       return this._extension;\r\n    }\r\n  }\r\n\r\n  /** Translate the Column Picker and it's last 2 checkboxes */\r\n  translateColumnPicker() {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // update the properties by pointers, that is the only way to get Grid Menu Control to see the new values\r\n      if (this.sharedService.gridOptions.columnPicker) {\r\n        this.emptyColumnPickerTitles();\r\n         this.sharedService.gridOptions.columnPicker.columnTitle = this.extensionUtility.getPickerTitleOutputString('columnTitle', 'columnPicker');\r\n        this.sharedService.gridOptions.columnPicker.forceFitTitle = this.extensionUtility.getPickerTitleOutputString('forceFitTitle', 'columnPicker');\r\n        this.sharedService.gridOptions.columnPicker.syncResizeTitle = this.extensionUtility.getPickerTitleOutputString('syncResizeTitle', 'columnPicker');\r\n      }\r\n       // translate all columns (including non-visible)\r\n      this.extensionUtility.translateItems(this.sharedService.allColumns, 'headerKey', 'name');\r\n       // re-initialize the Column Picker, that will recreate all the list\r\n      // doing an \"init()\" won't drop any existing command attached\r\n      if (this._extension.init) {\r\n        this._extension.init(this.sharedService.grid);\r\n      }\r\n    }\r\n  }\r\n\r\n  private emptyColumnPickerTitles() {\r\n    if (this.sharedService && this.sharedService.gridOptions && this.sharedService.gridOptions.columnPicker) {\r\n      this.sharedService.gridOptions.columnPicker.columnTitle = '';\r\n      this.sharedService.gridOptions.columnPicker.forceFitTitle = '';\r\n      this.sharedService.gridOptions.columnPicker.syncResizeTitle = '';\r\n    }\r\n  }\r\n}\r\n","\nimport { SharedService } from '../services/shared.service';\nimport { Extension, ExtensionName, GridOption, Grouping } from '../models/index';\nimport { ExtensionUtility } from './extensionUtility';\nimport { Injectable } from '@angular/core';\n\n// using external non-typed js libraries\ndeclare var Slick: any;\n\n@Injectable()\nexport class DraggableGroupingExtension implements Extension {\n  private _eventHandler: any = new Slick.EventHandler();\n  private _extension: any;\n\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) { }\n\n  dispose() {\n    // unsubscribe all SlickGrid events\n    this._eventHandler.unsubscribeAll();\n\n    if (this._extension && this._extension.destroy) {\n      this._extension.destroy();\n    }\n  }\n\n  /**\n   * Attach/Create different plugins before the Grid creation.\n   * For example the multi-select have to be added to the column definition before the grid is created to work properly\n   */\n  create(gridOptions: GridOption) {\n    // dynamically import the SlickGrid plugin with requireJS\n    this.extensionUtility.loadExtensionDynamically(ExtensionName.draggableGrouping);\n\n    if (!this._extension && gridOptions) {\n      this._extension = new Slick.DraggableGrouping(gridOptions.draggableGrouping || {});\n    }\n    return this._extension;\n  }\n\n  register(): any {\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\n      this.sharedService.grid.registerPlugin(this._extension);\n\n      // Events\n      if (this.sharedService.grid && this.sharedService.gridOptions.draggableGrouping) {\n        if (this.sharedService.gridOptions.draggableGrouping.onExtensionRegistered) {\n          this.sharedService.gridOptions.draggableGrouping.onExtensionRegistered(this._extension);\n        }\n        this._eventHandler.subscribe(this._extension.onGroupChanged, (e: any, args: { caller?: string; groupColumns: Grouping[] }) => {\n          if (this.sharedService.gridOptions.draggableGrouping && typeof this.sharedService.gridOptions.draggableGrouping.onGroupChanged === 'function') {\n            this.sharedService.gridOptions.draggableGrouping.onGroupChanged(e, args);\n          }\n        });\n      }\n\n      return this._extension;\n    }\n    return null;\n  }\n}\n","import { FilterCondition, FilterConditionOption } from './../models/index';\r\n\r\nfunction parseBoolean(str: number | string) {\r\n  return /(true|1)/i.test(str + '');\r\n}\r\n\r\nexport const booleanFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  const searchTerm = Array.isArray(options.searchTerms) && options.searchTerms[0] || '';\r\n  return parseBoolean(options.cellValue) === parseBoolean(searchTerm);\r\n};\r\n","export const testFilterCondition = (operator: string, value1: any, value2: any): boolean => {\r\n  switch (operator) {\r\n    case '<':\r\n    case 'LT': return (value1 < value2);\r\n    case '<=':\r\n    case 'LE': return (value1 <= value2);\r\n    case '>':\r\n    case 'GT': return (value1 > value2);\r\n    case '>=':\r\n    case 'GE': return (value1 >= value2);\r\n    case '!=':\r\n    case '<>':\r\n    case 'NE': return (value1 !== value2);\r\n    case '=':\r\n    case '==':\r\n    case 'EQ': return (value1 === value2);\r\n    case 'IN': return ((value2 && value2.includes) ? (value2.includes(value1)) : false);\r\n    case 'NIN':\r\n    case 'NOT_IN':\r\n      return ((value2 && value2.includes) ? (!value2.includes(value1)) : false);\r\n    case 'IN_CONTAINS':\r\n      if (value2 && Array.isArray(value2) && value2.findIndex) {\r\n        return ((value2.findIndex((val) => value1.indexOf(val) > -1)) > -1);\r\n      }\r\n      return false;\r\n    case 'NIN_CONTAINS':\r\n    case 'NOT_IN_CONTAINS':\r\n    if (value2 && Array.isArray(value2) && value2.findIndex) {\r\n      return !((value2.findIndex((val) => value1.indexOf(val) > -1)) > -1);\r\n    }\r\n    return false;\r\n}\r\nreturn true;\r\n};\r\n","import { FieldType, FilterCondition, FilterConditionOption } from '../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport { testFilterCondition } from './filterUtilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\n\r\nexport const dateFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  const searchTerm = Array.isArray(options.searchTerms) && options.searchTerms[0] || '';\r\n  const filterSearchType = options.filterSearchType || FieldType.dateIso;\r\n  const searchDateFormat = mapMomentDateFormatWithFieldType(filterSearchType);\r\n  if (searchTerm === null || searchTerm === '' || !moment(options.cellValue, moment.ISO_8601).isValid() || !moment(searchTerm, searchDateFormat, true).isValid()) {\r\n    return false;\r\n  }\r\n  const dateCell = moment(options.cellValue);\r\n  const dateSearch = moment(searchTerm);\r\n\r\n  // run the filter condition with date in Unix Timestamp format\r\n  return testFilterCondition(options.operator || '==', parseInt(dateCell.format('X'), 10), parseInt(dateSearch.format('X'), 10));\r\n};\r\n","import { FieldType, FilterCondition, FilterConditionOption } from '../models/index';\r\nimport { testFilterCondition } from './filterUtilities';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateIso);\r\n\r\nexport const dateIsoFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  const searchTerm = Array.isArray(options.searchTerms) && options.searchTerms[0] || '';\r\n  if (searchTerm === null || searchTerm === '' || !moment(options.cellValue, FORMAT, true).isValid() || !moment(searchTerm, FORMAT, true).isValid()) {\r\n    return false;\r\n  }\r\n  const dateCell = moment(options.cellValue, FORMAT, true);\r\n  const dateSearch = moment(searchTerm, FORMAT, true);\r\n\r\n  // run the filter condition with date in Unix Timestamp format\r\n  return testFilterCondition(options.operator || '==', parseInt(dateCell.format('X'), 10), parseInt(dateSearch.format('X'), 10));\r\n};\r\n","import { FieldType, FilterCondition, FilterConditionOption } from '../models/index';\r\nimport { testFilterCondition } from './filterUtilities';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateUs);\r\n\r\nexport const dateUsFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  const searchTerm = Array.isArray(options.searchTerms) && options.searchTerms[0] || '';\r\n  if (searchTerm === null || searchTerm === '' || !moment(options.cellValue, FORMAT, true).isValid() || !moment(searchTerm, FORMAT, true).isValid()) {\r\n    return false;\r\n  }\r\n  const dateCell = moment(options.cellValue, FORMAT, true);\r\n  const dateSearch = moment(searchTerm, FORMAT, true);\r\n\r\n  // run the filter condition with date in Unix Timestamp format\r\n  return testFilterCondition(options.operator || '==', parseInt(dateCell.format('X'), 10), parseInt(dateSearch.format('X'), 10));\r\n};\r\n","import { FieldType, FilterCondition, FilterConditionOption } from '../models/index';\r\nimport { testFilterCondition } from './filterUtilities';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateUsShort);\r\n\r\nexport const dateUsShortFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  const searchTerm = Array.isArray(options.searchTerms) && options.searchTerms[0] || '';\r\n  if (searchTerm === null || searchTerm === '' || !moment(options.cellValue, FORMAT, true).isValid() || !moment(searchTerm, FORMAT, true).isValid()) {\r\n    return false;\r\n  }\r\n  const dateCell = moment(options.cellValue, FORMAT, true);\r\n  const dateSearch = moment(searchTerm, FORMAT, true);\r\n\r\n  // run the filter condition with date in Unix Timestamp format\r\n  return testFilterCondition(options.operator || '==', parseInt(dateCell.format('X'), 10), parseInt(dateSearch.format('X'), 10));\r\n};\r\n","import { FilterCondition, FilterConditionOption } from '../models/index';\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\nimport { testFilterCondition } from './filterUtilities';\nimport * as moment_ from 'moment-mini';\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\n\nexport const dateUtcFilterCondition: FilterCondition = (options: FilterConditionOption) => {\n  const searchTerm = Array.isArray(options.searchTerms) && options.searchTerms[0] || '';\n  const searchDateFormat = mapMomentDateFormatWithFieldType(options.filterSearchType || options.fieldType);\n  if (!moment(options.cellValue, moment.ISO_8601).isValid() || !moment(searchTerm, searchDateFormat, true).isValid()) {\n    return false;\n  }\n  const dateCell = moment(options.cellValue, moment.ISO_8601, true);\n  const dateSearch = moment(searchTerm, searchDateFormat, true);\n\n  // run the filter condition with date in Unix Timestamp format\n  return testFilterCondition(options.operator || '==', parseInt(dateCell.format('X'), 10), parseInt(dateSearch.format('X'), 10));\n};\n","import { FilterCondition, FilterConditionOption } from '../models/index';\r\nimport { testFilterCondition } from './filterUtilities';\r\n\r\nexport const collectionSearchFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  // multiple-select will always return text, so we should make our cell values text as well\r\n  const cellValue = options.cellValue + '';\r\n\r\n  return testFilterCondition(options.operator || 'IN', cellValue, options.searchTerms || []);\r\n};\r\n","import { FilterCondition, FilterConditionOption } from '../models/index';\r\nimport { testFilterCondition } from './filterUtilities';\r\n\r\nexport const numberFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  const cellValue = parseFloat(options.cellValue);\r\n  let searchTerm = (Array.isArray(options.searchTerms) && options.searchTerms[0]) || 0;\r\n  if (typeof searchTerm === 'string') {\r\n    searchTerm = parseFloat(searchTerm);\r\n  }\r\n\r\n  if (!searchTerm && (!options.operator || options.operator === '')) {\r\n    return true;\r\n  }\r\n  return testFilterCondition(options.operator || '==', cellValue, searchTerm);\r\n};\r\n","import { FilterCondition, FilterConditionOption, OperatorType } from '../models/index';\r\nimport { testFilterCondition } from './filterUtilities';\r\n\r\nexport const stringFilterCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  // make sure the cell value is a string by casting it when possible\r\n  options.cellValue = (options.cellValue === undefined || options.cellValue === null) ? '' : options.cellValue.toString();\r\n\r\n  // make both the cell value and search value lower for case insensitive comparison\r\n  const cellValue = options.cellValue.toLowerCase();\r\n  let searchTerm = (Array.isArray(options.searchTerms) && options.searchTerms[0]) || '';\r\n  if (typeof searchTerm === 'string') {\r\n    searchTerm = searchTerm.toLowerCase();\r\n  }\r\n\r\n  if (options.operator === '*' || options.operator === OperatorType.endsWith) {\r\n    return cellValue.endsWith(searchTerm);\r\n  } else if ((options.operator === '' && options.cellValueLastChar === '*') || options.operator === OperatorType.startsWith) {\r\n    return cellValue.startsWith(searchTerm);\r\n  } else if (options.operator === '') {\r\n    return cellValue.includes(searchTerm);\r\n  }\r\n  return testFilterCondition(options.operator || '==', cellValue, searchTerm);\r\n};\r\n","import { booleanFilterCondition } from './booleanFilterCondition';\r\nimport { dateFilterCondition } from './dateFilterCondition';\r\nimport { dateIsoFilterCondition } from './dateIsoFilterCondition';\r\nimport { dateUsShortFilterCondition } from './dateUsShortFilterCondition';\r\nimport { dateUsFilterCondition } from './dateUsFilterCondition';\r\nimport { dateUtcFilterCondition } from './dateUtcFilterCondition';\r\nimport { FilterConditionOption } from './../models/filterConditionOption.interface';\r\nimport { FilterCondition } from '../models/filterCondition.interface';\r\nimport { collectionSearchFilterCondition } from './collectionSearchFilterCondition';\r\nimport { numberFilterCondition } from './numberFilterCondition';\r\nimport { stringFilterCondition } from './stringFilterCondition';\r\nimport { FieldType } from '../models/index';\r\n\r\nexport const executeMappedCondition: FilterCondition = (options: FilterConditionOption) => {\r\n  // when using a multi-select ('IN' operator) we will not use the field type but instead go directly with a collection search\r\n  const operator = options.operator && options.operator.toUpperCase();\r\n  if (options && options.operator && (operator === 'IN' || operator === 'NIN' || operator === 'IN_CONTAINS' || operator === 'NIN_CONTAINS')) {\r\n    return collectionSearchFilterCondition(options);\r\n  }\r\n\r\n  // execute the mapped type, or default to String condition check\r\n  switch (options.fieldType) {\r\n    case FieldType.boolean:\r\n      return booleanFilterCondition(options);\r\n    case FieldType.date:\r\n      return dateFilterCondition(options);\r\n    case FieldType.dateUtc:\r\n      return dateUtcFilterCondition(options);\r\n    case FieldType.dateIso:\r\n      return dateIsoFilterCondition(options);\r\n    case FieldType.dateUs:\r\n    case FieldType.dateTimeUs:\r\n      return dateUsFilterCondition(options);\r\n    case FieldType.dateUsShort:\r\n    case FieldType.dateTimeUsShort:\r\n      return dateUsShortFilterCondition(options);\r\n    case FieldType.number:\r\n      return numberFilterCondition(options);\r\n    case FieldType.string:\r\n    default:\r\n      return stringFilterCondition(options);\r\n  }\r\n};\r\n","import { FilterConditionOption } from './../models/filterConditionOption.interface';\r\nimport { booleanFilterCondition } from './booleanFilterCondition';\r\nimport { dateFilterCondition } from './dateFilterCondition';\r\nimport { dateIsoFilterCondition } from './dateIsoFilterCondition';\r\nimport { dateUsFilterCondition } from './dateUsFilterCondition';\r\nimport { dateUsShortFilterCondition } from './dateUsShortFilterCondition';\r\nimport { dateUtcFilterCondition } from './dateUtcFilterCondition';\r\nimport { executeMappedCondition } from './executeMappedCondition';\r\nimport { collectionSearchFilterCondition } from './collectionSearchFilterCondition';\r\nimport { numberFilterCondition } from './numberFilterCondition';\r\nimport { stringFilterCondition } from './stringFilterCondition';\r\nimport { testFilterCondition } from './filterUtilities';\r\n\r\nexport const FilterConditions = {\r\n  executeMappedCondition,\r\n  booleanFilter: booleanFilterCondition,\r\n  collectionSearchFilter: collectionSearchFilterCondition,\r\n  dateFilter: dateFilterCondition,\r\n  dateIsoFilter: dateIsoFilterCondition,\r\n  dateUtcFilter: dateUtcFilterCondition,\r\n  dateUsFilter: dateUsFilterCondition,\r\n  dateUsShortFilter: dateUsShortFilterCondition,\r\n  numberFilter: numberFilterCondition,\r\n  stringFilter: stringFilterCondition,\r\n  testFilter: testFilterCondition\r\n};\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { mapFlatpickrDateFormatWithFieldType } from '../services/utilities';\r\nimport { Column, Filter, FilterArguments, FilterCallback, FieldType, GridOption, OperatorString, OperatorType, SearchTerm } from './../models/index';\r\n\r\n// importing Flatpickr works better with a 'require'\r\ndeclare function require(name: string): any;\r\nrequire('flatpickr');\r\n\r\n// using external non-typed js libraries\r\ndeclare var $: any;\r\n\r\nexport class CompoundDateFilter implements Filter {\r\n  private _clearFilterTriggered = false;\r\n  private $filterElm: any;\r\n  private $filterInputElm: any;\r\n  private $selectOperatorElm: any;\r\n  private _currentValue: string;\r\n  private _operator: OperatorType | OperatorString;\r\n  flatInstance: any;\r\n  grid: any;\r\n  searchTerms: SearchTerm[];\r\n  columnDef: Column;\r\n  callback: FilterCallback;\r\n\r\n  constructor(private translate: TranslateService) { }\r\n\r\n  /** Getter for the Grid Options pulled through the Grid Object */\r\n  private get gridOptions(): GridOption {\r\n    return (this.grid && this.grid.getOptions) ? this.grid.getOptions() : {};\r\n  }\r\n\r\n  set operator(op: OperatorType | OperatorString) {\r\n    this._operator = op;\r\n  }\r\n  get operator(): OperatorType | OperatorString {\r\n    return this._operator || OperatorType.empty;\r\n  }\r\n\r\n  /**\r\n   * Initialize the Filter\r\n   */\r\n  init(args: FilterArguments) {\r\n    if (args) {\r\n      this.grid = args.grid;\r\n      this.callback = args.callback;\r\n      this.columnDef = args.columnDef;\r\n      this.operator = args.operator || '';\r\n      this.searchTerms = args.searchTerms || [];\r\n\r\n      // date input can only have 1 search term, so we will use the 1st array index if it exist\r\n      const searchTerm = (Array.isArray(this.searchTerms) && this.searchTerms[0]) || '';\r\n\r\n      // step 1, create the DOM Element of the filter which contain the compound Operator+Input\r\n      // and initialize it if searchTerm is filled\r\n      this.$filterElm = this.createDomElement(searchTerm);\r\n\r\n      // step 3, subscribe to the keyup event and run the callback when that happens\r\n      // also add/remove \"filled\" class for styling purposes\r\n      this.$filterInputElm.keyup((e: any) => {\r\n        this.onTriggerEvent(e);\r\n      });\r\n      this.$selectOperatorElm.change((e: any) => {\r\n        this.onTriggerEvent(e);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear the filter value\r\n   */\r\n  clear() {\r\n    if (this.flatInstance && this.$selectOperatorElm) {\r\n      this._clearFilterTriggered = true;\r\n      this.searchTerms = [];\r\n      this.$selectOperatorElm.val(0);\r\n      this.flatInstance.clear();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * destroy the filter\r\n   */\r\n  destroy() {\r\n    if (this.$filterElm) {\r\n      this.$filterElm.off('keyup').remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set value(s) on the DOM element\r\n   */\r\n  setValues(values: SearchTerm[]) {\r\n    if (values && Array.isArray(values)) {\r\n      this.flatInstance.setDate(values[0]);\r\n    }\r\n  }\r\n\r\n  //\r\n  // private functions\r\n  // ------------------\r\n  private buildDatePickerInput(searchTerm?: SearchTerm) {\r\n    const inputFormat = mapFlatpickrDateFormatWithFieldType(this.columnDef.type || FieldType.dateIso);\r\n    const outputFormat = mapFlatpickrDateFormatWithFieldType(this.columnDef.outputType || this.columnDef.type || FieldType.dateUtc);\r\n    let currentLocale = this.translate.currentLang || 'en';\r\n    if (currentLocale.length > 2) {\r\n      currentLocale = currentLocale.substring(0, 2);\r\n    }\r\n\r\n    const pickerOptions: any = {\r\n      defaultDate: searchTerm || '',\r\n      altInput: true,\r\n      altFormat: outputFormat,\r\n      dateFormat: inputFormat,\r\n      wrap: true,\r\n      closeOnSelect: true,\r\n      locale: (currentLocale !== 'en') ? this.loadFlatpickrLocale(currentLocale) : 'en',\r\n      onChange: (selectedDates: any[] | any, dateStr: string, instance: any) => {\r\n        this._currentValue = dateStr;\r\n\r\n        // when using the time picker, we can simulate a keyup event to avoid multiple backend request\r\n        // since backend request are only executed after user start typing, changing the time should be treated the same way\r\n        if (pickerOptions.enableTime) {\r\n          this.onTriggerEvent(new CustomEvent('keyup'));\r\n        } else {\r\n          this.onTriggerEvent(undefined);\r\n        }\r\n      }\r\n    };\r\n\r\n    // add the time picker when format is UTC (Z) or has the 'h' (meaning hours)\r\n    if (outputFormat && (outputFormat === 'Z' || outputFormat.toLowerCase().includes('h'))) {\r\n      pickerOptions.enableTime = true;\r\n    }\r\n\r\n    const placeholder = (this.gridOptions) ? (this.gridOptions.defaultFilterPlaceholder || '') : '';\r\n    const $filterInputElm: any = $(`<div class=\"flatpickr\"><input type=\"text\" class=\"form-control\" data-input placeholder=\"${placeholder}\"></div>`);\r\n    this.flatInstance = ($filterInputElm[0] && typeof $filterInputElm[0].flatpickr === 'function') ? $filterInputElm[0].flatpickr(pickerOptions) : null;\r\n    return $filterInputElm;\r\n  }\r\n\r\n  private buildSelectOperatorHtmlString() {\r\n    const optionValues = this.getOptionValues();\r\n    let optionValueString = '';\r\n    optionValues.forEach((option) => {\r\n      optionValueString += `<option value=\"${option.operator}\" title=\"${option.description}\">${option.operator}</option>`;\r\n    });\r\n\r\n    return `<select class=\"form-control\">${optionValueString}</select>`;\r\n  }\r\n\r\n  private getOptionValues(): {operator: OperatorString, description: string }[] {\r\n    return [\r\n      { operator: '' as OperatorString, description: '' },\r\n      { operator: '=' as OperatorString, description: '' },\r\n      { operator: '<' as OperatorString, description: '' },\r\n      { operator: '<=' as OperatorString, description: '' },\r\n      { operator: '>' as OperatorString, description: '' },\r\n      { operator: '>=' as OperatorString, description: '' },\r\n      { operator: '<>' as OperatorString, description: '' }\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Create the DOM element\r\n   */\r\n  private createDomElement(searchTerm?: SearchTerm) {\r\n    const fieldId = this.columnDef && this.columnDef.id;\r\n    const $headerElm = this.grid.getHeaderRowColumn(fieldId);\r\n    $($headerElm).empty();\r\n\r\n    // create the DOM Select dropdown for the Operator\r\n    this.$selectOperatorElm = $(this.buildSelectOperatorHtmlString());\r\n    this.$filterInputElm = this.buildDatePickerInput(searchTerm);\r\n    const $filterContainerElm = $(`<div class=\"form-group search-filter filter-${fieldId}\"></div>`);\r\n    const $containerInputGroup = $(`<div class=\"input-group flatpickr\"></div>`);\r\n    const $operatorInputGroupAddon = $(`<div class=\"input-group-addon input-group-prepend operator\"></div>`);\r\n\r\n    /* the DOM element final structure will be\r\n      <div class=\"input-group\">\r\n        <div class=\"input-group-addon input-group-prepend operator\">\r\n          <select class=\"form-control\"></select>\r\n        </div>\r\n        <div class=flatpickr>\r\n          <input type=\"text\" class=\"form-control\" data-input>\r\n        </div>\r\n      </div>\r\n    */\r\n    $operatorInputGroupAddon.append(this.$selectOperatorElm);\r\n    $containerInputGroup.append($operatorInputGroupAddon);\r\n    $containerInputGroup.append(this.$filterInputElm);\r\n\r\n    // create the DOM element & add an ID and filter class\r\n    $filterContainerElm.append($containerInputGroup);\r\n    $filterContainerElm.attr('id', `filter-${fieldId}`);\r\n    this.$filterInputElm.data('columnId', fieldId);\r\n\r\n    if (this.operator) {\r\n      this.$selectOperatorElm.val(this.operator);\r\n    }\r\n\r\n    // if there's a search term, we will add the \"filled\" class for styling purposes\r\n    if (searchTerm) {\r\n      $filterContainerElm.addClass('filled');\r\n      this._currentValue = searchTerm as string;\r\n    }\r\n\r\n    // append the new DOM element to the header row\r\n    if ($filterContainerElm && typeof $filterContainerElm.appendTo === 'function') {\r\n      $filterContainerElm.appendTo($headerElm);\r\n    }\r\n\r\n    return $filterContainerElm;\r\n  }\r\n\r\n  private loadFlatpickrLocale(locale: string) {\r\n    // change locale if needed, Flatpickr reference: https://chmln.github.io/flatpickr/localization/\r\n    if (this.gridOptions && this.gridOptions.params && this.gridOptions.params.flapickrLocale) {\r\n      return this.gridOptions.params.flapickrLocale;\r\n    } else if (locale !== 'en') {\r\n      const localeDefault: any = require(`flatpickr/dist/l10n/${locale}.js`).default;\r\n      return (localeDefault && localeDefault[locale]) ? localeDefault[locale] : 'en';\r\n    }\r\n    return 'en';\r\n  }\r\n\r\n  private onTriggerEvent(e: Event | undefined) {\r\n    if (this._clearFilterTriggered) {\r\n      this.callback(e, { columnDef: this.columnDef, clearFilterTriggered: this._clearFilterTriggered });\r\n      this._clearFilterTriggered = false; // reset flag for next use\r\n    } else {\r\n      const selectedOperator = this.$selectOperatorElm.find('option:selected').text();\r\n      (this._currentValue) ? this.$filterElm.addClass('filled') : this.$filterElm.removeClass('filled');\r\n      this.callback(e, { columnDef: this.columnDef, searchTerms: (this._currentValue ? [this._currentValue] : null), operator: selectedOperator || '' });\r\n    }\r\n  }\r\n\r\n  private hide() {\r\n    if (this.flatInstance && typeof this.flatInstance.close === 'function') {\r\n      this.flatInstance.close();\r\n    }\r\n  }\r\n\r\n  private show() {\r\n    if (this.flatInstance && typeof this.flatInstance.open === 'function') {\r\n      this.flatInstance.open();\r\n    }\r\n  }\r\n}\r\n","import { mapOperatorType, mapOperatorByFieldType } from './utilities';\nimport {\n  BackendService,\n  Column,\n  ColumnFilter,\n  ColumnFilters,\n  ColumnSort,\n  CurrentFilter,\n  CurrentPagination,\n  CurrentSorter,\n  FieldType,\n  FilterChangedArgs,\n  GraphqlCursorPaginationOption,\n  GraphqlDatasetFilter,\n  GraphqlFilteringOption,\n  GraphqlPaginationOption,\n  GraphqlServiceOption,\n  GraphqlSortingOption,\n  GridOption,\n  Pagination,\n  PaginationChangedArgs,\n  SortChangedArgs,\n  SortDirection,\n  SortDirectionString\n} from './../models/index';\nimport QueryBuilder from './graphqlQueryBuilder';\n\n// timer for keeping track of user typing waits\nlet timer: any;\nconst DEFAULT_FILTER_TYPING_DEBOUNCE = 750;\nconst DEFAULT_ITEMS_PER_PAGE = 25;\nconst DEFAULT_PAGE_SIZE = 20;\n\nexport class GraphqlService implements BackendService {\n  private _currentFilters: ColumnFilters | CurrentFilter[];\n  private _currentPagination: CurrentPagination;\n  private _currentSorters: CurrentSorter[];\n  private _columnDefinitions: Column[];\n  private _grid: any;\n  options: GraphqlServiceOption;\n  pagination: Pagination | undefined;\n  defaultOrderBy: GraphqlSortingOption = { field: 'id', direction: SortDirection.ASC };\n  defaultPaginationOptions: GraphqlPaginationOption | GraphqlCursorPaginationOption = {\n    first: DEFAULT_ITEMS_PER_PAGE,\n    offset: 0\n  };\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  /**\n   * Build the GraphQL query, since the service include/exclude cursor, the output query will be different.\n   * @param serviceOptions GraphqlServiceOption\n   */\n  buildQuery() {\n    if (!this.options || !this.options.datasetName || (!this._columnDefinitions && !this.options.columnDefinitions)) {\n      throw new Error('GraphQL Service requires \"datasetName\" & \"columnDefinitions\" properties for it to work');\n    }\n\n    // get the column definitions and exclude some if they were tagged as excluded\n    let columnDefinitions = this._columnDefinitions || this.options.columnDefinitions;\n    columnDefinitions = columnDefinitions.filter((column: Column) => !column.excludeFromQuery);\n\n    const queryQb = new QueryBuilder('query');\n    const datasetQb = new QueryBuilder(this.options.datasetName);\n    const dataQb = (this.options.isWithCursor) ? new QueryBuilder('edges') : new QueryBuilder('nodes');\n\n    // get all the columnds Ids for the filters to work\n    let columnIds: string[] = [];\n    if (columnDefinitions && Array.isArray(columnDefinitions)) {\n      for (const column of columnDefinitions) {\n        columnIds.push(column.field);\n\n        // if extra \"fields\" are passed, also push them to columnIds\n        if (column.fields) {\n          columnIds.push(...column.fields);\n        }\n      }\n      // columnIds = columnDefinitions.map((column) => column.field);\n    } else {\n      columnIds = this.options.columnIds || [];\n    }\n\n    // Slickgrid also requires the \"id\" field to be part of DataView\n    // add it to the GraphQL query if it wasn't already part of the list\n    if (columnIds.indexOf('id') === -1) {\n      columnIds.unshift('id');\n    }\n\n    const filters = this.buildFilterQuery(columnIds);\n\n    if (this.options.isWithCursor) {\n      // ...pageInfo { hasNextPage, endCursor }, edges { cursor, node { _filters_ } }\n      const pageInfoQb = new QueryBuilder('pageInfo');\n      pageInfoQb.find('hasNextPage', 'endCursor');\n      dataQb.find(['cursor', { node: filters }]);\n      datasetQb.find(['totalCount', pageInfoQb, dataQb]);\n    } else {\n      // ...nodes { _filters_ }\n      dataQb.find(filters);\n      datasetQb.find(['totalCount', dataQb]);\n    }\n\n    // add dataset filters, could be Pagination and SortingFilters and/or FieldFilters\n    let datasetFilters: GraphqlDatasetFilter = {};\n\n    // only add pagination if it's enabled in the grid options\n    if (this._gridOptions.enablePagination !== false) {\n      datasetFilters = {\n        ...this.options.paginationOptions,\n        first: ((this.options.paginationOptions && this.options.paginationOptions.first) ? this.options.paginationOptions.first : ((this.pagination && this.pagination.pageSize) ? this.pagination.pageSize : null)) || this.defaultPaginationOptions.first\n      };\n\n      if (!this.options.isWithCursor) {\n        datasetFilters.offset = ((this.options.paginationOptions && this.options.paginationOptions.hasOwnProperty('offset')) ? +this.options.paginationOptions['offset'] : 0);\n      }\n    }\n\n    if (this.options.sortingOptions && Array.isArray(this.options.sortingOptions) && this.options.sortingOptions.length > 0) {\n      // orderBy: [{ field:x, direction: 'ASC' }]\n      datasetFilters.orderBy = this.options.sortingOptions;\n    }\n    if (this.options.filteringOptions && Array.isArray(this.options.filteringOptions) && this.options.filteringOptions.length > 0) {\n      // filterBy: [{ field: date, operator: '>', value: '2000-10-10' }]\n      datasetFilters.filterBy = this.options.filteringOptions;\n    }\n    if (this.options.addLocaleIntoQuery) {\n      // first: 20, ... locale: \"en-CA\"\n      datasetFilters.locale = this._gridOptions && this._gridOptions.i18n && this._gridOptions.i18n.currentLang || 'en';\n    }\n    if (this.options.extraQueryArguments) {\n      // first: 20, ... userId: 123\n      for (const queryArgument of this.options.extraQueryArguments) {\n        datasetFilters[queryArgument.field] = queryArgument.value;\n      }\n    }\n\n    // query { users(first: 20, orderBy: [], filterBy: [])}\n    datasetQb.filter(datasetFilters);\n    queryQb.find(datasetQb);\n\n    const enumSearchProperties = ['direction:', 'field:', 'operator:'];\n    return this.trimDoubleQuotesOnEnumField(queryQb.toString(), enumSearchProperties, this.options.keepArgumentFieldDoubleQuotes || false);\n  }\n\n  /**\n   * From an input array of strings, we want to build a GraphQL query string.\n   * The process has to take the dot notation and parse it into a valid GraphQL query\n   * Following this SO answer https://stackoverflow.com/a/47705476/1212166\n   *\n   * INPUT\n   *  ['firstName', 'lastName', 'billing.address.street', 'billing.address.zip']\n   * OUTPUT\n   * firstName, lastName, billing{address{street, zip}}\n   * @param inputArray\n   */\n  buildFilterQuery(inputArray: string[]) {\n\n    const set = (o: any = {}, a: any) => {\n      const k = a.shift();\n      o[k] = a.length ? set(o[k], a) : null;\n      return o;\n    };\n\n    const output = inputArray.reduce((o: any, a: string) => set(o, a.split('.')), {});\n\n    return JSON.stringify(output)\n      .replace(/\\\"|\\:|null/g, '')\n      .replace(/^\\{/, '')\n      .replace(/\\}$/, '');\n  }\n\n  init(serviceOptions?: GraphqlServiceOption, pagination?: Pagination, grid?: any): void {\n    this._grid = grid;\n    this.options = serviceOptions || {};\n    this.pagination = pagination;\n\n    if (grid && grid.getColumns) {\n      this._columnDefinitions = serviceOptions.columnDefinitions || grid.getColumns();\n    }\n  }\n\n  /**\n   * Get an initialization of Pagination options\n   * @return Pagination Options\n   */\n  getInitPaginationOptions(): GraphqlDatasetFilter {\n    return (this.options.isWithCursor) ? { first: (this.pagination ? this.pagination.pageSize : DEFAULT_ITEMS_PER_PAGE) } : { first: (this.pagination ? this.pagination.pageSize : DEFAULT_ITEMS_PER_PAGE), offset: 0 };\n  }\n\n  /** Get the GraphQL dataset name */\n  getDatasetName(): string {\n    return this.options.datasetName || '';\n  }\n\n  /** Get the Filters that are currently used by the grid */\n  getCurrentFilters(): ColumnFilters | CurrentFilter[] {\n    return this._currentFilters;\n  }\n\n  /** Get the Pagination that is currently used by the grid */\n  getCurrentPagination(): CurrentPagination {\n    return this._currentPagination;\n  }\n\n  /** Get the Sorters that are currently used by the grid */\n  getCurrentSorters(): CurrentSorter[] {\n    return this._currentSorters;\n  }\n\n  /*\n   * Reset the pagination options\n   */\n  resetPaginationOptions() {\n    let paginationOptions;\n    if (this.options.isWithCursor) {\n      // first, last, after, before\n      paginationOptions = {\n        after: '',\n        before: undefined,\n        last: undefined\n      } as GraphqlCursorPaginationOption;\n    } else {\n      // first, last, offset\n      paginationOptions = (this.options.paginationOptions || this.getInitPaginationOptions()) as GraphqlPaginationOption;\n      paginationOptions.offset = 0;\n    }\n\n    // save current pagination as Page 1 and page size as \"first\" set size\n    this._currentPagination = {\n      pageNumber: 1,\n      pageSize: paginationOptions.first\n    };\n\n    this.updateOptions({ paginationOptions });\n  }\n\n  updateOptions(serviceOptions?: GraphqlServiceOption) {\n    this.options = { ...this.options, ...serviceOptions };\n  }\n\n  /*\n   * FILTERING\n   */\n  processOnFilterChanged(event: Event, args: FilterChangedArgs): Promise<string> {\n    const gridOptions: GridOption = this._gridOptions || args.grid.getOptions();\n    const backendApi = gridOptions.backendServiceApi;\n\n    if (backendApi === undefined) {\n      throw new Error('Something went wrong in the GraphqlService, \"backendServiceApi\" is not initialized');\n    }\n\n    // only add a delay when user is typing, on select dropdown filter it will execute right away\n    let debounceTypingDelay = 0;\n    if (event && (event.type === 'keyup' || event.type === 'keydown')) {\n      debounceTypingDelay = backendApi.filterTypingDebounce || DEFAULT_FILTER_TYPING_DEBOUNCE;\n    }\n\n    // keep current filters & always save it as an array (columnFilters can be an object when it is dealt by SlickGrid Filter)\n    this._currentFilters = this.castFilterToColumnFilter(args.columnFilters);\n\n    const promise = new Promise<string>((resolve, reject) => {\n      if (!args || !args.grid) {\n        throw new Error('Something went wrong when trying create the GraphQL Backend Service, it seems that \"args\" is not populated correctly');\n      }\n\n      // reset Pagination, then build the GraphQL query which we will use in the WebAPI callback\n      // wait a minimum user typing inactivity before processing any query\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        // loop through all columns to inspect filters & set the query\n        this.updateFilters(args.columnFilters, false);\n\n        this.resetPaginationOptions();\n        resolve(this.buildQuery());\n      }, debounceTypingDelay);\n    });\n\n    return promise;\n  }\n\n  /*\n   * PAGINATION\n   * With cursor, the query can have 4 arguments (first, after, last, before), for example:\n   *   users (first:20, after:\"YXJyYXljb25uZWN0aW9uOjM=\") {\n   *     totalCount\n   *     pageInfo {\n   *       hasNextPage\n   *       endCursor\n   *     }\n   *     edges {\n   *       cursor\n   *       node {\n   *         name\n   *         gender\n   *       }\n   *     }\n   *   }\n   * Without cursor, the query can have 3 arguments (first, last, offset), for example:\n   *   users (first:20, offset: 10) {\n   *     totalCount\n   *     nodes {\n   *       name\n   *       gender\n   *     }\n   *   }\n   */\n  processOnPaginationChanged(event: Event, args: PaginationChangedArgs) {\n    const pageSize = +(args.pageSize || ((this.pagination) ? this.pagination.pageSize : DEFAULT_PAGE_SIZE));\n    this.updatePagination(args.newPage, pageSize);\n\n    // build the GraphQL query which we will use in the WebAPI callback\n    return this.buildQuery();\n  }\n\n  /*\n   * SORTING\n   * we will use sorting as per a Facebook suggestion on a Github issue (with some small changes)\n   * https://github.com/graphql/graphql-relay-js/issues/20#issuecomment-220494222\n   */\n  processOnSortChanged(event: Event, args: SortChangedArgs) {\n    const sortColumns = (args.multiColumnSort) ? args.sortCols : new Array({ sortCol: args.sortCol, sortAsc: args.sortAsc });\n\n    // loop through all columns to inspect sorters & set the query\n    this.updateSorters(sortColumns);\n\n    // build the GraphQL query which we will use in the WebAPI callback\n    return this.buildQuery();\n  }\n\n  /**\n   * loop through all columns to inspect filters & update backend service filteringOptions\n   * @param columnFilters\n   */\n  updateFilters(columnFilters: ColumnFilters | CurrentFilter[], isUpdatedByPreset: boolean) {\n    const searchByArray: GraphqlFilteringOption[] = [];\n    let searchValue: string | string[];\n\n    for (const columnId in columnFilters) {\n      if (columnFilters.hasOwnProperty(columnId)) {\n        const columnFilter = columnFilters[columnId];\n\n        // if user defined some \"presets\", then we need to find the filters from the column definitions instead\n        let columnDef: Column | undefined;\n        if (isUpdatedByPreset && Array.isArray(this._columnDefinitions)) {\n          columnDef = this._columnDefinitions.find((column: Column) => column.id === columnFilter.columnId);\n        } else {\n          columnDef = columnFilter.columnDef;\n        }\n        if (!columnDef) {\n          throw new Error('[Backend Service API]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?');\n        }\n\n        const fieldName = columnDef.queryField || columnDef.queryFieldFilter || columnDef.field || columnDef.name || '';\n        const searchTerms = (columnFilter ? columnFilter.searchTerms : null) || [];\n        let fieldSearchValue = (Array.isArray(searchTerms) && searchTerms.length === 1) ? searchTerms[0] : '';\n        if (typeof fieldSearchValue === 'undefined') {\n          fieldSearchValue = '';\n        }\n\n        if (typeof fieldSearchValue !== 'string' && !searchTerms) {\n          throw new Error(`GraphQL filter searchTerm property must be provided as type \"string\", if you use filter with options then make sure your IDs are also string. For example: filter: {model: Filters.select, collection: [{ id: \"0\", value: \"0\" }, { id: \"1\", value: \"1\" }]`);\n        }\n\n        fieldSearchValue = '' + fieldSearchValue; // make sure it's a string\n        const matches = fieldSearchValue.match(/^([<>!=\\*]{0,2})(.*[^<>!=\\*])([\\*]?)$/); // group 1: Operator, 2: searchValue, 3: last char is '*' (meaning starts with, ex.: abc*)\n        let operator = columnFilter.operator || ((matches) ? matches[1] : '');\n        searchValue = (!!matches) ? matches[2] : '';\n        const lastValueChar = (!!matches) ? matches[3] : (operator === '*z' ? '*' : '');\n\n        // no need to query if search value is empty\n        if (fieldName && searchValue === '' && searchTerms.length === 0) {\n          continue;\n        }\n\n        // when having more than 1 search term (we need to create a CSV string for GraphQL \"IN\" or \"NOT IN\" filter search)\n        if (searchTerms && searchTerms.length > 1) {\n          searchValue = searchTerms.join(',');\n        } else if (typeof searchValue === 'string') {\n          // escaping the search value\n          searchValue = searchValue.replace(`'`, `''`); // escape single quotes by doubling them\n          if (operator === '*' || operator === 'a*' || operator === '*z' || lastValueChar === '*') {\n            operator = (operator === '*' || operator === '*z') ? 'endsWith' : 'startsWith';\n          }\n        }\n\n        // if we didn't find an Operator but we have a Filter Type, we should use default Operator\n        // multipleSelect is \"IN\", while singleSelect is \"EQ\", else don't map any operator\n        if (!operator && columnDef.filter) {\n          operator = columnDef.filter.operator;\n        }\n\n        // if we still don't have an operator find the proper Operator to use by it's field type\n        if (!operator) {\n          operator = mapOperatorByFieldType(columnDef.type || FieldType.string);\n        }\n\n        searchByArray.push({\n          field: fieldName,\n          operator: mapOperatorType(operator),\n          value: searchValue\n        });\n      }\n    }\n\n    // update the service options with filters for the buildQuery() to work later\n    this.updateOptions({ filteringOptions: searchByArray });\n  }\n\n  /**\n   * Update the pagination component with it's new page number and size\n   * @param newPage\n   * @param pageSize\n   */\n  updatePagination(newPage: number, pageSize: number) {\n    this._currentPagination = {\n      pageNumber: newPage,\n      pageSize\n    };\n\n    let paginationOptions;\n    if (this.options.isWithCursor) {\n      paginationOptions = {\n        first: pageSize\n      };\n    } else {\n      paginationOptions = {\n        first: pageSize,\n        offset: (newPage - 1) * pageSize\n      };\n    }\n\n    this.updateOptions({ paginationOptions });\n  }\n\n  /**\n   * loop through all columns to inspect sorters & update backend service sortingOptions\n   * @param columnFilters\n   */\n  updateSorters(sortColumns?: ColumnSort[], presetSorters?: CurrentSorter[]) {\n    let currentSorters: CurrentSorter[] = [];\n    let graphqlSorters: GraphqlSortingOption[] = [];\n\n    if (!sortColumns && presetSorters) {\n      // make the presets the current sorters, also make sure that all direction are in uppercase for GraphQL\n      currentSorters = presetSorters;\n      currentSorters.forEach((sorter) => sorter.direction = sorter.direction.toUpperCase() as SortDirectionString);\n\n      // display the correct sorting icons on the UI, for that it requires (columnId, sortAsc) properties\n      const tmpSorterArray = currentSorters.map((sorter) => {\n        const columnDef = this._columnDefinitions.find((column: Column) => column.id === sorter.columnId);\n\n        graphqlSorters.push({\n          field: columnDef ? ((columnDef.queryField || columnDef.queryFieldSorter || columnDef.field || columnDef.id) + '') : (sorter.columnId + ''),\n          direction: sorter.direction\n        });\n\n        // return only the column(s) found in the Column Definitions ELSE null\n        if (columnDef) {\n          return {\n            columnId: sorter.columnId,\n            sortAsc: sorter.direction.toUpperCase() === SortDirection.ASC\n          };\n        }\n        return null;\n      });\n\n      // set the sort icons, but also make sure to filter out null values (happens when no columnDef found)\n      if (Array.isArray(tmpSorterArray)) {\n        this._grid.setSortColumns(tmpSorterArray.filter((sorter) => sorter));\n      }\n    } else if (sortColumns && !presetSorters) {\n      // build the orderBy array, it could be multisort, example\n      // orderBy:[{field: lastName, direction: ASC}, {field: firstName, direction: DESC}]\n      if (sortColumns && sortColumns.length === 0) {\n        graphqlSorters = new Array(this.defaultOrderBy); // when empty, use the default sort\n        currentSorters = new Array({ columnId: this.defaultOrderBy.field, direction: this.defaultOrderBy.direction });\n      } else {\n        if (sortColumns) {\n          for (const column of sortColumns) {\n            if (column && column.sortCol) {\n              currentSorters.push({\n                columnId: column.sortCol.id + '',\n                direction: column.sortAsc ? SortDirection.ASC : SortDirection.DESC\n              });\n\n              graphqlSorters.push({\n                field: (column.sortCol.queryField || column.sortCol.queryFieldSorter || column.sortCol.field || column.sortCol.id) + '',\n                direction: column.sortAsc ? SortDirection.ASC : SortDirection.DESC\n              });\n            }\n          }\n        }\n      }\n    }\n\n    // keep current Sorters and update the service options with the new sorting\n    this._currentSorters = currentSorters;\n    this.updateOptions({ sortingOptions: graphqlSorters });\n  }\n\n  /**\n   * A function which takes an input string and removes double quotes only\n   * on certain fields are identified as GraphQL enums (except fields with dot notation)\n   * For example let say we identified (\"direction:\", \"sort\") as word which are GraphQL enum fields\n   * then the result will be:\n   * FROM\n   * query { users (orderBy:[{field:\"firstName\", direction:\"ASC\"} }]) }\n   * TO\n   * query { users (orderBy:[{field: firstName, direction: ASC}})}\n   *\n   * EXCEPTIONS (fields with dot notation \".\" which are inside a \"field:\")\n   * these fields will keep double quotes while everything else will be stripped of double quotes\n   * query { users (orderBy:[{field:\"billing.street.name\", direction: \"ASC\"} }\n   * TO\n   * query { users (orderBy:[{field:\"billing.street.name\", direction: ASC}}\n   * @param inputStr input string\n   * @param enumSearchWords array of enum words to filter\n   * @returns outputStr output string\n   */\n  trimDoubleQuotesOnEnumField(inputStr: string, enumSearchWords: string[], keepArgumentFieldDoubleQuotes: boolean) {\n    const patternWordInQuotes = `\\s?((field:\\s*)?\".*?\")`;\n    let patternRegex = enumSearchWords.join(patternWordInQuotes + '|');\n    patternRegex += patternWordInQuotes; // the last one should also have the pattern but without the pipe \"|\"\n    // example with (field: & direction:):  /field:s?(\".*?\")|direction:s?(\".*?\")/\n    const reg = new RegExp(patternRegex, 'g');\n\n    return inputStr.replace(reg, (group1, group2, group3) => {\n      // remove double quotes except when the string starts with a \"field:\"\n      let removeDoubleQuotes = true;\n      if (group1.startsWith('field:') && keepArgumentFieldDoubleQuotes) {\n        removeDoubleQuotes = false;\n      }\n      const rep = removeDoubleQuotes ? group1.replace(/\"/g, '') : group1;\n      return rep;\n    });\n  }\n\n  //\n  // private functions\n  // -------------------\n  /**\n   * Cast provided filters (could be in multiple format) into an array of ColumnFilter\n   * @param columnFilters\n   */\n  private castFilterToColumnFilter(columnFilters: ColumnFilters | CurrentFilter[]): CurrentFilter[] {\n    // keep current filters & always save it as an array (columnFilters can be an object when it is dealt by SlickGrid Filter)\n    const filtersArray: ColumnFilter[] = (typeof columnFilters === 'object') ? Object.keys(columnFilters).map(key => columnFilters[key]) : columnFilters;\n\n    return filtersArray.map((filter) => {\n      const columnDef = filter.columnDef;\n      const header = (columnDef) ? (columnDef.headerKey || columnDef.name || '') : '';\n      const tmpFilter: CurrentFilter = { columnId: filter.columnId || '' };\n      if (filter.operator) {\n        tmpFilter.operator = filter.operator;\n      }\n      if (Array.isArray(filter.searchTerms)) {\n        tmpFilter.searchTerms = filter.searchTerms;\n      }\n      return tmpFilter;\n    });\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { FieldType } from './../models/index';\r\nimport { Column, Filter, FilterArguments, FilterCallback, GridOption, OperatorString, OperatorType, SearchTerm } from './../models/index';\r\n\r\n// using external non-typed js libraries\r\ndeclare var $: any;\r\n\r\nexport class CompoundInputFilter implements Filter {\r\n  private _clearFilterTriggered = false;\r\n  private _inputType = 'text';\r\n  private $filterElm: any;\r\n  private $filterInputElm: any;\r\n  private $selectOperatorElm: any;\r\n  private _operator: OperatorType | OperatorString;\r\n  grid: any;\r\n  searchTerms: SearchTerm[];\r\n  columnDef: Column;\r\n  callback: FilterCallback;\r\n\r\n  constructor(protected translate: TranslateService) {}\r\n\r\n  /** Getter for the Grid Options pulled through the Grid Object */\r\n  private get gridOptions(): GridOption {\r\n    return (this.grid && this.grid.getOptions) ? this.grid.getOptions() : {};\r\n  }\r\n\r\n  /** Getter of input type (text, number, password) */\r\n  get inputType() {\r\n    return this._inputType;\r\n  }\r\n\r\n  /** Setter of input type (text, number, password) */\r\n  set inputType(type: string) {\r\n    this._inputType = type;\r\n  }\r\n\r\n  /** Getter of the Operator to use when doing the filter comparing */\r\n  get operator(): OperatorType | OperatorString {\r\n    return this._operator || OperatorType.empty;\r\n  }\r\n\r\n  /** Getter of the Operator to use when doing the filter comparing */\r\n  set operator(op: OperatorType | OperatorString) {\r\n    this._operator = op;\r\n  }\r\n\r\n  /**\r\n   * Initialize the Filter\r\n   */\r\n  init(args: FilterArguments) {\r\n    this.grid = args.grid;\r\n    this.callback = args.callback;\r\n    this.columnDef = args.columnDef;\r\n    this.operator = args.operator;\r\n    this.searchTerms = args.searchTerms || [];\r\n\r\n    // filter input can only have 1 search term, so we will use the 1st array index if it exist\r\n    const searchTerm = (Array.isArray(this.searchTerms) && this.searchTerms[0]) || '';\r\n\r\n    // step 1, create the DOM Element of the filter which contain the compound Operator+Input\r\n    // and initialize it if searchTerms is filled\r\n    this.$filterElm = this.createDomElement(searchTerm);\r\n\r\n    // step 3, subscribe to the keyup event and run the callback when that happens\r\n    // also add/remove \"filled\" class for styling purposes\r\n    this.$filterInputElm.on('keyup input change', (e: any) => {\r\n      this.onTriggerEvent(e);\r\n    });\r\n    this.$selectOperatorElm.on('change', (e: any) => {\r\n      this.onTriggerEvent(e);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear the filter value\r\n   */\r\n  clear() {\r\n    if (this.$filterElm && this.$selectOperatorElm) {\r\n      this._clearFilterTriggered = true;\r\n      this.searchTerms = [];\r\n      this.$selectOperatorElm.val(0);\r\n      this.$filterInputElm.val('');\r\n      this.onTriggerEvent(null);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * destroy the filter\r\n   */\r\n  destroy() {\r\n    if (this.$filterElm && this.$selectOperatorElm) {\r\n      this.$filterElm.off('keyup input change').remove();\r\n      this.$selectOperatorElm.off('change');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set value(s) on the DOM element\r\n   */\r\n  setValues(values: SearchTerm[]) {\r\n    if (values && Array.isArray(values)) {\r\n      this.$filterElm.val(values[0]);\r\n    }\r\n  }\r\n\r\n  //\r\n  // private functions\r\n  // ------------------\r\n\r\n  private buildInputHtmlString() {\r\n    const placeholder = (this.gridOptions) ? (this.gridOptions.defaultFilterPlaceholder || '') : '';\r\n    return `<input class=\"form-control\" type=\"${this._inputType || 'text'}\" placeholder=\"${placeholder}\" />`;\r\n  }\r\n\r\n  private buildSelectOperatorHtmlString() {\r\n    const optionValues = this.getOptionValues();\r\n    let optionValueString = '';\r\n    optionValues.forEach((option) => {\r\n      optionValueString += `<option value=\"${option.operator}\" title=\"${option.description}\">${option.operator}</option>`;\r\n    });\r\n\r\n    return `<select class=\"form-control\">${optionValueString}</select>`;\r\n  }\r\n\r\n  private getOptionValues(): {operator: OperatorString, description: string }[] {\r\n    const type = (this.columnDef.type && this.columnDef.type) ? this.columnDef.type : FieldType.string;\r\n    let optionValues = [];\r\n\r\n    switch (type) {\r\n      case FieldType.string:\r\n        optionValues = [\r\n          { operator: '' as OperatorString, description: this.translate.instant('CONTAINS') },\r\n          { operator: '=' as OperatorString, description: this.translate.instant('EQUALS') },\r\n          { operator: 'a*' as OperatorString, description: this.translate.instant('STARTS_WITH') },\r\n          { operator: '*z' as OperatorString, description: this.translate.instant('ENDS_WITH') },\r\n          /*\r\n          { operator: 'IN' as OperatorString, description: this.translate.instant('IN_COLLECTION_SEPERATED_BY_COMMA') },\r\n          { operator: 'NIN' as OperatorString, description: this.translate.instant('NOT_IN_COLLECTION_SEPERATED_BY_COMMA') },\r\n          */\r\n        ];\r\n        break;\r\n      default:\r\n        optionValues = [\r\n          { operator: '' as OperatorString, description: this.translate.instant('CONTAINS') },\r\n          { operator: '=' as OperatorString, description: '' },\r\n          { operator: '<' as OperatorString, description: '' },\r\n          { operator: '<=' as OperatorString, description: '' },\r\n          { operator: '>' as OperatorString, description: '' },\r\n          { operator: '>=' as OperatorString, description: '' },\r\n          { operator: '<>' as OperatorString, description: '' }];\r\n        break;\r\n    }\r\n\r\n    return optionValues;\r\n  }\r\n\r\n  /**\r\n   * Create the DOM element\r\n   */\r\n  private createDomElement(searchTerm?: SearchTerm) {\r\n    const fieldId = this.columnDef && this.columnDef.id;\r\n    const $headerElm = this.grid.getHeaderRowColumn(fieldId);\r\n    $($headerElm).empty();\r\n\r\n    // create the DOM Select dropdown for the Operator\r\n    this.$selectOperatorElm = $(this.buildSelectOperatorHtmlString());\r\n    this.$filterInputElm = $(this.buildInputHtmlString());\r\n    const $filterContainerElm = $(`<div class=\"form-group search-filter filter-${fieldId}\"></div>`);\r\n    const $containerInputGroup = $(`<div class=\"input-group\"></div>`);\r\n    const $operatorInputGroupAddon = $(`<div class=\"input-group-addon input-group-prepend operator\"></div>`);\r\n\r\n    /* the DOM element final structure will be\r\n      <div class=\"input-group\">\r\n        <div class=\"input-group-addon input-group-prepend operator\">\r\n          <select class=\"form-control\"></select>\r\n        </div>\r\n        <input class=\"form-control\" type=\"text\" />\r\n      </div>\r\n    */\r\n    $operatorInputGroupAddon.append(this.$selectOperatorElm);\r\n    $containerInputGroup.append($operatorInputGroupAddon);\r\n    $containerInputGroup.append(this.$filterInputElm);\r\n\r\n    // create the DOM element & add an ID and filter class\r\n    $filterContainerElm.append($containerInputGroup);\r\n    $filterContainerElm.attr('id', `filter-${fieldId}`);\r\n\r\n    this.$filterInputElm.val(searchTerm);\r\n    this.$filterInputElm.data('columnId', fieldId);\r\n\r\n    if (this.operator) {\r\n      this.$selectOperatorElm.val(this.operator);\r\n    }\r\n\r\n    // if there's a search term, we will add the \"filled\" class for styling purposes\r\n    if (searchTerm) {\r\n      $filterContainerElm.addClass('filled');\r\n    }\r\n\r\n    // append the new DOM element to the header row\r\n    if ($filterContainerElm && typeof $filterContainerElm.appendTo === 'function') {\r\n      $filterContainerElm.appendTo($headerElm);\r\n    }\r\n\r\n    return $filterContainerElm;\r\n  }\r\n\r\n  private onTriggerEvent(e: Event | undefined) {\r\n    if (this._clearFilterTriggered) {\r\n      this.callback(e, { columnDef: this.columnDef, clearFilterTriggered: this._clearFilterTriggered });\r\n      this._clearFilterTriggered = false; // reset flag for next use\r\n    } else {\r\n      const selectedOperator = this.$selectOperatorElm.find('option:selected').text();\r\n      const value = this.$filterInputElm.val();\r\n      (value !== null && value !== undefined && value !== '') ? this.$filterElm.addClass('filled') : this.$filterElm.removeClass('filled');\r\n      this.callback(e, { columnDef: this.columnDef, searchTerms: (value ? [value] : null), operator: selectedOperator || '' });\r\n    }\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { CompoundInputFilter } from './compoundInputFilter';\r\n\r\nexport class CompoundInputNumberFilter extends CompoundInputFilter {\r\n  /** Initialize the Filter */\r\n  constructor(protected translate: TranslateService) {\r\n    super(translate);\r\n    this.inputType = 'number';\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { CompoundInputFilter } from './compoundInputFilter';\r\n\r\nexport class CompoundInputPasswordFilter extends CompoundInputFilter {\r\n  /** Initialize the Filter */\r\n  constructor(protected translate: TranslateService) {\r\n    super(translate);\r\n    this.inputType = 'password';\r\n  }\r\n}\r\n","import {\n  Column,\n  ColumnFilter,\n  Filter,\n  FilterArguments,\n  FilterCallback,\n  GridOption,\n  OperatorString,\n  OperatorType,\n  SearchTerm\n} from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\nconst DEFAULT_MIN_VALUE = 0;\nconst DEFAULT_MAX_VALUE = 100;\nconst DEFAULT_STEP = 1;\n\nexport class CompoundSliderFilter implements Filter {\n  private _clearFilterTriggered = false;\n  private _elementRangeInputId: string;\n  private _elementRangeOutputId: string;\n  private _operator: OperatorType | OperatorString;\n  private $containerInputGroupElm: any;\n  private $filterElm: any;\n  private $filterInputElm: any;\n  private $selectOperatorElm: any;\n  grid: any;\n  searchTerms: SearchTerm[];\n  columnDef: Column;\n  callback: FilterCallback;\n\n  constructor() { }\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get gridOptions(): GridOption {\n    return (this.grid && this.grid.getOptions) ? this.grid.getOptions() : {};\n  }\n\n  /** Getter for the Filter Generic Params */\n  private get filterParams(): any {\n    return this.columnDef && this.columnDef.filter && this.columnDef.filter.params || {};\n  }\n\n  /** Getter for the `filter` properties */\n  private get filterProperties(): ColumnFilter {\n    return this.columnDef && this.columnDef.filter;\n  }\n\n  set operator(op: OperatorType | OperatorString) {\n    this._operator = op;\n  }\n\n  get operator(): OperatorType | OperatorString {\n    return this._operator || OperatorType.empty;\n  }\n\n  /**\n   * Initialize the Filter\n   */\n  init(args: FilterArguments) {\n    if (args) {\n      this.grid = args.grid;\n      this.callback = args.callback;\n      this.columnDef = args.columnDef;\n      this.operator = args.operator || '';\n      this.searchTerms = args.searchTerms || [];\n\n      // define the input & slider number IDs\n      this._elementRangeInputId = `rangeInput_${this.columnDef.field}`;\n      this._elementRangeOutputId = `rangeOutput_${this.columnDef.field}`;\n\n      // filter input can only have 1 search term, so we will use the 1st array index if it exist\n      const searchTerm = (Array.isArray(this.searchTerms) && this.searchTerms[0]) || '';\n\n      // step 1, create the DOM Element of the filter which contain the compound Operator+Input\n      // and initialize it if searchTerm is filled\n      this.$filterElm = this.createDomElement(searchTerm);\n\n      // step 3, subscribe to the keyup event and run the callback when that happens\n      // also add/remove \"filled\" class for styling purposes\n      this.$filterInputElm.change((e: any) => {\n        this.onTriggerEvent(e);\n      });\n      this.$selectOperatorElm.change((e: any) => {\n        this.onTriggerEvent(e);\n      });\n\n      // if user chose to display the slider number on the right side, then update it every time it changes\n      // we need to use both \"input\" and \"change\" event to be all cross-browser\n      if (!this.filterParams.hideSliderNumber) {\n        this.$filterInputElm.on('input change', (e: { target: HTMLInputElement }) => {\n          const value = e && e.target && e.target.value || '';\n          if (value) {\n            document.getElementById(this._elementRangeOutputId).innerHTML = value;\n          }\n        });\n      }\n    }\n  }\n\n  /**\n   * Clear the filter value\n   */\n  clear() {\n    if (this.$filterElm && this.$selectOperatorElm) {\n      this._clearFilterTriggered = true;\n      this.searchTerms = [];\n      const clearedValue = this.filterParams.hasOwnProperty('sliderStartValue') ? this.filterParams.sliderStartValue : DEFAULT_MIN_VALUE;\n      this.$selectOperatorElm.val(0);\n      this.$filterInputElm.val(clearedValue);\n      if (!this.filterParams.hideSliderNumber) {\n        this.$containerInputGroupElm.children('div.input-group-addon.input-group-append').children().last().html(clearedValue);\n      }\n      this.onTriggerEvent(undefined);\n    }\n  }\n\n  /**\n   * destroy the filter\n   */\n  destroy() {\n    if (this.$filterElm) {\n      this.$filterElm.off('change').remove();\n    }\n  }\n\n  /**\n   * Set value(s) on the DOM element\n   */\n  setValues(values: SearchTerm[]) {\n    if (values && Array.isArray(values)) {\n      this.$filterInputElm.val(values[0]);\n      this.$containerInputGroupElm.children('div.input-group-addon.input-group-append').children().last().html(values[0]);\n    }\n  }\n\n  //\n  // private functions\n  // ------------------\n\n  /** Build HTML Template for the input range (slider) */\n  private buildTemplateHtmlString() {\n    const minValue = this.filterProperties.hasOwnProperty('minValue') ? this.filterProperties.minValue : DEFAULT_MIN_VALUE;\n    const maxValue = this.filterProperties.hasOwnProperty('maxValue') ? this.filterProperties.maxValue : DEFAULT_MAX_VALUE;\n    const defaultValue = this.filterParams.hasOwnProperty('sliderStartValue') ? this.filterParams.sliderStartValue : minValue;\n    const step = this.filterProperties.hasOwnProperty('valueStep') ? this.filterProperties.valueStep : DEFAULT_STEP;\n\n    return `<input type=\"range\" id=\"${this._elementRangeInputId}\"\n              name=\"${this._elementRangeInputId}\"\n              defaultValue=\"${defaultValue}\" min=\"${minValue}\" max=\"${maxValue}\" step=\"${step}\"\n              class=\"form-control slider-filter-input range compound-slider\" />`;\n  }\n\n  /** Build HTML Template for the text (number) that is shown appended to the slider */\n  private buildTemplateSliderTextHtmlString() {\n    const minValue = this.filterProperties.hasOwnProperty('minValue') ? this.filterProperties.minValue : DEFAULT_MIN_VALUE;\n    const defaultValue = this.filterParams.hasOwnProperty('sliderStartValue') ? this.filterParams.sliderStartValue : minValue;\n\n    return `<div class=\"input-group-addon input-group-append slider-value\"><span class=\"input-group-text\" id=\"${this._elementRangeOutputId}\">${defaultValue}</span></div>`;\n  }\n\n  /** Build HTML Template select dropdown (operator) */\n  private buildSelectOperatorHtmlString() {\n    const optionValues = this.getOptionValues();\n    let optionValueString = '';\n    optionValues.forEach((option) => {\n      optionValueString += `<option value=\"${option.operator}\" title=\"${option.description}\">${option.operator}</option>`;\n    });\n\n    return `<select class=\"form-control\">${optionValueString}</select>`;\n  }\n\n  /** Get the available operator option values */\n  private getOptionValues(): { operator: OperatorString, description: string }[] {\n    return [\n      { operator: '' as OperatorString, description: '' },\n      { operator: '=' as OperatorString, description: '' },\n      { operator: '<' as OperatorString, description: '' },\n      { operator: '<=' as OperatorString, description: '' },\n      { operator: '>' as OperatorString, description: '' },\n      { operator: '>=' as OperatorString, description: '' },\n      { operator: '<>' as OperatorString, description: '' }\n    ];\n  }\n\n  /**\n   * Create the DOM element\n   */\n  private createDomElement(searchTerm?: SearchTerm) {\n    const fieldId = this.columnDef && this.columnDef.id;\n    const searchTermInput = (searchTerm || '0') as string;\n    const $headerElm = this.grid.getHeaderRowColumn(this.columnDef.id);\n    $($headerElm).empty();\n\n    // create the DOM Select dropdown for the Operator\n    this.$selectOperatorElm = $(this.buildSelectOperatorHtmlString());\n    this.$filterInputElm = $(this.buildTemplateHtmlString());\n    const $filterContainerElm = $(`<div class=\"form-group search-filter filter-${fieldId}\"></div>`);\n    this.$containerInputGroupElm = $(`<div class=\"input-group search-filter filter-${fieldId}\"></div>`);\n    const $operatorInputGroupAddon = $(`<span class=\"input-group-addon input-group-prepend operator\"></span>`);\n\n    /* the DOM element final structure will be\n      <div class=\"input-group\">\n        <div class=\"input-group-addon input-group-prepend operator\">\n          <select class=\"form-control\"></select>\n        </div>\n        <input class=\"form-control\" type=\"text\" />\n        <div class=\"input-group-addon input-group-prepend\" id=\"rangeOuput_percentComplete\"><span class=\"input-group-text\">0</span></div>\n      </div>\n    */\n    $operatorInputGroupAddon.append(this.$selectOperatorElm);\n    this.$containerInputGroupElm.append($operatorInputGroupAddon);\n    this.$containerInputGroupElm.append(this.$filterInputElm);\n    if (!this.filterParams.hideSliderNumber) {\n      const $sliderTextInputAppendAddon = $(this.buildTemplateSliderTextHtmlString());\n      $sliderTextInputAppendAddon.children().html(searchTermInput);\n      this.$containerInputGroupElm.append($sliderTextInputAppendAddon);\n    }\n\n    // create the DOM element & add an ID and filter class\n    $filterContainerElm.append(this.$containerInputGroupElm);\n    $filterContainerElm.attr('id', `filter-${fieldId}`);\n\n    this.$filterInputElm.val(searchTermInput);\n    this.$filterInputElm.data('columnId', fieldId);\n\n    if (this.operator) {\n      this.$selectOperatorElm.val(this.operator);\n    }\n\n    // if there's a search term, we will add the \"filled\" class for styling purposes\n    if (searchTerm) {\n      $filterContainerElm.addClass('filled');\n    }\n\n    // append the new DOM element to the header row\n    if ($filterContainerElm && typeof $filterContainerElm.appendTo === 'function') {\n      $filterContainerElm.appendTo($headerElm);\n    }\n\n    return $filterContainerElm;\n  }\n\n  private onTriggerEvent(e: Event | undefined) {\n    if (this._clearFilterTriggered) {\n      this.callback(e, { columnDef: this.columnDef, clearFilterTriggered: this._clearFilterTriggered });\n      this._clearFilterTriggered = false; // reset flag for next use\n    } else {\n      const selectedOperator = this.$selectOperatorElm.find('option:selected').text();\n      const value = this.$filterInputElm.val();\n      (value) ? this.$filterElm.addClass('filled') : this.$filterElm.removeClass('filled');\n      this.callback(e, { columnDef: this.columnDef, searchTerms: (value ? [value] : null), operator: selectedOperator || '' });\n    }\n  }\n}\n","import {\r\n  Column,\r\n  Filter,\r\n  FilterArguments,\r\n  FilterCallback,\r\n  GridOption,\r\n  OperatorType,\r\n  OperatorString,\r\n  SearchTerm\r\n} from './../models/index';\r\n\r\n// using external non-typed js libraries\r\ndeclare var $: any;\r\n\r\nexport class InputFilter implements Filter {\r\n  private _clearFilterTriggered = false;\r\n  private _inputType = 'text';\r\n  private $filterElm: any;\r\n  grid: any;\r\n  searchTerms: SearchTerm[];\r\n  columnDef: Column;\r\n  callback: FilterCallback;\r\n\r\n  constructor() {}\r\n\r\n  /** Getter of input type (text, number, password) */\r\n  get inputType() {\r\n    return this._inputType;\r\n  }\r\n\r\n  /** Setter of input type (text, number, password) */\r\n  set inputType(type: string) {\r\n    this._inputType = type;\r\n  }\r\n\r\n  /** Getter of the Operator to use when doing the filter comparing */\r\n  get operator(): OperatorType | OperatorString {\r\n    return this.columnDef && this.columnDef.filter && this.columnDef.filter.operator || '';\r\n  }\r\n\r\n  /** Getter for the Grid Options pulled through the Grid Object */\r\n  private get gridOptions(): GridOption {\r\n    return (this.grid && this.grid.getOptions) ? this.grid.getOptions() : {};\r\n  }\r\n\r\n  /**\r\n   * Initialize the Filter\r\n   */\r\n  init(args: FilterArguments) {\r\n    this.grid = args.grid;\r\n    this.callback = args.callback;\r\n    this.columnDef = args.columnDef;\r\n    this.searchTerms = args.searchTerms || [];\r\n\r\n    // filter input can only have 1 search term, so we will use the 1st array index if it exist\r\n    const searchTerm = (Array.isArray(this.searchTerms) && this.searchTerms[0]) || '';\r\n\r\n    // step 1, create HTML string template\r\n    const filterTemplate = this.buildTemplateHtmlString();\r\n\r\n    // step 2, create the DOM Element of the filter & initialize it if searchTerm is filled\r\n    this.$filterElm = this.createDomElement(filterTemplate, searchTerm);\r\n\r\n    // step 3, subscribe to the keyup event and run the callback when that happens\r\n    // also add/remove \"filled\" class for styling purposes\r\n    this.$filterElm.on('keyup input change', (e: any) => {\r\n      const value = e && e.target && e.target.value || '';\r\n      if (this._clearFilterTriggered) {\r\n        this.callback(e, { columnDef: this.columnDef, clearFilterTriggered: this._clearFilterTriggered });\r\n        this._clearFilterTriggered = false; // reset flag for next use\r\n        this.$filterElm.removeClass('filled');\r\n      } else {\r\n        this.$filterElm.addClass('filled');\r\n        this.callback(e, { columnDef: this.columnDef, operator: this.operator, searchTerms: [value] });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Clear the filter value\r\n   */\r\n  clear() {\r\n    if (this.$filterElm) {\r\n      this._clearFilterTriggered = true;\r\n      this.searchTerms = [];\r\n      this.$filterElm.val('');\r\n      this.$filterElm.trigger('keyup');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * destroy the filter\r\n   */\r\n  destroy() {\r\n    if (this.$filterElm) {\r\n      this.$filterElm.off('keyup input change').remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set value(s) on the DOM element\r\n   */\r\n  setValues(values: SearchTerm) {\r\n    if (values) {\r\n      this.$filterElm.val(values);\r\n    }\r\n  }\r\n\r\n  //\r\n  // private functions\r\n  // ------------------\r\n\r\n  /**\r\n   * Create the HTML template as a string\r\n   */\r\n  private buildTemplateHtmlString() {\r\n    const fieldId = this.columnDef && this.columnDef.id;\r\n    const placeholder = (this.gridOptions) ? (this.gridOptions.defaultFilterPlaceholder || '') : '';\r\n    return `<input type=\"${this._inputType || 'text'}\" class=\"form-control search-filter filter-${fieldId}\" placeholder=\"${placeholder}\">`;\r\n  }\r\n\r\n  /**\r\n   * From the html template string, create a DOM element\r\n   * @param filterTemplate\r\n   */\r\n  private createDomElement(filterTemplate: string, searchTerm?: SearchTerm) {\r\n    const fieldId = this.columnDef && this.columnDef.id;\r\n    const $headerElm = this.grid.getHeaderRowColumn(fieldId);\r\n    $($headerElm).empty();\r\n\r\n    // create the DOM element & add an ID and filter class\r\n    const $filterElm = $(filterTemplate);\r\n\r\n    $filterElm.val(searchTerm);\r\n    $filterElm.attr('id', `filter-${fieldId}`);\r\n    $filterElm.data('columnId', fieldId);\r\n\r\n    // if there's a search term, we will add the \"filled\" class for styling purposes\r\n    if (searchTerm) {\r\n      $filterElm.addClass('filled');\r\n    }\r\n\r\n    // append the new DOM element to the header row\r\n    if ($filterElm && typeof $filterElm.appendTo === 'function') {\r\n      $filterElm.appendTo($headerElm);\r\n    }\r\n\r\n    return $filterElm;\r\n  }\r\n}\r\n","import { InputFilter } from './inputFilter';\r\n\r\nexport class InputNumberFilter extends InputFilter {\r\n  /** Initialize the Filter */\r\n  constructor() {\r\n    super();\r\n    this.inputType = 'number';\r\n  }\r\n}\r\n","import { InputFilter } from './inputFilter';\r\n\r\nexport class InputPasswordFilter extends InputFilter {\r\n  /** Initialize the Filter */\r\n  constructor() {\r\n    super();\r\n    this.inputType = 'password';\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\nimport {\n  CollectionCustomStructure,\n  CollectionOption,\n  Column,\n  ColumnFilter,\n  Filter,\n  FilterArguments,\n  FilterCallback,\n  GridOption,\n  MultipleSelectOption,\n  OperatorType,\n  OperatorString,\n  SearchTerm,\n  SelectOption,\n} from './../models/index';\nimport { CollectionService } from './../services/collection.service';\nimport { castToPromise, getDescendantProperty, htmlEncode, unsubscribeAllObservables } from '../services/utilities';\nimport { Observable, Subject, Subscription } from 'rxjs';\nimport * as DOMPurify_ from 'dompurify';\nconst DOMPurify = DOMPurify_; // patch to fix rollup to work\n\n// using external non-typed js libraries\ndeclare var $: any;\n\nexport class SelectFilter implements Filter {\n  /** DOM Element Name, useful for auto-detecting positioning (dropup / dropdown) */\n  elementName: string;\n\n  /** Filter Multiple-Select options */\n  filterElmOptions: MultipleSelectOption;\n\n  /** The JQuery DOM element */\n  $filterElm: any;\n\n  grid: any;\n  searchTerms: SearchTerm[];\n  columnDef: Column;\n  callback: FilterCallback;\n  defaultOptions: MultipleSelectOption;\n  isFilled = false;\n  labelName: string;\n  labelPrefixName: string;\n  labelSuffixName: string;\n  optionLabel: string;\n  valueName: string;\n  enableTranslateLabel = false;\n  subscriptions: Subscription[] = [];\n\n  /**\n   * Initialize the Filter\n   */\n  constructor(protected translate: TranslateService, protected collectionService: CollectionService, protected isMultipleSelect = true) {\n    // default options used by this Filter, user can overwrite any of these by passing \"otions\"\n    const options: MultipleSelectOption = {\n      autoAdjustDropHeight: true,\n      autoAdjustDropPosition: true,\n      autoAdjustDropWidthByTextSize: true,\n      container: 'body',\n      filter: false,  // input search term on top of the select option list\n      maxHeight: 275,\n      single: true,\n\n      textTemplate: ($elm) => {\n        // render HTML code or not, by default it is sanitized and won't be rendered\n        const isRenderHtmlEnabled = this.columnDef && this.columnDef.filter && this.columnDef.filter.enableRenderHtml || false;\n        return isRenderHtmlEnabled ? $elm.text() : $elm.html();\n      },\n      onClose: () => {\n        // we will subscribe to the onClose event for triggering our callback\n        // also add/remove \"filled\" class for styling purposes\n        const selectedItems = this.$filterElm.multipleSelect('getSelects');\n        if (Array.isArray(selectedItems) && selectedItems.length > 0) {\n          this.isFilled = true;\n          this.$filterElm.addClass('filled').siblings('div .search-filter').addClass('filled');\n        } else {\n          this.isFilled = false;\n          this.$filterElm.removeClass('filled').siblings('div .search-filter').removeClass('filled');\n        }\n\n        this.callback(undefined, { columnDef: this.columnDef, operator: this.operator, searchTerms: selectedItems });\n      }\n    };\n\n    if (this.isMultipleSelect) {\n      options.single = false;\n      options.okButton = true;\n      options.addTitle = true; // show tooltip of all selected items while hovering the filter\n      options.countSelected = this.translate.instant('X_OF_Y_SELECTED');\n      options.allSelected = this.translate.instant('ALL_SELECTED');\n      options.selectAllText = this.translate.instant('SELECT_ALL');\n      options.selectAllDelimiter = ['', '']; // remove default square brackets of default text \"[Select All]\" => \"Select All\"\n    }\n\n    this.defaultOptions = options;\n  }\n\n  /** Getter for the Column Filter itself */\n  protected get columnFilter(): ColumnFilter {\n    return this.columnDef && this.columnDef.filter;\n  }\n\n  /** Getter for the Collection Options */\n  protected get collectionOptions(): CollectionOption {\n    return this.columnDef && this.columnDef.filter && this.columnDef.filter.collectionOptions;\n  }\n\n  /** Getter for the Custom Structure if exist */\n  protected get customStructure(): CollectionCustomStructure {\n    return this.columnDef && this.columnDef.filter && this.columnDef.filter.customStructure;\n  }\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  protected get gridOptions(): GridOption {\n    return (this.grid && this.grid.getOptions) ? this.grid.getOptions() : {};\n  }\n\n  /** Getter for the filter operator */\n  get operator(): OperatorType | OperatorString {\n    if (this.columnDef && this.columnDef.filter && this.columnDef.filter.operator) {\n      return this.columnDef && this.columnDef.filter && this.columnDef.filter.operator;\n    }\n    return  this.isMultipleSelect ? OperatorType.in : OperatorType.equal;\n  }\n\n  /**\n   * Initialize the filter template\n   */\n  init(args: FilterArguments) {\n    this.grid = args.grid;\n    this.callback = args.callback;\n    this.columnDef = args.columnDef;\n    this.searchTerms = args.searchTerms || [];\n\n    if (!this.grid || !this.columnDef || !this.columnFilter || (!this.columnFilter.collection && !this.columnFilter.collectionAsync)) {\n      throw new Error(`[Angular-SlickGrid] You need to pass a \"collection\" (or \"collectionAsync\") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);\n    }\n\n    this.enableTranslateLabel = this.columnFilter.enableTranslateLabel;\n    this.labelName = this.customStructure && this.customStructure.label || 'label';\n    this.labelPrefixName = this.customStructure && this.customStructure.labelPrefix || 'labelPrefix';\n    this.labelSuffixName = this.customStructure && this.customStructure.labelSuffix || 'labelSuffix';\n    this.optionLabel = this.customStructure && this.customStructure.optionLabel || 'value';\n    this.valueName = this.customStructure && this.customStructure.value || 'value';\n\n    if (this.enableTranslateLabel && (!this.translate || typeof this.translate.instant !== 'function')) {\n      throw new Error(`[select-editor] The ngx-translate TranslateService is required for the Select Filter to work correctly`);\n    }\n\n    // always render the Select (dropdown) DOM element, even if user passed a \"collectionAsync\",\n    // if that is the case, the Select will simply be without any options but we still have to render it (else SlickGrid would throw an error)\n    const newCollection = this.columnFilter.collection || [];\n    this.renderDomElement(newCollection);\n\n    // on every Filter which have a \"collection\" or a \"collectionAsync\"\n    // we will add (or replace) a Subject to the \"collectionAsync\" property so that user has possibility to change the collection\n    // if \"collectionAsync\" is already set by the user, it will resolve it first then after it will replace it with a Subject\n    const collectionAsync = this.columnFilter && this.columnFilter.collectionAsync;\n    if (collectionAsync) {\n      this.renderOptionsAsync(collectionAsync); // create Subject after resolve (createCollectionAsyncSubject)\n    }\n  }\n\n  /**\n   * Clear the filter values\n   */\n  clear() {\n    if (this.$filterElm && this.$filterElm.multipleSelect) {\n      // reload the filter element by it's id, to make sure it's still a valid element (because of some issue in the GraphQL example)\n      this.$filterElm.multipleSelect('setSelects', []);\n      this.$filterElm.removeClass('filled');\n      this.searchTerms = [];\n      this.callback(undefined, { columnDef: this.columnDef, clearFilterTriggered: true });\n    }\n  }\n\n  /**\n   * destroy the filter\n   */\n  destroy() {\n    if (this.$filterElm) {\n      // remove event watcher\n      this.$filterElm.off().remove();\n    }\n\n    // also dispose of all Subscriptions\n    this.subscriptions = unsubscribeAllObservables(this.subscriptions);\n  }\n\n  /**\n   * Set value(s) on the DOM element\n   */\n  setValues(values: SearchTerm | SearchTerm[]) {\n    if (values) {\n      values = Array.isArray(values) ? values : [values];\n      this.$filterElm.multipleSelect('setSelects', values);\n    }\n  }\n\n  //\n  // protected functions\n  // ------------------\n\n  /**\n   * user might want to filter certain items of the collection\n   * @param inputCollection\n   * @return outputCollection filtered and/or sorted collection\n   */\n  protected filterCollection(inputCollection) {\n    let outputCollection = inputCollection;\n\n    // user might want to filter certain items of the collection\n    if (this.columnDef && this.columnFilter && this.columnFilter.collectionFilterBy) {\n      const filterBy = this.columnFilter.collectionFilterBy;\n      const filterCollectionBy = this.columnFilter.collectionOptions && this.columnFilter.collectionOptions.filterResultAfterEachPass || null;\n      outputCollection = this.collectionService.filterCollection(outputCollection, filterBy, filterCollectionBy);\n    }\n\n    return outputCollection;\n  }\n\n  /**\n   * user might want to sort the collection in a certain way\n   * @param inputCollection\n   * @return outputCollection filtered and/or sorted collection\n   */\n  protected sortCollection(inputCollection) {\n    let outputCollection = inputCollection;\n\n    // user might want to sort the collection\n    if (this.columnDef && this.columnFilter && this.columnFilter.collectionSortBy) {\n      const sortBy = this.columnFilter.collectionSortBy;\n      outputCollection = this.collectionService.sortCollection(outputCollection, sortBy, this.enableTranslateLabel);\n    }\n\n    return outputCollection;\n  }\n\n  protected async renderOptionsAsync(collectionAsync: Promise<any> | Observable<any> | Subject<any>) {\n    let awaitedCollection: any = [];\n\n    if (collectionAsync) {\n      awaitedCollection = await castToPromise(collectionAsync);\n      this.renderDomElementFromCollectionAsync(awaitedCollection);\n\n      // because we accept Promises & HttpClient Observable only execute once\n      // we will re-create an RxJs Subject which will replace the \"collectionAsync\" which got executed once anyway\n      // doing this provide the user a way to call a \"collectionAsync.next()\"\n      this.createCollectionAsyncSubject();\n    }\n  }\n\n  /** Create or recreate an Observable Subject and reassign it to the \"collectionAsync\" object so user can call a \"collectionAsync.next()\" on it */\n  protected createCollectionAsyncSubject() {\n    const newCollectionAsync = new Subject<any>();\n    this.columnFilter.collectionAsync = newCollectionAsync;\n    this.subscriptions.push(\n      newCollectionAsync.subscribe(collection => this.renderDomElementFromCollectionAsync(collection))\n    );\n  }\n\n  /**\n   * When user use a CollectionAsync we will use the returned collection to render the filter DOM element\n   * and reinitialize filter collection with this new collection\n   */\n  protected renderDomElementFromCollectionAsync(collection) {\n    if (this.collectionOptions && this.collectionOptions.collectionInObjectProperty) {\n      collection = getDescendantProperty(collection, this.collectionOptions.collectionInObjectProperty);\n    }\n    if (!Array.isArray(collection)) {\n      throw new Error('Something went wrong while trying to pull the collection from the \"collectionAsync\" call in the Select Filter, the collection is not a valid array.');\n    }\n\n    // copy over the array received from the async call to the \"collection\" as the new collection to use\n    // this has to be BEFORE the `collectionObserver().subscribe` to avoid going into an infinite loop\n    this.columnFilter.collection = collection;\n\n    // recreate Multiple Select after getting async collection\n    this.renderDomElement(collection);\n  }\n\n  protected renderDomElement(collection) {\n    if (!Array.isArray(collection) && this.collectionOptions && this.collectionOptions.collectionInObjectProperty) {\n      collection = getDescendantProperty(collection, this.collectionOptions.collectionInObjectProperty);\n    }\n    if (!Array.isArray(collection)) {\n      throw new Error('The \"collection\" passed to the Select Filter is not a valid array');\n    }\n\n    // user can optionally add a blank entry at the beginning of the collection\n    if (this.collectionOptions && this.collectionOptions.addBlankEntry) {\n      collection.unshift(this.createBlankEntry());\n    }\n\n    let newCollection = collection;\n\n    // user might want to filter and/or sort certain items of the collection\n    newCollection = this.filterCollection(newCollection);\n    newCollection = this.sortCollection(newCollection);\n\n    // step 1, create HTML string template\n    const filterTemplate = this.buildTemplateHtmlString(newCollection, this.searchTerms);\n\n    // step 2, create the DOM Element of the filter & pre-load search terms\n    // also subscribe to the onClose event\n    this.createDomElement(filterTemplate);\n  }\n\n  /**\n   * Create the HTML template as a string\n   */\n  protected buildTemplateHtmlString(optionCollection: any[], searchTerms: SearchTerm[]) {\n    let options = '';\n    const fieldId = this.columnDef && this.columnDef.id;\n    const separatorBetweenLabels = this.collectionOptions && this.collectionOptions.separatorBetweenTextLabels || '';\n    const isRenderHtmlEnabled = this.columnFilter && this.columnFilter.enableRenderHtml || false;\n    const sanitizedOptions = this.gridOptions && this.gridOptions.sanitizeHtmlOptions || {};\n\n    // collection could be an Array of Strings OR Objects\n    if (optionCollection.every(x => typeof x === 'string')) {\n      optionCollection.forEach((option: string) => {\n        const selected = (searchTerms.findIndex((term) => term === option) >= 0) ? 'selected' : '';\n        options += `<option value=\"${option}\" label=\"${option}\" ${selected}>${option}</option>`;\n\n        // if there's at least 1 search term found, we will add the \"filled\" class for styling purposes\n        if (selected) {\n          this.isFilled = true;\n        }\n      });\n    } else {\n      // array of objects will require a label/value pair unless a customStructure is passed\n      optionCollection.forEach((option: SelectOption) => {\n        if (!option || (option[this.labelName] === undefined && option.labelKey === undefined)) {\n          throw new Error(`[select-filter] A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')`);\n        }\n        const labelKey = (option.labelKey || option[this.labelName]) as string;\n        const selected = (searchTerms.findIndex((term) => term === option[this.valueName]) >= 0) ? 'selected' : '';\n        const labelText = ((option.labelKey || this.enableTranslateLabel) && labelKey) ? this.translate.instant(labelKey || ' ') : labelKey;\n        let prefixText = option[this.labelPrefixName] || '';\n        let suffixText = option[this.labelSuffixName] || '';\n        let optionLabel = option[this.optionLabel] || '';\n        optionLabel = optionLabel.toString().replace(/\\\"/g, '\\''); // replace double quotes by single quotes to avoid interfering with regular html\n\n        // also translate prefix/suffix if enableTranslateLabel is true and text is a string\n        prefixText = (this.enableTranslateLabel && prefixText && typeof prefixText === 'string') ? this.translate.instant(prefixText || ' ') : prefixText;\n        suffixText = (this.enableTranslateLabel && suffixText && typeof suffixText === 'string') ? this.translate.instant(suffixText || ' ') : suffixText;\n        optionLabel = (this.enableTranslateLabel && optionLabel && typeof optionLabel === 'string') ? this.translate.instant(optionLabel || ' ') : optionLabel;\n\n        // add to a temp array for joining purpose and filter out empty text\n        const tmpOptionArray = [prefixText, labelText, suffixText].filter((text) => text);\n        let optionText = tmpOptionArray.join(separatorBetweenLabels);\n\n        // if user specifically wants to render html text, he needs to opt-in else it will stripped out by default\n        // also, the 3rd party lib will saninitze any html code unless it's encoded, so we'll do that\n        if (isRenderHtmlEnabled) {\n          // sanitize any unauthorized html tags like script and others\n          // for the remaining allowed tags we'll permit all attributes\n          const sanitizedText = DOMPurify.sanitize(optionText, sanitizedOptions);\n          optionText = htmlEncode(sanitizedText);\n        }\n\n        // html text of each select option\n        options += `<option value=\"${option[this.valueName]}\" label=\"${optionLabel}\" ${selected}>${optionText}</option>`;\n\n        // if there's at least 1 search term found, we will add the \"filled\" class for styling purposes\n        if (selected) {\n          this.isFilled = true;\n        }\n      });\n    }\n\n    return `<select class=\"ms-filter search-filter filter-${fieldId}\" ${this.isMultipleSelect ? 'multiple=\"multiple\"' : ''}>${options}</select>`;\n  }\n\n  /** Create a blank entry that can be added to the collection. It will also reuse the same customStructure if need be */\n  protected createBlankEntry() {\n    const blankEntry = {\n      [this.labelName]: '',\n      [this.valueName]: ''\n    };\n    if (this.labelPrefixName) {\n      blankEntry[this.labelPrefixName] = '';\n    }\n    if (this.labelSuffixName) {\n      blankEntry[this.labelSuffixName] = '';\n    }\n    return blankEntry;\n  }\n\n  /**\n   * From the html template string, create a DOM element\n   * Subscribe to the onClose event and run the callback when that happens\n   * @param filterTemplate\n   */\n  protected createDomElement(filterTemplate: string) {\n    const fieldId = this.columnDef && this.columnDef.id;\n\n    // provide the name attribute to the DOM element which will be needed to auto-adjust drop position (dropup / dropdown)\n    this.elementName = `filter-${fieldId}`;\n    this.defaultOptions.name = this.elementName;\n\n    const $headerElm = this.grid.getHeaderRowColumn(fieldId);\n    $($headerElm).empty();\n\n    // create the DOM element & add an ID and filter class\n    this.$filterElm = $(filterTemplate);\n    if (typeof this.$filterElm.multipleSelect !== 'function') {\n      throw new Error(`multiple-select.js was not found, make sure to modify your \"angular-cli.json\" file and include \"../node_modules/angular-slickgrid/lib/multiple-select/multiple-select.js\" and it's css or SASS file`);\n    }\n    this.$filterElm.attr('id', this.elementName);\n    this.$filterElm.data('columnId', fieldId);\n\n    // if there's a search term, we will add the \"filled\" class for styling purposes\n    if (this.isFilled) {\n      this.$filterElm.addClass('filled');\n    }\n\n    // append the new DOM element to the header row\n    if (this.$filterElm && typeof this.$filterElm.appendTo === 'function') {\n      this.$filterElm.appendTo($headerElm);\n    }\n\n    // merge options & attach multiSelect\n    const elementOptions: MultipleSelectOption = { ...this.defaultOptions, ...this.columnFilter.filterOptions };\n    this.filterElmOptions = { ...this.defaultOptions, ...elementOptions };\n    this.$filterElm = this.$filterElm.multipleSelect(this.filterElmOptions);\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { CollectionService } from './../services/collection.service';\r\nimport { SelectFilter } from './selectFilter';\r\n\r\nexport class MultipleSelectFilter extends SelectFilter {\r\n  /**\r\n   * Initialize the Filter\r\n   */\r\n  constructor(protected translate: TranslateService, protected collectionService: CollectionService) {\r\n    super(translate, collectionService, true);\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\nimport {\n  Column,\n  Filter,\n  FilterArguments,\n  FilterCallback,\n  OperatorType,\n  OperatorString,\n  SearchTerm,\n} from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\nexport class NativeSelectFilter implements Filter {\n  private _clearFilterTriggered = false;\n  $filterElm: any;\n  grid: any;\n  searchTerms: SearchTerm[];\n  columnDef: Column;\n  callback: FilterCallback;\n\n  constructor(private translate: TranslateService) {}\n\n  get operator(): OperatorType | OperatorString {\n    return (this.columnDef && this.columnDef.filter && this.columnDef.filter.operator) || OperatorType.equal;\n  }\n\n  /**\n   * Initialize the Filter\n   */\n  init(args: FilterArguments) {\n    this.grid = args.grid;\n    this.callback = args.callback;\n    this.columnDef = args.columnDef;\n    this.searchTerms = args.searchTerms || [];\n\n    // filter input can only have 1 search term, so we will use the 1st array index if it exist\n    let searchTerm = (Array.isArray(this.searchTerms) && this.searchTerms[0]) || '';\n    if (typeof searchTerm === 'boolean' || typeof searchTerm === 'number') {\n      searchTerm = `${searchTerm}`;\n    }\n\n    // step 1, create HTML string template\n    const filterTemplate = this.buildTemplateHtmlString();\n\n    // step 2, create the DOM Element of the filter & initialize it if searchTerm is filled\n    this.$filterElm = this.createDomElement(filterTemplate, searchTerm);\n\n    // step 3, subscribe to the change event and run the callback when that happens\n    // also add/remove \"filled\" class for styling purposes\n    this.$filterElm.change((e: any) => {\n      const value = e && e.target && e.target.value || '';\n      if (this._clearFilterTriggered) {\n        this.callback(e, { columnDef: this.columnDef, clearFilterTriggered: this._clearFilterTriggered });\n        this._clearFilterTriggered = false; // reset flag for next use\n        this.$filterElm.removeClass('filled');\n      } else {\n        this.$filterElm.addClass('filled');\n        this.callback(e, { columnDef: this.columnDef, operator: this.operator, searchTerms: [value] });\n      }\n    });\n  }\n\n  /**\n   * Clear the filter values\n   */\n  clear() {\n    if (this.$filterElm) {\n      this._clearFilterTriggered = true;\n      this.searchTerms = [];\n      this.$filterElm.val('');\n      this.$filterElm.trigger('change');\n    }\n  }\n\n  /**\n   * destroy the filter\n   */\n  destroy() {\n    if (this.$filterElm) {\n      this.$filterElm.off('change').remove();\n    }\n  }\n\n  /**\n   * Set value(s) on the DOM element\n   */\n  setValues(values: SearchTerm | SearchTerm[]) {\n    if (values) {\n      this.$filterElm.val(values);\n    }\n  }\n\n  //\n  // private functions\n  // ------------------\n\n  private buildTemplateHtmlString() {\n    if (!this.columnDef || !this.columnDef.filter || !this.columnDef.filter.collection) {\n      throw new Error(`[Angular-SlickGrid] You need to pass a \"collection\" for the Select Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.select, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);\n    }\n\n    const fieldId = this.columnDef && this.columnDef.id;\n    const optionCollection = this.columnDef.filter.collection || [];\n    const labelName = (this.columnDef.filter.customStructure) ? this.columnDef.filter.customStructure.label : 'label';\n    const valueName = (this.columnDef.filter.customStructure) ? this.columnDef.filter.customStructure.value : 'value';\n\n    let options = '';\n\n    // collection could be an Array of Strings OR Objects\n    if (optionCollection.every(x => typeof x === 'string')) {\n      optionCollection.forEach((option: string) => {\n        options += `<option value=\"${option}\" label=\"${option}\">${option}</option>`;\n      });\n    } else {\n      optionCollection.forEach((option: any) => {\n        if (!option || (option[labelName] === undefined && option.labelKey === undefined)) {\n          throw new Error(`A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.select, collection: [ { value: '1', label: 'One' } ]')`);\n        }\n        const labelKey = option.labelKey || option[labelName];\n        const textLabel = ((option.labelKey || this.columnDef.filter.enableTranslateLabel) && this.translate && typeof this.translate.instant === 'function') ? this.translate.instant(labelKey || ' ') : labelKey;\n        options += `<option value=\"${option[valueName]}\">${textLabel}</option>`;\n      });\n    }\n    return `<select class=\"form-control search-filter filter-${fieldId}\">${options}</select>`;\n  }\n\n  /**\n   * From the html template string, create a DOM element\n   * @param filterTemplate\n   */\n  private createDomElement(filterTemplate: string, searchTerm?: SearchTerm) {\n    const fieldId = this.columnDef && this.columnDef.id;\n    const $headerElm = this.grid.getHeaderRowColumn(fieldId);\n    $($headerElm).empty();\n\n    // create the DOM element & add an ID and filter class\n    const $filterElm = $(filterTemplate);\n    const searchTermInput = (searchTerm || '') as string;\n\n    $filterElm.val(searchTermInput);\n    $filterElm.attr('id', `filter-${fieldId}`);\n    $filterElm.data('columnId', fieldId);\n\n    // append the new DOM element to the header row\n    if ($filterElm && typeof $filterElm.appendTo === 'function') {\n      $filterElm.appendTo($headerElm);\n    }\n\n    return $filterElm;\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\r\nimport { CollectionService } from './../services/collection.service';\r\nimport { SelectFilter } from './selectFilter';\r\n\r\nexport class SingleSelectFilter extends SelectFilter {\r\n  /**\r\n   * Initialize the Filter\r\n   */\r\n  constructor(protected translate: TranslateService, protected collectionService: CollectionService) {\r\n    super(translate, collectionService, false);\r\n  }\r\n}\r\n","import {\n  Column,\n  ColumnFilter,\n  Filter,\n  FilterArguments,\n  FilterCallback,\n  OperatorType,\n  OperatorString,\n  SearchTerm,\n} from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\nconst DEFAULT_MIN_VALUE = 0;\nconst DEFAULT_MAX_VALUE = 100;\nconst DEFAULT_STEP = 1;\n\nexport class SliderFilter implements Filter {\n  private _clearFilterTriggered = false;\n  private _elementRangeInputId: string;\n  private _elementRangeOutputId: string;\n  private $filterElm: any;\n  grid: any;\n  searchTerms: SearchTerm[];\n  columnDef: Column;\n  callback: FilterCallback;\n\n  /** Getter for the Filter Generic Params */\n  private get filterParams(): any {\n    return this.columnDef && this.columnDef.filter && this.columnDef.filter.params || {};\n  }\n\n  /** Getter for the `filter` properties */\n  private get filterProperties(): ColumnFilter {\n    return this.columnDef && this.columnDef.filter;\n  }\n\n  get operator(): OperatorType | OperatorString {\n    return (this.columnDef && this.columnDef.filter && this.columnDef.filter.operator) || OperatorType.equal;\n  }\n\n  /**\n   * Initialize the Filter\n   */\n  init(args: FilterArguments) {\n    if (!args) {\n      throw new Error('[Angular-SlickGrid] A filter must always have an \"init()\" with valid arguments.');\n    }\n    this.grid = args.grid;\n    this.callback = args.callback;\n    this.columnDef = args.columnDef;\n    this.searchTerms = args.searchTerms || [];\n\n    // define the input & slider number IDs\n    this._elementRangeInputId = `rangeInput_${this.columnDef.field}`;\n    this._elementRangeOutputId = `rangeOutput_${this.columnDef.field}`;\n\n    // filter input can only have 1 search term, so we will use the 1st array index if it exist\n    const searchTerm = (Array.isArray(this.searchTerms) && this.searchTerms[0]) || '';\n\n    // step 1, create HTML string template\n    const filterTemplate = this.buildTemplateHtmlString();\n\n    // step 2, create the DOM Element of the filter & initialize it if searchTerm is filled\n    this.$filterElm = this.createDomElement(filterTemplate, searchTerm);\n\n    // step 3, subscribe to the change event and run the callback when that happens\n    // also add/remove \"filled\" class for styling purposes\n    this.$filterElm.change((e: any) => {\n      const value = e && e.target && e.target.value || '';\n      if (this._clearFilterTriggered) {\n        this.callback(e, { columnDef: this.columnDef, clearFilterTriggered: this._clearFilterTriggered });\n        this._clearFilterTriggered = false; // reset flag for next use\n        this.$filterElm.removeClass('filled');\n      } else {\n        this.$filterElm.addClass('filled');\n        this.callback(e, { columnDef: this.columnDef, operator: this.operator, searchTerms: [value] });\n      }\n    });\n\n    // if user chose to display the slider number on the right side, then update it every time it changes\n    // we need to use both \"input\" and \"change\" event to be all cross-browser\n    if (!this.filterParams.hideSliderNumber) {\n      this.$filterElm.on('input change', (e: { target: HTMLInputElement }) => {\n        const value = e && e.target && e.target.value || '';\n        if (value) {\n          document.getElementById(this._elementRangeOutputId).innerHTML = value;\n        }\n      });\n    }\n  }\n\n  /**\n   * Clear the filter value\n   */\n  clear() {\n    if (this.$filterElm) {\n      this._clearFilterTriggered = true;\n      this.searchTerms = [];\n      const clearedValue = this.filterParams.hasOwnProperty('sliderStartValue') ? this.filterParams.sliderStartValue : DEFAULT_MIN_VALUE;\n      this.$filterElm.children('input').val(clearedValue);\n      this.$filterElm.children('div.input-group-addon.input-group-append').children().html(clearedValue);\n      this.$filterElm.trigger('change');\n    }\n  }\n\n  /**\n   * destroy the filter\n   */\n  destroy() {\n    if (this.$filterElm) {\n      this.$filterElm.off('change').remove();\n    }\n  }\n\n  /**\n   * Set value(s) on the DOM element\n   */\n  setValues(values: SearchTerm) {\n    if (values) {\n      this.$filterElm.val(values);\n    }\n  }\n\n  //\n  // private functions\n  // ------------------\n\n  /**\n   * Create the HTML template as a string\n   */\n  private buildTemplateHtmlString() {\n    const fieldId = this.columnDef && this.columnDef.id;\n    const minValue = this.filterProperties.hasOwnProperty('minValue') ? this.filterProperties.minValue : DEFAULT_MIN_VALUE;\n    const maxValue = this.filterProperties.hasOwnProperty('maxValue') ? this.filterProperties.maxValue : DEFAULT_MAX_VALUE;\n    const defaultValue = this.filterParams.hasOwnProperty('sliderStartValue') ? this.filterParams.sliderStartValue : minValue;\n    const step = this.filterProperties.hasOwnProperty('valueStep') ? this.filterProperties.valueStep : DEFAULT_STEP;\n\n    if (this.filterParams.hideSliderNumber) {\n      return `\n      <div class=\"search-filter filter-${fieldId}\">\n        <input type=\"range\" id=\"${this._elementRangeInputId}\"\n          name=\"${this._elementRangeInputId}\"\n          defaultValue=\"${defaultValue}\" min=\"${minValue}\" max=\"${maxValue}\" step=\"${step}\"\n          class=\"form-control slider-filter-input range\" />\n      </div>`;\n    }\n\n    return `\n      <div class=\"input-group search-filter filter-${fieldId}\">\n        <input type=\"range\" id=\"${this._elementRangeInputId}\"\n          name=\"${this._elementRangeInputId}\"\n          defaultValue=\"${defaultValue}\" min=\"${minValue}\" max=\"${maxValue}\" step=\"${step}\"\n          class=\"form-control slider-filter-input range\" />\n        <div class=\"input-group-addon input-group-append slider-value\">\n          <span class=\"input-group-text\" id=\"${this._elementRangeOutputId}\">${defaultValue}</span>\n        </div>\n      </div>`;\n  }\n\n  /**\n   * From the html template string, create a DOM element\n   * @param filterTemplate\n   */\n  private createDomElement(filterTemplate: string, searchTerm?: SearchTerm) {\n    const fieldId = this.columnDef && this.columnDef.id;\n    const $headerElm = this.grid.getHeaderRowColumn(fieldId);\n    $($headerElm).empty();\n\n    // create the DOM element & add an ID and filter class\n    const $filterElm = $(filterTemplate);\n    const searchTermInput = (searchTerm || '0') as string;\n\n    $filterElm.children('input').val(searchTermInput);\n    $filterElm.children('div.input-group-addon.input-group-append').children().html(searchTermInput);\n    $filterElm.attr('id', `filter-${fieldId}`);\n    $filterElm.data('columnId', fieldId);\n\n    // if there's a search term, we will add the \"filled\" class for styling purposes\n    if (searchTerm) {\n      $filterElm.addClass('filled');\n    }\n\n    // append the new DOM element to the header row\n    if ($filterElm && typeof $filterElm.appendTo === 'function') {\n      $filterElm.appendTo($headerElm);\n    }\n\n    return $filterElm;\n  }\n}\n","import { Column, Filter } from './../models/index';\r\nimport { CompoundDateFilter } from './compoundDateFilter';\r\nimport { CompoundInputFilter } from './compoundInputFilter';\r\nimport { CompoundInputNumberFilter } from './compoundInputNumberFilter';\r\nimport { CompoundInputPasswordFilter } from './compoundInputPasswordFilter';\r\nimport { CompoundSliderFilter } from './compoundSliderFilter';\r\nimport { InputFilter } from './inputFilter';\r\nimport { InputNumberFilter } from './inputNumberFilter';\r\nimport { InputPasswordFilter } from './inputPasswordFilter';\r\nimport { MultipleSelectFilter } from './multipleSelectFilter';\r\nimport { NativeSelectFilter } from './nativeSelectFilter';\r\nimport { SingleSelectFilter } from './singleSelectFilter';\r\nimport { SliderFilter } from './sliderFilter';\r\n\r\nexport const Filters = {\r\n  /** Compound Date Filter (compound of Operator + Date picker) */\r\n  compoundDate: CompoundDateFilter,\r\n\r\n  /** Alias to compoundInputText to Compound Input Filter (compound of Operator + Input Text) */\r\n  compoundInput: CompoundInputFilter,\r\n\r\n  /** Compound Input Number Filter (compound of Operator + Input of type Number) */\r\n  compoundInputNumber: CompoundInputNumberFilter,\r\n\r\n  /** Compound Input Password Filter (compound of Operator + Input of type Password, also note that only the text shown in the UI will be masked, filter query is still plain text) */\r\n  compoundInputPassword: CompoundInputPasswordFilter,\r\n\r\n  /** Compound Input Text Filter (compound of Operator + Input Text) */\r\n  compoundInputText: CompoundInputFilter,\r\n\r\n  /** Compound Slider Filter (compound of Operator + Slider) */\r\n  compoundSlider: CompoundSliderFilter,\r\n\r\n  /** Alias to inputText, input type text filter */\r\n  input: InputFilter,\r\n\r\n  /** Input Filter of type Number */\r\n  inputNumber: InputNumberFilter,\r\n\r\n  /** Input Filter of type Password (note that only the text shown in the UI will be masked, filter query is still plain text) */\r\n  inputPassword: InputPasswordFilter,\r\n\r\n  /** Default Filter, input type text filter */\r\n  inputText: InputFilter,\r\n\r\n  /** Multiple Select filter, which uses 3rd party lib \"multiple-select.js\" */\r\n  multipleSelect: MultipleSelectFilter,\r\n\r\n  /** Select filter, which uses native DOM element select */\r\n  select: NativeSelectFilter,\r\n\r\n  /** Single Select filter, which uses 3rd party lib \"multiple-select.js\" */\r\n  singleSelect: SingleSelectFilter,\r\n\r\n  /** Slider Filter */\r\n  slider: SliderFilter,\r\n};\r\n","import { DelimiterType, FileType, GridOption } from './models/index';\r\nimport { Filters } from './filters/index';\r\n\r\n/**\r\n * Options that can be passed to the Bootstrap-Datetimepicker directly\r\n */\r\nexport const GlobalGridOptions: GridOption = {\r\n  alwaysShowVerticalScroll: true,\r\n  autoEdit: false,\r\n  asyncEditorLoading: false,\r\n  autoFitColumnsOnFirstLoad: true,\r\n  autoResize: {\r\n    bottomPadding: 20,\r\n    minHeight: 180,\r\n    minWidth: 300,\r\n    sidePadding: 0\r\n  },\r\n  cellHighlightCssClass: 'slick-cell-modified',\r\n  checkboxSelector: {\r\n    cssClass: 'slick-cell-checkboxsel'\r\n  },\r\n  columnPicker: {\r\n    hideForceFitButton: false,\r\n    hideSyncResizeButton: true\r\n  },\r\n  datasetIdPropertyName: 'id',\r\n  defaultFilterPlaceholder: '&#128269;',\r\n  defaultFilter: Filters.input,\r\n  editable: false,\r\n  enableAutoResize: true,\r\n  enableAutoSizeColumns: true,\r\n  enableCellNavigation: false,\r\n  enableColumnPicker: true,\r\n  enableColumnReorder: true,\r\n  enableExport: true,\r\n  enableGridMenu: true,\r\n  enableHeaderMenu: true,\r\n  enableMouseHoverHighlightRow: true,\r\n  enableSorting: true,\r\n  enableTextSelectionOnCells: true,\r\n  explicitInitialization: true,\r\n  exportOptions: {\r\n    delimiter: DelimiterType.comma,\r\n    exportWithFormatter: false,\r\n    filename: 'export',\r\n    format: FileType.csv,\r\n    groupingAggregatorRowText: '',\r\n    sanitizeDataExport: false,\r\n    useUtf8WithBom: true\r\n  },\r\n  forceFitColumns: false,\r\n  gridMenu: {\r\n    hideClearAllFiltersCommand: false,\r\n    hideClearAllSortingCommand: false,\r\n    hideExportCsvCommand: false,\r\n    hideExportTextDelimitedCommand: true,\r\n    hideForceFitButton: false,\r\n    hideRefreshDatasetCommand: false,\r\n    hideSyncResizeButton: true,\r\n    hideToggleFilterCommand: false,\r\n    hideTogglePreHeaderCommand: false,\r\n    iconCssClass: 'fa fa-bars',\r\n    iconClearAllFiltersCommand: 'fa fa-filter text-danger',\r\n    iconClearAllSortingCommand: 'fa fa-unsorted text-danger',\r\n    iconExportCsvCommand: 'fa fa-download',\r\n    iconExportTextDelimitedCommand: 'fa fa-download',\r\n    iconRefreshDatasetCommand: 'fa fa-refresh',\r\n    iconToggleFilterCommand: 'fa fa-random',\r\n    iconTogglePreHeaderCommand: 'fa fa-random',\r\n    menuWidth: 16,\r\n    resizeOnShowHeaderRow: true\r\n  },\r\n  headerMenu: {\r\n    autoAlign: true,\r\n    autoAlignOffset: 12,\r\n    minWidth: 140,\r\n    iconSortAscCommand: 'fa fa-sort-asc',\r\n    iconSortDescCommand: 'fa fa-sort-desc',\r\n    iconColumnHideCommand: 'fa fa-times',\r\n    hideColumnHideCommand: false,\r\n    hideSortCommands: false\r\n  },\r\n  headerRowHeight: 35,\r\n  multiColumnSort: true,\r\n  numberedMultiColumnSort: true,\r\n  tristateMultiColumnSort: false,\r\n  sortColNumberInSeparateSpan: true,\r\n  suppressActiveCellChangeOnEdit: true,\r\n  pagination: {\r\n    pageSizes: [10, 15, 20, 25, 30, 40, 50, 75, 100],\r\n    pageSize: 25,\r\n    totalItems: 0\r\n  },\r\n  rowHeight: 35,\r\n  topPanelHeight: 35\r\n};\r\n","import { GlobalGridOptions } from './global-grid-options';\r\n\r\nexport class SlickgridConfig {\r\n  options: any;\r\n\r\n  constructor() {\r\n    this.options = GlobalGridOptions;\r\n  }\r\n}\r\n","import { Injector, Injectable } from '@angular/core';\r\nimport { Filter } from '../models/filter.interface';\r\nimport { ColumnFilter } from '../models';\r\nimport { SlickgridConfig } from '../slickgrid-config';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CollectionService } from '../services/collection.service';\r\n\r\n@Injectable()\r\nexport class FilterFactory {\r\n  /**\r\n   * The options from the SlickgridConfig\r\n   */\r\n  private _options: any;\r\n\r\n  constructor(private config: SlickgridConfig, private translate: TranslateService, private collectionService: CollectionService) {\r\n    this._options = this.config.options;\r\n  }\r\n\r\n  // Uses the User model to create a new User\r\n  createFilter(columnFilter: ColumnFilter | undefined): Filter | undefined {\r\n    let filter: Filter | undefined;\r\n\r\n    if (columnFilter && columnFilter.model) {\r\n      filter = typeof columnFilter.model === 'function' ? new columnFilter.model(this.translate, this.collectionService) : columnFilter.model;\r\n    }\r\n\r\n    // fallback to the default filter\r\n    if (!filter && this._options.defaultFilter) {\r\n      filter = new this._options.defaultFilter(this.translate, this.collectionService);\r\n    }\r\n\r\n    return filter;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { FilterConditions } from './../filter-conditions';\nimport {\n  Column,\n  ColumnFilter,\n  ColumnFilters,\n  Filter,\n  FilterArguments,\n  FilterCallbackArg,\n  FieldType,\n  GridOption,\n  OperatorType,\n  CurrentFilter,\n  SearchTerm,\n  SlickEvent,\n  OperatorString\n} from './../models/index';\nimport { castToPromise, getDescendantProperty } from './utilities';\nimport { FilterFactory } from '../filters/filterFactory';\nimport { Subject } from 'rxjs';\nimport * as isequal_ from 'lodash.isequal';\nconst isequal = isequal_; // patch to fix rollup to work\n\n// using external non-typed js libraries\ndeclare var Slick: any;\ndeclare var $: any;\n\n@Injectable()\nexport class FilterService {\n  private _eventHandler = new Slick.EventHandler();\n  private _slickSubscriber: SlickEvent;\n  private _filters: any[] = [];\n  private _columnFilters: ColumnFilters = {};\n  private _dataView: any;\n  private _grid: any;\n  private _onFilterChangedOptions: any;\n  onFilterChanged = new Subject<CurrentFilter[]>();\n  onFilterCleared = new Subject<boolean>();\n\n  constructor(private filterFactory: FilterFactory) { }\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  /** Getter for the Column Definitions pulled through the Grid Object */\n  private get _columnDefinitions(): Column[] {\n    return (this._grid && this._grid.getColumns) ? this._grid.getColumns() : [];\n  }\n\n  init(grid: any): void {\n    this._grid = grid;\n  }\n\n  /**\n   * Attach a backend filter hook to the grid\n   * @param grid SlickGrid Grid object\n   */\n  attachBackendOnFilter(grid: any) {\n    this._filters = [];\n    this._slickSubscriber = new Slick.Event();\n\n    // subscribe to the SlickGrid event and call the backend execution\n    this._slickSubscriber.subscribe(this.attachBackendOnFilterSubscribe.bind(this));\n\n    // subscribe to SlickGrid onHeaderRowCellRendered event to create filter template\n    this._eventHandler.subscribe(grid.onHeaderRowCellRendered, (e: Event, args: any) => {\n      this.addFilterTemplateToHeaderRow(args);\n    });\n  }\n\n  async attachBackendOnFilterSubscribe(event: Event, args: any) {\n    if (!args || !args.grid) {\n      throw new Error('Something went wrong when trying to attach the \"attachBackendOnFilterSubscribe(event, args)\" function, it seems that \"args\" is not populated correctly');\n    }\n    const backendApi = this._gridOptions.backendServiceApi;\n    if (!backendApi || !backendApi.process || !backendApi.service) {\n      throw new Error(`BackendServiceApi requires at least a \"process\" function and a \"service\" defined`);\n    }\n\n    try {\n      // keep start time & end timestamps & return it after process execution\n      const startTime = new Date();\n\n      // run a preProcess callback if defined\n      if (backendApi.preProcess) {\n        backendApi.preProcess();\n      }\n\n      // call the service to get a query back\n      const query = await backendApi.service.processOnFilterChanged(event, args);\n\n      // emit an onFilterChanged event\n      if (args && !args.clearFilterTriggered) {\n        this.emitFilterChanged('remote');\n      }\n\n      // the process could be an Observable (like HttpClient) or a Promise\n      // in any case, we need to have a Promise so that we can await on it (if an Observable, convert it to Promise)\n      const observableOrPromise = backendApi.process(query);\n      const processResult = await castToPromise(observableOrPromise);\n      const endTime = new Date();\n\n      // from the result, call our internal post process to update the Dataset and Pagination info\n      if (processResult && backendApi.internalPostProcess) {\n        backendApi.internalPostProcess(processResult);\n      }\n\n      // send the response process to the postProcess callback\n      if (backendApi.postProcess !== undefined) {\n        if (processResult instanceof Object) {\n          processResult.statistics = {\n            startTime,\n            endTime,\n            executionTime: endTime.valueOf() - startTime.valueOf(),\n            totalItemCount: this._gridOptions && this._gridOptions.pagination && this._gridOptions.pagination.totalItems\n          };\n        }\n        backendApi.postProcess(processResult);\n      }\n    } catch (e) {\n      if (backendApi && backendApi.onError) {\n        backendApi.onError(e);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Attach a local filter hook to the grid\n   * @param grid SlickGrid Grid object\n   * @param dataView\n   */\n  attachLocalOnFilter(grid: any, dataView: any) {\n    this._filters = [];\n    this._dataView = dataView;\n    this._slickSubscriber = new Slick.Event();\n\n    dataView.setFilterArgs({ columnFilters: this._columnFilters, grid: this._grid });\n    dataView.setFilter(this.customLocalFilter.bind(this, dataView));\n\n    this._slickSubscriber.subscribe((e: any, args: any) => {\n      const columnId = args.columnId;\n      if (columnId != null) {\n        dataView.refresh();\n      }\n      if (args && !args.clearFilterTriggered) {\n        this.emitFilterChanged('local');\n      }\n    });\n\n    // subscribe to SlickGrid onHeaderRowCellRendered event to create filter template\n    this._eventHandler.subscribe(grid.onHeaderRowCellRendered, (e: Event, args: any) => {\n      this.addFilterTemplateToHeaderRow(args);\n    });\n  }\n\n  /** Clear the search filters (below the column titles) */\n  clearFilters() {\n    this._filters.forEach((filter: Filter) => {\n      if (filter && filter.clear) {\n        // clear element and trigger a change\n        filter.clear();\n      }\n    });\n\n    // we need to loop through all columnFilters and delete them 1 by 1\n    // only trying to clear columnFilter (without looping through) would not trigger a dataset change\n    for (const columnId in this._columnFilters) {\n      if (columnId && this._columnFilters[columnId]) {\n        delete this._columnFilters[columnId];\n      }\n    }\n\n    // we also need to refresh the dataView and optionally the grid (it's optional since we use DataView)\n    if (this._dataView) {\n      this._dataView.refresh();\n      this._grid.invalidate();\n      this._grid.render();\n    }\n\n    // emit an event when filters are all cleared\n    this.onFilterCleared.next(true);\n  }\n\n  customLocalFilter(dataView: any, item: any, args: any) {\n    for (const columnId of Object.keys(args.columnFilters)) {\n      const columnFilter = args.columnFilters[columnId];\n      const columnIndex = args.grid.getColumnIndex(columnId);\n      const columnDef = args.grid.getColumns()[columnIndex];\n      if (!columnDef) {\n        return false;\n      }\n\n      const fieldName = columnDef.queryField || columnDef.queryFieldFilter || columnDef.field;\n      const fieldType = columnDef.type || FieldType.string;\n      const filterSearchType = (columnDef.filterSearchType) ? columnDef.filterSearchType : null;\n      let cellValue = item[fieldName];\n\n      // when item is a complex object (dot \".\" notation), we need to filter the value contained in the object tree\n      if (fieldName.indexOf('.') >= 0) {\n        cellValue = getDescendantProperty(item, fieldName);\n      }\n\n      // if we find searchTerms use them but make a deep copy so that we don't affect original array\n      // we might have to overwrite the value(s) locally that are returned\n      // e.g: we don't want to operator within the search value, since it will fail filter condition check trigger afterward\n      const searchValues = (columnFilter && columnFilter.searchTerms) ? [...columnFilter.searchTerms] : null;\n\n      let fieldSearchValue = (Array.isArray(searchValues) && searchValues.length === 1) ? searchValues[0] : '';\n      fieldSearchValue = '' + fieldSearchValue; // make sure it's a string\n\n      const matches = fieldSearchValue.match(/^([<>!=\\*]{0,2})(.*[^<>!=\\*])([\\*]?)$/); // group 1: Operator, 2: searchValue, 3: last char is '*' (meaning starts with, ex.: abc*)\n      let operator = columnFilter.operator || ((matches) ? matches[1] : '');\n      const searchTerm = (!!matches) ? matches[2] : '';\n      const lastValueChar = (!!matches) ? matches[3] : (operator === '*z' ? '*' : '');\n\n      if (searchValues && searchValues.length > 1) {\n        fieldSearchValue = searchValues.join(',');\n      } else if (typeof fieldSearchValue === 'string') {\n        // escaping the search value\n        fieldSearchValue = fieldSearchValue.replace(`'`, `''`); // escape single quotes by doubling them\n        if (operator === '*' || operator === 'a*' || operator === '*z' || lastValueChar === '*') {\n          operator = (operator === '*' || operator === '*z') ? OperatorType.endsWith : OperatorType.startsWith;\n        }\n      }\n\n      // no need to query if search value is empty\n      if (searchTerm === '' && (!searchValues || (Array.isArray(searchValues) && searchValues.length === 0))) {\n        return true;\n      }\n\n      // if search value has a regex match we will only keep the value without the operator\n      // in this case we need to overwrite the returned search values to truncate operator from the string search\n      if (Array.isArray(matches) && matches.length >= 1 && (Array.isArray(searchValues) && searchValues.length === 1)) {\n        searchValues[0] = searchTerm;\n      }\n\n      // filter search terms should always be string type (even though we permit the end user to input numbers)\n      // so make sure each term are strings, if user has some default search terms, we will cast them to string\n      if (searchValues && Array.isArray(searchValues)) {\n        for (let k = 0, ln = searchValues.length; k < ln; k++) {\n          // make sure all search terms are strings\n          searchValues[k] = ((searchValues[k] === undefined || searchValues[k] === null) ? '' : searchValues[k]) + '';\n        }\n      }\n\n      // when using localization (i18n), we should use the formatter output to search as the new cell value\n      if (columnDef && columnDef.params && columnDef.params.useFormatterOuputToFilter) {\n        const rowIndex = (dataView && typeof dataView.getIdxById === 'function') ? dataView.getIdxById(item.id) : 0;\n        cellValue = columnDef.formatter(rowIndex, columnIndex, cellValue, columnDef, item, this._grid);\n      }\n\n      // make sure cell value is always a string\n      if (typeof cellValue === 'number') {\n        cellValue = cellValue.toString();\n      }\n\n      const conditionOptions = {\n        fieldType,\n        searchTerms: searchValues,\n        cellValue,\n        operator,\n        cellValueLastChar: lastValueChar,\n        filterSearchType\n      };\n\n      if (!FilterConditions.executeMappedCondition(conditionOptions)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  dispose() {\n    this.disposeColumnFilters();\n\n    // unsubscribe all SlickGrid events\n    this._eventHandler.unsubscribeAll();\n\n    // unsubscribe local event\n    if (this._slickSubscriber && typeof this._slickSubscriber.unsubscribe === 'function') {\n      this._slickSubscriber.unsubscribe();\n    }\n  }\n\n  /**\n   * Dispose of the filters, since it's a singleton, we don't want to affect other grids with same columns\n   */\n  disposeColumnFilters() {\n    // we need to loop through all columnFilters and delete them 1 by 1\n    // only trying to make columnFilter an empty (without looping) would not trigger a dataset change\n    for (const columnId in this._columnFilters) {\n      if (columnId && this._columnFilters[columnId]) {\n        delete this._columnFilters[columnId];\n      }\n    }\n\n    // also destroy each Filter instances\n    this._filters.forEach((filter, index) => {\n      if (filter && filter.destroy) {\n        filter.destroy(true);\n      }\n    });\n  }\n\n  getColumnFilters() {\n    return this._columnFilters;\n  }\n\n  getCurrentLocalFilters(): CurrentFilter[] {\n    const currentFilters: CurrentFilter[] = [];\n    if (this._columnFilters) {\n      for (const colId of Object.keys(this._columnFilters)) {\n        const columnFilter = this._columnFilters[colId];\n        const columnDef = columnFilter.columnDef;\n        const filter = { columnId: colId || '' } as CurrentFilter;\n\n        if (columnFilter && columnFilter.searchTerms) {\n          filter.searchTerms = columnFilter.searchTerms;\n        }\n        if (columnFilter.operator) {\n          filter.operator = columnFilter.operator;\n        }\n        if (Array.isArray(filter.searchTerms) && filter.searchTerms.length > 0 && filter.searchTerms[0] !== '') {\n          currentFilters.push(filter);\n        }\n      }\n    }\n    return currentFilters;\n  }\n\n  callbackSearchEvent(e: Event | undefined, args: FilterCallbackArg) {\n    if (args) {\n      const searchTerm = ((e && e.target) ? (e.target as HTMLInputElement).value : undefined);\n      const searchTerms = (args.searchTerms && Array.isArray(args.searchTerms)) ? args.searchTerms : (searchTerm ? [searchTerm] : undefined);\n      const columnDef = args.columnDef || null;\n      const columnId = columnDef ? (columnDef.id || '') : '';\n      const operator = args.operator || undefined;\n      const hasSearchTerms = searchTerms && Array.isArray(searchTerms);\n      const termsCount = hasSearchTerms && searchTerms.length;\n      const oldColumnFilters = { ...this._columnFilters };\n\n      if (!hasSearchTerms || termsCount === 0 || (termsCount === 1 && searchTerms[0] === '')) {\n        // delete the property from the columnFilters when it becomes empty\n        // without doing this, it would leave an incorrect state of the previous column filters when filtering on another column\n        delete this._columnFilters[columnId];\n      } else {\n        const colId = '' + columnId as string;\n        const colFilter: ColumnFilter = {\n          columnId: colId,\n          columnDef,\n          searchTerms,\n        };\n        if (operator) {\n          colFilter.operator = operator;\n        }\n        this._columnFilters[colId] = colFilter;\n      }\n\n      // trigger an event only if Filters changed\n      if (!isequal(oldColumnFilters, this._columnFilters)) {\n        this.triggerEvent(this._slickSubscriber, {\n          clearFilterTriggered: args && args.clearFilterTriggered,\n          columnId,\n          columnDef: args.columnDef || null,\n          columnFilters: this._columnFilters,\n          operator,\n          searchTerms,\n          serviceOptions: this._onFilterChangedOptions,\n          grid: this._grid\n        }, e);\n      }\n    }\n  }\n\n  addFilterTemplateToHeaderRow(args: { column: Column; grid: any; node: any }) {\n    const columnDef = args.column;\n    const columnId = columnDef.id || '';\n\n    if (columnDef && columnId !== 'selector' && columnDef.filterable) {\n      let searchTerms: SearchTerm[] | undefined;\n      let operator: OperatorString | OperatorType;\n      const filter: Filter | undefined = this.filterFactory.createFilter(args.column.filter);\n      operator = (columnDef && columnDef.filter && columnDef.filter.operator) || (filter && filter.operator) || undefined;\n\n      if (this._columnFilters[columnDef.id]) {\n        searchTerms = this._columnFilters[columnDef.id].searchTerms || undefined;\n        operator = this._columnFilters[columnDef.id].operator || undefined;\n      } else if (columnDef.filter) {\n        // when hiding/showing (with Column Picker or Grid Menu), it will try to re-create yet again the filters (since SlickGrid does a re-render)\n        // because of that we need to first get searchTerm(s) from the columnFilters (that is what the user last entered)\n        searchTerms = columnDef.filter.searchTerms || undefined;\n        this.updateColumnFilters(searchTerms, columnDef, operator);\n      }\n\n      const filterArguments: FilterArguments = {\n        grid: this._grid,\n        operator,\n        searchTerms,\n        columnDef,\n        callback: this.callbackSearchEvent.bind(this)\n      };\n\n      if (filter) {\n        filter.init(filterArguments);\n        const filterExistIndex = this._filters.findIndex((filt) => filter.columnDef.name === filt.columnDef.name);\n\n        // add to the filters arrays or replace it when found\n        if (filterExistIndex === -1) {\n          this._filters.push(filter);\n        } else {\n          this._filters[filterExistIndex] = filter;\n        }\n\n        // when hiding/showing (with Column Picker or Grid Menu), it will try to re-create yet again the filters (since SlickGrid does a re-render)\n        // we need to also set again the values in the DOM elements if the values were set by a searchTerm(s)\n        if (searchTerms && filter.setValues) {\n          filter.setValues(searchTerms);\n        }\n      }\n    }\n  }\n\n  /**\n   * A simple function that is attached to the subscriber and emit a change when the sort is called.\n   * Other services, like Pagination, can then subscribe to it.\n   * @param sender\n   */\n  emitFilterChanged(sender: 'local' | 'remote') {\n    if (sender === 'remote' && this._gridOptions && this._gridOptions.backendServiceApi) {\n      let currentFilters: CurrentFilter[] = [];\n      const backendService = this._gridOptions.backendServiceApi.service;\n      if (backendService && backendService.getCurrentFilters) {\n        currentFilters = backendService.getCurrentFilters() as CurrentFilter[];\n      }\n      this.onFilterChanged.next(currentFilters);\n    } else if (sender === 'local') {\n      this.onFilterChanged.next(this.getCurrentLocalFilters());\n    }\n  }\n\n  /**\n   * When user passes an array of preset filters, we need to pre-populate each column filter searchTerm(s)\n   * The process is to loop through the preset filters array, find the associated column from columnDefinitions and fill in the filter object searchTerm(s)\n   * This is basically the same as if we would manually add searchTerm(s) to a column filter object in the column definition, but we do it programmatically.\n   * At the end of the day, when creating the Filter (DOM Element), it will use these searchTerm(s) so we can take advantage of that without recoding each Filter type (DOM element)\n   */\n  populateColumnFilterSearchTerms() {\n    if (this._gridOptions.presets && Array.isArray(this._gridOptions.presets.filters) && this._gridOptions.presets.filters.length > 0) {\n      const filters = this._gridOptions.presets.filters;\n      this._columnDefinitions.forEach((columnDef: Column) =>  {\n        // clear any columnDef searchTerms before applying Presets\n        if (columnDef.filter && columnDef.filter.searchTerms) {\n          delete columnDef.filter.searchTerms;\n        }\n\n        // from each presets, we will find the associated columnDef and apply the preset searchTerms & operator if there is\n        const columnPreset = filters.find((presetFilter: CurrentFilter) => {\n          return presetFilter.columnId === columnDef.id;\n        });\n        if (columnPreset && columnPreset.searchTerms && Array.isArray(columnPreset.searchTerms)) {\n          columnDef.filter = columnDef.filter || {};\n          columnDef.filter.operator = columnPreset.operator || columnDef.filter.operator || '';\n          columnDef.filter.searchTerms = columnPreset.searchTerms;\n        }\n      });\n    }\n  }\n\n  private updateColumnFilters(searchTerms: SearchTerm[] | undefined, columnDef: any, operator?: OperatorType | OperatorString) {\n    if (searchTerms && columnDef) {\n      // this._columnFilters.searchTerms = searchTerms;\n      this._columnFilters[columnDef.id] = {\n        columnId: columnDef.id,\n        columnDef,\n        searchTerms,\n        operator\n      };\n    }\n  }\n\n  private triggerEvent(slickEvent: any, args: any, e: any) {\n    slickEvent = slickEvent || new Slick.Event();\n\n    // event might have been created as a CustomEvent (e.g. CompoundDateFilter), without being a valid Slick.EventData.\n    // if so we will create a new Slick.EventData and merge it with that CustomEvent to avoid having SlickGrid errors\n    let event = e;\n    if (e && typeof e.isPropagationStopped !== 'function') {\n      event = $.extend({}, new Slick.EventData(), e);\n    }\n    slickEvent.notify(args, event, args.grid);\n  }\n}\n","import { SortDirectionNumber } from './../models/sortDirectionNumber.enum';\nimport { castToPromise } from './utilities';\nimport {\n  Column,\n  ColumnSort,\n  CurrentSorter,\n  FieldType,\n  GridOption,\n  SlickEvent,\n  SortDirection,\n  SortDirectionString\n} from './../models/index';\nimport { getDescendantProperty } from './utilities';\nimport { sortByFieldType } from '../sorters/sorterUtilities';\nimport { Subject } from 'rxjs';\n\n// using external non-typed js libraries\ndeclare var Slick: any;\n\nexport class SortService {\n  private _currentLocalSorters: CurrentSorter[] = [];\n  private _eventHandler: any = new Slick.EventHandler();\n  private _dataView: any;\n  private _grid: any;\n  private _slickSubscriber: SlickEvent;\n  private _isBackendGrid = false;\n  onSortChanged = new Subject<CurrentSorter[]>();\n  onSortCleared = new Subject<boolean>();\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  /** Getter for the Column Definitions pulled through the Grid Object */\n  private get _columnDefinitions(): Column[] {\n    return (this._grid && this._grid.getColumns) ? this._grid.getColumns() : [];\n  }\n\n  /**\n   * Attach a backend sort (single/multi) hook to the grid\n   * @param grid SlickGrid Grid object\n   * @param dataView SlickGrid DataView object\n   */\n  attachBackendOnSort(grid: any, dataView: any) {\n    this._isBackendGrid = true;\n    this._grid = grid;\n    this._dataView = dataView;\n    this._slickSubscriber = grid.onSort;\n\n    // subscribe to the SlickGrid event and call the backend execution\n    this._slickSubscriber.subscribe(this.onBackendSortChanged.bind(this));\n  }\n\n  async onBackendSortChanged(event: Event, args: any) {\n    if (!args || !args.grid) {\n      throw new Error('Something went wrong when trying to attach the \"onBackendSortChanged(event, args)\" function, it seems that \"args\" is not populated correctly');\n    }\n    const gridOptions: GridOption = args.grid.getOptions() || {};\n    const backendApi = gridOptions.backendServiceApi;\n\n    if (!backendApi || !backendApi.process || !backendApi.service) {\n      throw new Error(`BackendServiceApi requires at least a \"process\" function and a \"service\" defined`);\n    }\n\n    try {\n      // keep start time & end timestamps & return it after process execution\n      const startTime = new Date();\n\n      if (backendApi.preProcess) {\n        backendApi.preProcess();\n      }\n\n      const query = backendApi.service.processOnSortChanged(event, args);\n      this.emitSortChanged('remote');\n\n      // the process could be an Observable (like HttpClient) or a Promise\n      // in any case, we need to have a Promise so that we can await on it (if an Observable, convert it to Promise)\n      const observableOrPromise = backendApi.process(query);\n      const processResult = await castToPromise(observableOrPromise);\n      const endTime = new Date();\n\n      // from the result, call our internal post process to update the Dataset and Pagination info\n      if (processResult && backendApi.internalPostProcess) {\n        backendApi.internalPostProcess(processResult);\n      }\n\n      // send the response process to the postProcess callback\n      if (backendApi.postProcess) {\n        if (processResult instanceof Object) {\n          processResult.statistics = {\n            startTime,\n            endTime,\n            executionTime: endTime.valueOf() - startTime.valueOf(),\n            totalItemCount: this._gridOptions && this._gridOptions.pagination && this._gridOptions.pagination.totalItems\n          };\n        }\n        backendApi.postProcess(processResult);\n      }\n    } catch (e) {\n      if (backendApi && backendApi.onError) {\n        backendApi.onError(e);\n      } else {\n        throw e;\n      }\n    }\n  }\n\n  /**\n   * Attach a local sort (single/multi) hook to the grid\n   * @param grid SlickGrid Grid object\n   * @param gridOptions Grid Options object\n   * @param dataView\n   */\n  attachLocalOnSort(grid: any, dataView: any) {\n    this._isBackendGrid = false;\n    this._grid = grid;\n    this._dataView = dataView;\n    this._slickSubscriber = grid.onSort;\n\n    this._slickSubscriber.subscribe((e: any, args: any) => {\n      // multiSort and singleSort are not exactly the same, but we want to structure it the same for the (for loop) after\n      // also to avoid having to rewrite the for loop in the sort, we will make the singleSort an array of 1 object\n      const sortColumns = (args.multiColumnSort) ? args.sortCols : new Array({sortAsc: args.sortAsc, sortCol: args.sortCol});\n\n      // keep current sorters\n      this._currentLocalSorters = []; // reset current local sorters\n      if (Array.isArray(sortColumns)) {\n        sortColumns.forEach((sortColumn: { sortCol: Column, sortAsc: number }) => {\n          if (sortColumn.sortCol) {\n            this._currentLocalSorters.push({\n              columnId: sortColumn.sortCol.id,\n              direction: sortColumn.sortAsc ? SortDirection.ASC : SortDirection.DESC\n            });\n          }\n        });\n      }\n\n      this.onLocalSortChanged(grid, dataView, sortColumns);\n      this.emitSortChanged('local');\n    });\n  }\n\n  clearSorting() {\n    if (this._grid && this._gridOptions && this._dataView) {\n      // remove any sort icons (this setSortColumns function call really does only that)\n      this._grid.setSortColumns([]);\n\n      // we also need to trigger a sort change\n      // for a backend grid, we will trigger a backend sort changed with an empty sort columns array\n      // however for a local grid, we need to pass a sort column and so we will sort by the 1st column\n      if (this._isBackendGrid) {\n        this.onBackendSortChanged(undefined, { grid: this._grid, sortCols: [] });\n      } else {\n        if (this._columnDefinitions && Array.isArray(this._columnDefinitions)) {\n          this.onLocalSortChanged(this._grid, this._dataView, new Array({sortAsc: true, sortCol: this._columnDefinitions[0] }));\n        }\n      }\n    }\n    // set current sorter to empty & emit a sort changed event\n    this._currentLocalSorters = [];\n\n    // emit an event when filters are all cleared\n    this.onSortCleared.next(true);\n  }\n\n  getCurrentLocalSorters(): CurrentSorter[] {\n    return this._currentLocalSorters;\n  }\n\n  /**\n   * Get column sorts,\n   * If a column is passed as an argument, we won't add this column to our output array since it is already in the array\n   * We want to know the sort prior to calling the next sorting command\n   */\n  getPreviousColumnSorts(columnId?: string) {\n    // getSortColumns() only returns sortAsc & columnId, we want the entire column definition\n    const oldSortColumns = this._grid && this._grid.getSortColumns();\n\n    // get the column definition but only keep column which are not equal to our current column\n    if (Array.isArray(oldSortColumns)) {\n      const sortedCols = oldSortColumns.reduce((cols, col) => {\n        if (!columnId || col.columnId !== columnId) {\n          cols.push({ sortCol: this._columnDefinitions[this._grid.getColumnIndex(col.columnId)], sortAsc: col.sortAsc });\n        }\n        return cols;\n      }, []);\n\n      return sortedCols;\n    }\n    return [];\n  }\n\n  /**\n   * load any presets if there are any\n   * @param grid\n   * @param dataView\n   */\n  loadLocalPresets(grid: any, dataView: any) {\n    const sortCols: ColumnSort[] = [];\n    this._currentLocalSorters = []; // reset current local sorters\n    if (this._gridOptions && this._gridOptions.presets && this._gridOptions.presets.sorters) {\n      const sorters = this._gridOptions.presets.sorters;\n\n      sorters.forEach((presetSorting: CurrentSorter) => {\n        const gridColumn = this._columnDefinitions.find((col: Column) => col.id === presetSorting.columnId);\n        if (gridColumn) {\n          sortCols.push({\n            columnId: gridColumn.id,\n            sortAsc: ((presetSorting.direction.toUpperCase() === SortDirection.ASC) ? true : false),\n            sortCol: gridColumn\n          });\n\n          // keep current sorters\n          this._currentLocalSorters.push({\n            columnId: gridColumn.id + '',\n            direction: presetSorting.direction.toUpperCase() as SortDirectionString\n          });\n        }\n      });\n\n      if (sortCols.length > 0) {\n        this.onLocalSortChanged(grid, dataView, sortCols);\n        grid.setSortColumns(sortCols); // use this to add sort icon(s) in UI\n      }\n    }\n  }\n\n  onLocalSortChanged(grid: any, dataView: any, sortColumns: ColumnSort[]) {\n    if (grid && dataView) {\n      dataView.sort((dataRow1: any, dataRow2: any) => {\n        for (let i = 0, l = sortColumns.length; i < l; i++) {\n          const columnSortObj = sortColumns[i];\n          if (columnSortObj && columnSortObj.sortCol) {\n            const sortDirection = columnSortObj.sortAsc ? SortDirectionNumber.asc : SortDirectionNumber.desc;\n            const sortField = columnSortObj.sortCol.queryField || columnSortObj.sortCol.queryFieldFilter || columnSortObj.sortCol.field;\n            const fieldType = columnSortObj.sortCol.type || FieldType.string;\n            let value1 = dataRow1[sortField];\n            let value2 = dataRow2[sortField];\n\n            // when item is a complex object (dot \".\" notation), we need to filter the value contained in the object tree\n            if (sortField && sortField.indexOf('.') >= 0) {\n              value1 = getDescendantProperty(dataRow1, sortField);\n              value2 = getDescendantProperty(dataRow2, sortField);\n            }\n\n            const sortResult = sortByFieldType(value1, value2, fieldType, sortDirection);\n            if (sortResult !== SortDirectionNumber.neutral) {\n              return sortResult;\n            }\n          }\n        }\n        return SortDirectionNumber.neutral;\n      });\n      grid.invalidate();\n      grid.render();\n    }\n  }\n\n  dispose() {\n    // unsubscribe local event\n    if (this._slickSubscriber && typeof this._slickSubscriber.unsubscribe === 'function') {\n      this._slickSubscriber.unsubscribe();\n    }\n\n    // unsubscribe all SlickGrid events\n    this._eventHandler.unsubscribeAll();\n  }\n\n  /**\n   * A simple function that is attached to the subscriber and emit a change when the sort is called.\n   * Other services, like Pagination, can then subscribe to it.\n   * @param sender\n   */\n  emitSortChanged(sender: 'local' | 'remote') {\n    if (sender === 'remote' && this._gridOptions && this._gridOptions.backendServiceApi) {\n      let currentSorters: CurrentSorter[] = [];\n      const backendService = this._gridOptions.backendServiceApi.service;\n      if (backendService && backendService.getCurrentSorters) {\n        currentSorters = backendService.getCurrentSorters() as CurrentSorter[];\n      }\n      this.onSortChanged.next(currentSorters);\n    } else if (sender === 'local') {\n      this.onSortChanged.next(this.getCurrentLocalSorters());\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Constants } from '../constants';\r\nimport {\r\n  CellArgs,\r\n  Column,\r\n  ColumnSort,\r\n  DelimiterType,\r\n  Extension,\r\n  ExtensionName,\r\n  FileType,\r\n  GraphqlResult,\r\n  GridOption,\r\n  GridMenu,\r\n  GridMenuItem,\r\n  HeaderMenuOnCommandArgs,\r\n} from '../models';\r\nimport { ExportService } from '../services/export.service';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { FilterService } from '../services/filter.service';\r\nimport { SortService } from '../services/sort.service';\r\nimport { castToPromise } from '../services/utilities';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\ndeclare var $: any;\r\n\r\n@Injectable()\r\nexport class GridMenuExtension implements Extension {\r\n  private _areVisibleColumnDifferent = false;\r\n  private _eventHandler: any = new Slick.EventHandler();\r\n  private _extension: any;\r\n  private _userOriginalGridMenu: GridMenu;\r\n\r\n  constructor(\r\n    private exportService: ExportService,\r\n    private extensionUtility: ExtensionUtility,\r\n    private filterService: FilterService,\r\n    private sharedService: SharedService,\r\n    private sortService: SortService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  dispose() {\r\n    // unsubscribe all SlickGrid events\r\n    this._eventHandler.unsubscribeAll();\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  /** Create the Header Menu and expose all the available hooks that user can subscribe (onCommand, onBeforeMenuShow, ...) */\r\n  register(): any {\r\n    // keep original user grid menu, useful when switching locale to translate\r\n    this._userOriginalGridMenu = { ...this.sharedService.gridOptions.gridMenu };\r\n\r\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.gridMenu);\r\n      this.sharedService.gridOptions.gridMenu = { ...this.getDefaultGridMenuOptions(), ...this.sharedService.gridOptions.gridMenu };\r\n\r\n      // merge original user grid menu items with internal items\r\n      // then sort all Grid Menu Custom Items (sorted by pointer, no need to use the return)\r\n      this.sharedService.gridOptions.gridMenu.customItems = [...this._userOriginalGridMenu.customItems || [], ...this.addGridMenuCustomCommands()];\r\n      this.extensionUtility.translateItems(this.sharedService.gridOptions.gridMenu.customItems, 'titleKey', 'title');\r\n      this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.customItems, 'positionOrder');\r\n\r\n      this._extension = new Slick.Controls.GridMenu(this.sharedService.columnDefinitions, this.sharedService.grid, this.sharedService.gridOptions);\r\n      if (this.sharedService.grid && this.sharedService.gridOptions.gridMenu) {\r\n        this._eventHandler.subscribe(this._extension.onBeforeMenuShow, (e: any, args: CellArgs) => {\r\n          if (this.sharedService.gridOptions.gridMenu && typeof this.sharedService.gridOptions.gridMenu.onBeforeMenuShow === 'function') {\r\n            this.sharedService.gridOptions.gridMenu.onBeforeMenuShow(e, args);\r\n          }\r\n        });\r\n        this._eventHandler.subscribe(this._extension.onColumnsChanged, (e: any, args: CellArgs) => {\r\n          this._areVisibleColumnDifferent = true;\r\n          if (this.sharedService.gridOptions.gridMenu && typeof this.sharedService.gridOptions.gridMenu.onColumnsChanged === 'function') {\r\n            this.sharedService.gridOptions.gridMenu.onColumnsChanged(e, args);\r\n          }\r\n        });\r\n        this._eventHandler.subscribe(this._extension.onCommand, (e: any, args: any) => {\r\n          this.executeGridMenuInternalCustomCommands(e, args);\r\n          if (this.sharedService.gridOptions.gridMenu && typeof this.sharedService.gridOptions.gridMenu.onCommand === 'function') {\r\n            this.sharedService.gridOptions.gridMenu.onCommand(e, args);\r\n          }\r\n        });\r\n        this._eventHandler.subscribe(this._extension.onMenuClose, (e: any, args: CellArgs) => {\r\n          if (this.sharedService.gridOptions.gridMenu && typeof this.sharedService.gridOptions.gridMenu.onMenuClose === 'function') {\r\n            this.sharedService.gridOptions.gridMenu.onMenuClose(e, args);\r\n          }\r\n\r\n          // we also want to resize the columns if the user decided to hide certain column(s)\r\n          if (this.sharedService.grid && typeof this.sharedService.grid.autosizeColumns === 'function') {\r\n            // make sure that the grid still exist (by looking if the Grid UID is found in the DOM tree)\r\n            const gridUid = this.sharedService.grid.getUID();\r\n            if (this._areVisibleColumnDifferent && gridUid && $(`.${gridUid}`).length > 0) {\r\n              if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableAutoSizeColumns) {\r\n                this.sharedService.grid.autosizeColumns();\r\n              }\r\n              this._areVisibleColumnDifferent = false;\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n  * Execute the Grid Menu Custom command callback that was triggered by the onCommand subscribe\r\n  * These are the default internal custom commands\r\n  * @param event\r\n  * @param GridMenuItem args\r\n  */\r\n  executeGridMenuInternalCustomCommands(e: Event, args: GridMenuItem) {\r\n    if (args && args.command) {\r\n      switch (args.command) {\r\n        case 'clear-filter':\r\n          this.filterService.clearFilters();\r\n          this.sharedService.dataView.refresh();\r\n          break;\r\n        case 'clear-sorting':\r\n          this.sortService.clearSorting();\r\n          this.sharedService.dataView.refresh();\r\n          break;\r\n        case 'export-csv':\r\n          this.exportService.exportToFile({\r\n            delimiter: DelimiterType.comma,\r\n            filename: 'export',\r\n            format: FileType.csv,\r\n            useUtf8WithBom: true\r\n          });\r\n          break;\r\n        case 'export-text-delimited':\r\n          this.exportService.exportToFile({\r\n            delimiter: DelimiterType.tab,\r\n            filename: 'export',\r\n            format: FileType.txt,\r\n            useUtf8WithBom: true\r\n          });\r\n          break;\r\n        case 'toggle-filter':\r\n          this.sharedService.grid.setHeaderRowVisibility(!this.sharedService.grid.getOptions().showHeaderRow);\r\n          break;\r\n        case 'toggle-toppanel':\r\n          this.sharedService.grid.setTopPanelVisibility(!this.sharedService.grid.getOptions().showTopPanel);\r\n          break;\r\n        case 'toggle-preheader':\r\n          this.sharedService.grid.setPreHeaderPanelVisibility(!this.sharedService.grid.getOptions().showPreHeaderPanel);\r\n          break;\r\n        case 'refresh-dataset':\r\n          this.refreshBackendDataset();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Refresh the dataset through the Backend Service */\r\n  refreshBackendDataset(gridOptions?: GridOption) {\r\n    let query = '';\r\n\r\n    // user can pass new set of grid options which will override current ones\r\n    if (gridOptions) {\r\n      this.sharedService.gridOptions = { ...this.sharedService.gridOptions, ...gridOptions };\r\n    }\r\n\r\n    const backendApi = this.sharedService.gridOptions.backendServiceApi;\r\n    if (!backendApi || !backendApi.service || !backendApi.process) {\r\n      throw new Error(`BackendServiceApi requires at least a \"process\" function and a \"service\" defined`);\r\n    }\r\n\r\n    if (backendApi.service) {\r\n      query = backendApi.service.buildQuery();\r\n    }\r\n\r\n    if (query && query !== '') {\r\n      // keep start time & end timestamps & return it after process execution\r\n      const startTime = new Date();\r\n\r\n      if (backendApi.preProcess) {\r\n        backendApi.preProcess();\r\n      }\r\n\r\n      // the process could be an Observable (like HttpClient) or a Promise\r\n      // in any case, we need to have a Promise so that we can await on it (if an Observable, convert it to Promise)\r\n      const observableOrPromise = backendApi.process(query);\r\n\r\n      castToPromise(observableOrPromise).then((processResult: GraphqlResult | any) => {\r\n        const endTime = new Date();\r\n\r\n        // from the result, call our internal post process to update the Dataset and Pagination info\r\n        if (processResult && backendApi && backendApi.internalPostProcess) {\r\n          backendApi.internalPostProcess(processResult);\r\n        }\r\n\r\n        // send the response process to the postProcess callback\r\n        if (backendApi && backendApi.postProcess) {\r\n          if (processResult instanceof Object) {\r\n            processResult.statistics = {\r\n              startTime,\r\n              endTime,\r\n              executionTime: endTime.valueOf() - startTime.valueOf(),\r\n              totalItemCount: this.sharedService.gridOptions && this.sharedService.gridOptions.pagination && this.sharedService.gridOptions.pagination.totalItems\r\n            };\r\n          }\r\n          backendApi.postProcess(processResult);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /** Create Grid Menu with Custom Commands if user has enabled Filters and/or uses a Backend Service (OData, GraphQL) */\r\n  private addGridMenuCustomCommands() {\r\n    const backendApi = this.sharedService.gridOptions.backendServiceApi || null;\r\n    const gridMenuCustomItems: GridMenuItem[] = [];\r\n\r\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableFiltering) {\r\n      // show grid menu: clear all filters\r\n      if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideClearAllFiltersCommand) {\r\n        gridMenuCustomItems.push(\r\n          {\r\n            iconCssClass: this.sharedService.gridOptions.gridMenu.iconClearAllFiltersCommand || 'fa fa-filter text-danger',\r\n            title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('CLEAR_ALL_FILTERS') : Constants.TEXT_CLEAR_ALL_FILTERS,\r\n            disabled: false,\r\n            command: 'clear-filter',\r\n            positionOrder: 50\r\n          }\r\n        );\r\n      }\r\n\r\n      // show grid menu: toggle filter row\r\n      if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideToggleFilterCommand) {\r\n        gridMenuCustomItems.push(\r\n          {\r\n            iconCssClass: this.sharedService.gridOptions.gridMenu.iconToggleFilterCommand || 'fa fa-random',\r\n            title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('TOGGLE_FILTER_ROW') : Constants.TEXT_TOGGLE_FILTER_ROW,\r\n            disabled: false,\r\n            command: 'toggle-filter',\r\n            positionOrder: 52\r\n          }\r\n        );\r\n      }\r\n\r\n      // show grid menu: refresh dataset\r\n      if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideRefreshDatasetCommand && backendApi) {\r\n        gridMenuCustomItems.push(\r\n          {\r\n            iconCssClass: this.sharedService.gridOptions.gridMenu.iconRefreshDatasetCommand || 'fa fa-refresh',\r\n            title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('REFRESH_DATASET') : Constants.TEXT_REFRESH_DATASET,\r\n            disabled: false,\r\n            command: 'refresh-dataset',\r\n            positionOrder: 54\r\n          }\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.sharedService.gridOptions.showPreHeaderPanel) {\r\n      // show grid menu: toggle pre-header row\r\n      if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideTogglePreHeaderCommand) {\r\n        gridMenuCustomItems.push(\r\n          {\r\n            iconCssClass: this.sharedService.gridOptions.gridMenu.iconTogglePreHeaderCommand || 'fa fa-random',\r\n            title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('TOGGLE_PRE_HEADER_ROW') : Constants.TEXT_TOGGLE_PRE_HEADER_ROW,\r\n            disabled: false,\r\n            command: 'toggle-preheader',\r\n            positionOrder: 52\r\n          }\r\n        );\r\n      }\r\n    }\r\n\r\n    if (this.sharedService.gridOptions.enableSorting) {\r\n      // show grid menu: clear all sorting\r\n      if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideClearAllSortingCommand) {\r\n        gridMenuCustomItems.push(\r\n          {\r\n            iconCssClass: this.sharedService.gridOptions.gridMenu.iconClearAllSortingCommand || 'fa fa-unsorted text-danger',\r\n            title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('CLEAR_ALL_SORTING') : Constants.TEXT_CLEAR_ALL_SORTING,\r\n            disabled: false,\r\n            command: 'clear-sorting',\r\n            positionOrder: 51\r\n          }\r\n        );\r\n      }\r\n    }\r\n\r\n    // show grid menu: export to file\r\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableExport && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideExportCsvCommand) {\r\n      gridMenuCustomItems.push(\r\n        {\r\n          iconCssClass: this.sharedService.gridOptions.gridMenu.iconExportCsvCommand || 'fa fa-download',\r\n          title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('EXPORT_TO_CSV') : Constants.TEXT_EXPORT_IN_CSV_FORMAT,\r\n          disabled: false,\r\n          command: 'export-csv',\r\n          positionOrder: 53\r\n        }\r\n      );\r\n    }\r\n    // show grid menu: export to text file as tab delimited\r\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableExport && this.sharedService.gridOptions.gridMenu && !this.sharedService.gridOptions.gridMenu.hideExportTextDelimitedCommand) {\r\n      gridMenuCustomItems.push(\r\n        {\r\n          iconCssClass: this.sharedService.gridOptions.gridMenu.iconExportTextDelimitedCommand || 'fa fa-download',\r\n          title: this.sharedService.gridOptions.enableTranslate ? this.translate.instant('EXPORT_TO_TAB_DELIMITED') : Constants.TEXT_EXPORT_IN_TEXT_FORMAT,\r\n          disabled: false,\r\n          command: 'export-text-delimited',\r\n          positionOrder: 54\r\n        }\r\n      );\r\n    }\r\n\r\n    // add the custom \"Commands\" title if there are any commands\r\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu && (gridMenuCustomItems.length > 0 || (this.sharedService.gridOptions.gridMenu.customItems && this.sharedService.gridOptions.gridMenu.customItems.length > 0))) {\r\n      this.sharedService.gridOptions.gridMenu.customTitle = this.sharedService.gridOptions.gridMenu.customTitle || this.extensionUtility.getPickerTitleOutputString('customTitle', 'gridMenu');\r\n    }\r\n\r\n    return gridMenuCustomItems;\r\n  }\r\n\r\n  /** Execute the Header Menu Commands that was triggered by the onCommand subscribe */\r\n  executeHeaderMenuInternalCommands(e: Event, args: HeaderMenuOnCommandArgs) {\r\n    if (args && args.command) {\r\n      switch (args.command) {\r\n        case 'hide':\r\n          this.hideColumn(args.column);\r\n          if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableAutoSizeColumns) {\r\n            this.sharedService.grid.autosizeColumns();\r\n          }\r\n          break;\r\n        case 'sort-asc':\r\n        case 'sort-desc':\r\n          // get previously sorted columns\r\n          const cols: ColumnSort[] = this.sortService.getPreviousColumnSorts(args.column.id + '');\r\n\r\n          // add to the column array, the column sorted by the header menu\r\n          cols.push({ sortCol: args.column, sortAsc: (args.command === 'sort-asc') });\r\n          if (this.sharedService.gridOptions.backendServiceApi) {\r\n            this.sortService.onBackendSortChanged(e, { multiColumnSort: true, sortCols: cols, grid: this.sharedService.grid });\r\n          } else {\r\n            this.sortService.onLocalSortChanged(this.sharedService.grid, this.sharedService.dataView, cols);\r\n          }\r\n\r\n          // update the this.sharedService.gridObj sortColumns array which will at the same add the visual sort icon(s) on the UI\r\n          const newSortColumns: ColumnSort[] = cols.map((col) => {\r\n            return {\r\n              columnId: col && col.sortCol && col.sortCol.id,\r\n              sortAsc: col && col.sortAsc\r\n            };\r\n          });\r\n          this.sharedService.grid.setSortColumns(newSortColumns); // add sort icon in UI\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Hide a column from the grid */\r\n  hideColumn(column: Column) {\r\n    if (this.sharedService.grid && this.sharedService.grid.getColumns && this.sharedService.grid.setColumns) {\r\n      const columnIndex = this.sharedService.grid.getColumnIndex(column.id);\r\n      this.sharedService.visibleColumns = this.extensionUtility.arrayRemoveItemByIndex(this.sharedService.grid.getColumns(), columnIndex);\r\n      this.sharedService.grid.setColumns(this.sharedService.visibleColumns);\r\n    }\r\n  }\r\n\r\n  /** Translate the Grid Menu titles and column picker */\r\n  translateGridMenu() {\r\n    // update the properties by pointers, that is the only way to get Grid Menu Control to see the new values\r\n    // we also need to call the control init so that it takes the new Grid object with latest values\r\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu) {\r\n      this.sharedService.gridOptions.gridMenu.customItems = [];\r\n      this.emptyGridMenuTitles();\r\n\r\n      // merge original user grid menu items with internal items\r\n      // then sort all Grid Menu Custom Items (sorted by pointer, no need to use the return)\r\n      this.sharedService.gridOptions.gridMenu.customItems = [...this._userOriginalGridMenu.customItems || [], ...this.addGridMenuCustomCommands()];\r\n      this.extensionUtility.translateItems(this.sharedService.gridOptions.gridMenu.customItems, 'titleKey', 'title');\r\n      this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.customItems, 'positionOrder');\r\n\r\n      this.sharedService.gridOptions.gridMenu.columnTitle = this.extensionUtility.getPickerTitleOutputString('columnTitle', 'gridMenu');\r\n      this.sharedService.gridOptions.gridMenu.forceFitTitle = this.extensionUtility.getPickerTitleOutputString('forceFitTitle', 'gridMenu');\r\n      this.sharedService.gridOptions.gridMenu.syncResizeTitle = this.extensionUtility.getPickerTitleOutputString('syncResizeTitle', 'gridMenu');\r\n\r\n      // translate all columns (including non-visible)\r\n      this.extensionUtility.translateItems(this.sharedService.allColumns, 'headerKey', 'name');\r\n\r\n      // re-initialize the Grid Menu, that will recreate all the menus & list\r\n      // doing an \"init()\" won't drop any existing command attached\r\n      if (this._extension.init) {\r\n        this._extension.init(this.sharedService.grid);\r\n      }\r\n    }\r\n  }\r\n\r\n  private emptyGridMenuTitles() {\r\n    if (this.sharedService && this.sharedService.gridOptions && this.sharedService.gridOptions.gridMenu) {\r\n      this.sharedService.gridOptions.gridMenu.customTitle = '';\r\n      this.sharedService.gridOptions.gridMenu.columnTitle = '';\r\n      this.sharedService.gridOptions.gridMenu.forceFitTitle = '';\r\n      this.sharedService.gridOptions.gridMenu.syncResizeTitle = '';\r\n    }\r\n  }\r\n\r\n  /**\r\n  * @return default Grid Menu options\r\n  */\r\n  private getDefaultGridMenuOptions(): GridMenu {\r\n    return {\r\n      customTitle: undefined,\r\n      columnTitle: this.extensionUtility.getPickerTitleOutputString('columnTitle', 'gridMenu'),\r\n      forceFitTitle: this.extensionUtility.getPickerTitleOutputString('forceFitTitle', 'gridMenu'),\r\n      syncResizeTitle: this.extensionUtility.getPickerTitleOutputString('syncResizeTitle', 'gridMenu'),\r\n      iconCssClass: 'fa fa-bars',\r\n      menuWidth: 18,\r\n      customItems: [],\r\n      hideClearAllFiltersCommand: false,\r\n      hideRefreshDatasetCommand: false,\r\n      hideToggleFilterCommand: false,\r\n    };\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Extension } from '../models/index';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n@Injectable()\r\nexport class GroupItemMetaProviderExtension implements Extension {\r\n  private _extension: any;\r\n\r\n  constructor(private sharedService: SharedService) { }\r\n\r\n  dispose() {\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  /** register the group item metadata provider to add expand/collapse group handlers */\r\n  register(): any {\r\n    if (this.sharedService && this.sharedService.grid) {\r\n      this._extension = this.sharedService.groupItemMetadataProvider || {};\r\n      this.sharedService.grid.registerPlugin(this._extension);\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Extension, ExtensionName, HeaderButtonOnCommandArgs } from '../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class HeaderButtonExtension implements Extension {\r\n  private _eventHandler: any = new Slick.EventHandler();\r\n  private _extension: any;\r\n\r\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) { }\r\n\r\n  dispose() {\r\n    // unsubscribe all SlickGrid events\r\n    this._eventHandler.unsubscribeAll();\r\n\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  // Header Button Plugin\r\n  register(): any {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.headerButton);\r\n      this._extension = new Slick.Plugins.HeaderButtons(this.sharedService.gridOptions.headerButton || {});\r\n      this.sharedService.grid.registerPlugin(this._extension);\r\n      this._eventHandler.subscribe(this._extension.onCommand, (e: any, args: HeaderButtonOnCommandArgs) => {\r\n        if (this.sharedService.gridOptions.headerButton && typeof this.sharedService.gridOptions.headerButton.onCommand === 'function') {\r\n          this.sharedService.gridOptions.headerButton.onCommand(e, args);\r\n        }\r\n      });\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Constants } from '../constants';\nimport {\n  Column,\n  ColumnSort,\n  Extension,\n  ExtensionName,\n  GridOption,\n  HeaderMenu,\n  HeaderMenuItem,\n  HeaderMenuOnCommandArgs,\n  HeaderMenuOnBeforeMenuShowArgs,\n} from '../models/index';\nimport { SortService } from '../services/sort.service';\nimport { SharedService } from '../services/shared.service';\nimport { ExtensionUtility } from './extensionUtility';\n\n// using external non-typed js libraries\ndeclare var Slick: any;\n\n@Injectable()\nexport class HeaderMenuExtension implements Extension {\n  private _eventHandler: any = new Slick.EventHandler();\n  private _extension: any;\n\n  constructor(\n    private extensionUtility: ExtensionUtility,\n    private sharedService: SharedService,\n    private sortService: SortService,\n    private translate: TranslateService,\n  ) { }\n\n  dispose() {\n    // unsubscribe all SlickGrid events\n    this._eventHandler.unsubscribeAll();\n    if (this._extension && this._extension.destroy) {\n      this._extension.destroy();\n    }\n  }\n\n  /**\n  * Create the Header Menu and expose all the available hooks that user can subscribe (onCommand, onBeforeMenuShow, ...)\n  * @param grid\n  * @param dataView\n  * @param columnDefinitions\n  */\n  register(): any {\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\n      // dynamically import the SlickGrid plugin with requireJS\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.headerMenu);\n      this.sharedService.gridOptions.headerMenu = { ...this.getDefaultHeaderMenuOptions(), ...this.sharedService.gridOptions.headerMenu };\n      if (this.sharedService.gridOptions.enableHeaderMenu) {\n        this.sharedService.gridOptions.headerMenu = this.addHeaderMenuCustomCommands(this.sharedService.gridOptions, this.sharedService.columnDefinitions);\n      }\n\n      this._extension = new Slick.Plugins.HeaderMenu(this.sharedService.gridOptions.headerMenu);\n      this.sharedService.grid.registerPlugin(this._extension);\n      this._eventHandler.subscribe(this._extension.onCommand, (e: any, args: HeaderMenuOnCommandArgs) => {\n        this.executeHeaderMenuInternalCommands(e, args);\n        if (this.sharedService.gridOptions.headerMenu && typeof this.sharedService.gridOptions.headerMenu.onCommand === 'function') {\n          this.sharedService.gridOptions.headerMenu.onCommand(e, args);\n        }\n      });\n\n      this._eventHandler.subscribe(this._extension.onBeforeMenuShow, (e: any, args: HeaderMenuOnBeforeMenuShowArgs) => {\n        if (this.sharedService.gridOptions.headerMenu && typeof this.sharedService.gridOptions.headerMenu.onBeforeMenuShow === 'function') {\n          this.sharedService.gridOptions.headerMenu.onBeforeMenuShow(e, args);\n        }\n      });\n\n      return this._extension;\n    }\n    return null;\n  }\n\n /**\n  * Create Header Menu with Custom Commands if user has enabled Header Menu\n  * @param options\n  * @param columnDefinitions\n  * @return header menu\n  */\n  private addHeaderMenuCustomCommands(options: GridOption, columnDefinitions: Column[]): HeaderMenu {\n    const headerMenuOptions = options.headerMenu || {};\n\n    if (columnDefinitions && Array.isArray(columnDefinitions) && options.enableHeaderMenu) {\n      columnDefinitions.forEach((columnDef: Column) => {\n        if (columnDef && !columnDef.excludeFromHeaderMenu) {\n          if (!columnDef.header || !columnDef.header.menu) {\n            columnDef.header = {\n              menu: {\n                items: []\n              }\n            };\n          }\n\n          const columnHeaderMenuItems: HeaderMenuItem[] = columnDef && columnDef.header && columnDef.header.menu && columnDef.header.menu.items || [];\n\n          // Sorting Commands\n          if (options.enableSorting && columnDef.sortable && headerMenuOptions && !headerMenuOptions.hideSortCommands) {\n            if (columnHeaderMenuItems.filter((item: HeaderMenuItem) => item.command === 'sort-asc').length === 0) {\n              columnHeaderMenuItems.push({\n                iconCssClass: headerMenuOptions.iconSortAscCommand || 'fa fa-sort-asc',\n                title: options.enableTranslate ? this.translate.instant('SORT_ASCENDING') : Constants.TEXT_SORT_ASCENDING,\n                command: 'sort-asc',\n                positionOrder: 50\n              });\n            }\n            if (columnHeaderMenuItems.filter((item: HeaderMenuItem) => item.command === 'sort-desc').length === 0) {\n              columnHeaderMenuItems.push({\n                iconCssClass: headerMenuOptions.iconSortDescCommand || 'fa fa-sort-desc',\n                title: options.enableTranslate ? this.translate.instant('SORT_DESCENDING') : Constants.TEXT_SORT_DESCENDING,\n                command: 'sort-desc',\n                positionOrder: 51\n              });\n            }\n          }\n\n          // Hide Column Command\n          if (headerMenuOptions && !headerMenuOptions.hideColumnHideCommand && columnHeaderMenuItems.filter((item: HeaderMenuItem) => item.command === 'hide').length === 0) {\n            columnHeaderMenuItems.push({\n              iconCssClass: headerMenuOptions.iconColumnHideCommand || 'fa fa-times',\n              title: options.enableTranslate ? this.translate.instant('HIDE_COLUMN') : Constants.TEXT_HIDE_COLUMN,\n              command: 'hide',\n              positionOrder: 52\n            });\n          }\n\n          this.extensionUtility.translateItems(columnHeaderMenuItems, 'titleKey', 'title');\n          // sort the custom items by their position in the list\n          columnHeaderMenuItems.sort((itemA: any, itemB: any) => {\n            if (itemA && itemB && itemA.hasOwnProperty('positionOrder') && itemB.hasOwnProperty('positionOrder')) {\n              return itemA.positionOrder - itemB.positionOrder;\n            }\n            return 0;\n          });\n        }\n      });\n    }\n    return headerMenuOptions;\n  }\n\n  /** Execute the Header Menu Commands that was triggered by the onCommand subscribe */\n  executeHeaderMenuInternalCommands(e: Event, args: HeaderMenuOnCommandArgs) {\n    if (args && args.command) {\n      switch (args.command) {\n        case 'hide':\n          this.hideColumn(args.column);\n          if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableAutoSizeColumns) {\n            this.sharedService.grid.autosizeColumns();\n          }\n          break;\n        case 'sort-asc':\n        case 'sort-desc':\n          // get previously sorted columns\n          const cols: ColumnSort[] = this.sortService.getPreviousColumnSorts(args.column.id + '');\n\n          // add to the column array, the column sorted by the header menu\n          cols.push({ sortCol: args.column, sortAsc: (args.command === 'sort-asc') });\n          if (this.sharedService.gridOptions.backendServiceApi) {\n            this.sortService.onBackendSortChanged(e, { multiColumnSort: true, sortCols: cols, grid: this.sharedService.grid });\n          } else if (this.sharedService.dataView) {\n            this.sortService.onLocalSortChanged(this.sharedService.grid, this.sharedService.dataView, cols);\n          } else {\n            // when using customDataView, we will simply send it as a onSort event with notify\n            const isMultiSort = this.sharedService && this.sharedService.gridOptions && this.sharedService.gridOptions.multiColumnSort || false;\n            const sortOutput = isMultiSort ? cols : cols[0];\n            args.grid.onSort.notify(sortOutput);\n          }\n\n          // update the this.sharedService.gridObj sortColumns array which will at the same add the visual sort icon(s) on the UI\n          const newSortColumns: ColumnSort[] = cols.map((col) => {\n            return {\n              columnId: col && col.sortCol && col.sortCol.id,\n              sortAsc: col && col.sortAsc\n            };\n          });\n          this.sharedService.grid.setSortColumns(newSortColumns); // add sort icon in UI\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  /** Hide a column from the grid */\n  hideColumn(column: Column) {\n    if (this.sharedService.grid && this.sharedService.grid.getColumns && this.sharedService.grid.setColumns) {\n      const columnIndex = this.sharedService.grid.getColumnIndex(column.id);\n      this.sharedService.visibleColumns = this.extensionUtility.arrayRemoveItemByIndex(this.sharedService.grid.getColumns(), columnIndex);\n      this.sharedService.grid.setColumns(this.sharedService.visibleColumns);\n    }\n  }\n\n  /**\n   * Reset all the Grid Menu options which have text to translate\n   * @param grid menu object\n   */\n  resetHeaderMenuTranslations(columnDefinitions: Column[]) {\n    columnDefinitions.forEach((columnDef: Column) => {\n      if (columnDef && columnDef.header && columnDef.header && columnDef.header.menu && columnDef.header.menu.items) {\n        if (!columnDef.excludeFromHeaderMenu) {\n          const columnHeaderMenuItems: HeaderMenuItem[] = columnDef.header.menu.items || [];\n          columnHeaderMenuItems.forEach((item) => {\n            switch (item.command) {\n              case 'sort-asc':\n                item.title = this.translate.instant('SORT_ASCENDING') || Constants.TEXT_SORT_ASCENDING;\n                break;\n              case 'sort-desc':\n                item.title = this.translate.instant('SORT_DESCENDING') || Constants.TEXT_SORT_DESCENDING;\n                break;\n              case 'hide':\n                item.title = this.translate.instant('HIDE_COLUMN') || Constants.TEXT_HIDE_COLUMN;\n                break;\n            }\n\n            // re-translate if there's a \"titleKey\"\n            if (this.sharedService.gridOptions && this.sharedService.gridOptions.enableTranslate) {\n              this.extensionUtility.translateItems(columnHeaderMenuItems, 'titleKey', 'title');\n            }\n          });\n        }\n      }\n    });\n  }\n\n  /**\n   * Translate the Header Menu titles, we need to loop through all column definition to re-translate them\n   */\n  translateHeaderMenu() {\n    if (this.sharedService.gridOptions && this.sharedService.gridOptions.headerMenu) {\n      this.resetHeaderMenuTranslations(this.sharedService.visibleColumns);\n    }\n  }\n\n  /**\n   * @return default Header Menu options\n   */\n  private getDefaultHeaderMenuOptions(): HeaderMenu {\n    return {\n      autoAlignOffset: 12,\n      minWidth: 140,\n      hideColumnHideCommand: false,\n      hideSortCommands: false,\n      title: ''\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\r\nimport { CellArgs, Extension, ExtensionName } from '../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class RowMoveManagerExtension implements Extension {\r\n  private _eventHandler: any = new Slick.EventHandler();\r\n  private _extension: any;\r\n\r\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) { }\r\n\r\n  dispose() {\r\n    // unsubscribe all SlickGrid events\r\n    this._eventHandler.unsubscribeAll();\r\n\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  register(rowSelectionPlugin?: any): any {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.rowMoveManager);\r\n\r\n      // this also requires the Row Selection Model to be registered as well\r\n      if (!rowSelectionPlugin || !this.sharedService.grid.getSelectionModel()) {\r\n        this.extensionUtility.loadExtensionDynamically(ExtensionName.rowSelection);\r\n        rowSelectionPlugin = new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions || {});\r\n        this.sharedService.grid.setSelectionModel(rowSelectionPlugin);\r\n      }\r\n\r\n      this._extension = new Slick.RowMoveManager(this.sharedService.gridOptions.rowMoveManager || { cancelEditOnDrag: true });\r\n      this.sharedService.grid.registerPlugin(this._extension);\r\n\r\n      // hook all events\r\n      if (this.sharedService.grid && this.sharedService.gridOptions.rowMoveManager) {\r\n        this._eventHandler.subscribe(this._extension.onBeforeMoveRows, (e: any, args: CellArgs) => {\r\n          if (this.sharedService.gridOptions.rowMoveManager && typeof this.sharedService.gridOptions.rowMoveManager.onBeforeMoveRows === 'function') {\r\n            this.sharedService.gridOptions.rowMoveManager.onBeforeMoveRows(e, args);\r\n          }\r\n        });\r\n        this._eventHandler.subscribe(this._extension.onMoveRows, (e: any, args: CellArgs) => {\r\n          if (this.sharedService.gridOptions.rowMoveManager && typeof this.sharedService.gridOptions.rowMoveManager.onMoveRows === 'function') {\r\n            this.sharedService.gridOptions.rowMoveManager.onMoveRows(e, args);\r\n          }\r\n        });\r\n      }\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Extension, ExtensionName } from './../models/index';\r\nimport { ExtensionUtility } from './extensionUtility';\r\nimport { SharedService } from '../services/shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class RowSelectionExtension implements Extension {\r\n  private _extension: any;\r\n\r\n  constructor(private extensionUtility: ExtensionUtility, private sharedService: SharedService) { }\r\n\r\n  dispose() {\r\n    if (this._extension && this._extension.destroy) {\r\n      this._extension.destroy();\r\n    }\r\n  }\r\n\r\n  register(): any {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.gridOptions) {\r\n      // dynamically import the SlickGrid plugin with requireJS\r\n      this.extensionUtility.loadExtensionDynamically(ExtensionName.rowSelection);\r\n\r\n      this._extension = new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions || {});\r\n      this.sharedService.grid.setSelectionModel(this._extension);\r\n      return this._extension;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n","// import common 3rd party SlickGrid plugins/libs\r\nimport 'slickgrid/plugins/slick.cellrangedecorator';\r\nimport 'slickgrid/plugins/slick.cellrangeselector';\r\nimport 'slickgrid/plugins/slick.cellselectionmodel';\r\n\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport {\r\n  Column,\r\n  ExtensionModel,\r\n  ExtensionName,\r\n  GridOption,\r\n} from '../models/index';\r\nimport {\r\n  AutoTooltipExtension,\r\n  CellExternalCopyManagerExtension,\r\n  CheckboxSelectorExtension,\r\n  ColumnPickerExtension,\r\n  DraggableGroupingExtension,\r\n  GridMenuExtension,\r\n  GroupItemMetaProviderExtension,\r\n  HeaderButtonExtension,\r\n  HeaderMenuExtension,\r\n  RowMoveManagerExtension,\r\n  RowSelectionExtension,\r\n} from '../extensions/index';\r\nimport { SharedService } from './shared.service';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\n@Injectable()\r\nexport class ExtensionService {\r\n  extensionList: ExtensionModel[] = [];\r\n\r\n  constructor(\r\n    private autoTooltipExtension: AutoTooltipExtension,\r\n    private cellExternalCopyExtension: CellExternalCopyManagerExtension,\r\n    private checkboxSelectorExtension: CheckboxSelectorExtension,\r\n    private columnPickerExtension: ColumnPickerExtension,\r\n    private draggableGroupingExtension: DraggableGroupingExtension,\r\n    private gridMenuExtension: GridMenuExtension,\r\n    private groupItemMetaExtension: GroupItemMetaProviderExtension,\r\n    private headerButtonExtension: HeaderButtonExtension,\r\n    private headerMenuExtension: HeaderMenuExtension,\r\n    private rowMoveManagerExtension: RowMoveManagerExtension,\r\n    private rowSelectionExtension: RowSelectionExtension,\r\n    private sharedService: SharedService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  /** Dispose of all the controls & plugins */\r\n  dispose() {\r\n    this.sharedService.grid = null;\r\n    this.sharedService.visibleColumns = [];\r\n\r\n    // dispose of each control/plugin & reset the list\r\n    this.extensionList.forEach((item) => {\r\n      if (item && item.class && item.class.dispose) {\r\n        item.class.dispose();\r\n      }\r\n    });\r\n    this.extensionList = [];\r\n  }\r\n\r\n  /** Get all columns (includes visible and non-visible) */\r\n  getAllColumns(): Column[] {\r\n    return this.sharedService.allColumns || [];\r\n  }\r\n\r\n  /** Get only visible columns */\r\n  getVisibleColumns(): Column[] {\r\n    return this.sharedService.visibleColumns || [];\r\n  }\r\n\r\n  /** Get all Extensions */\r\n  getAllExtensions(): ExtensionModel[] {\r\n    return this.extensionList;\r\n  }\r\n\r\n  /**\r\n   * Get an Extension by it's name\r\n   *  @param name\r\n   */\r\n  getExtensionByName(name: ExtensionName): ExtensionModel | undefined {\r\n    return this.extensionList.find((p) => p.name === name);\r\n  }\r\n\r\n  /** Auto-resize all the column in the grid to fit the grid width */\r\n  autoResizeColumns() {\r\n    this.sharedService.grid.autosizeColumns();\r\n  }\r\n\r\n  /** Attach/Create different Controls or Plugins after the Grid is created */\r\n  attachDifferentExtensions() {\r\n    // make sure all columns are translated before creating ColumnPicker/GridMenu Controls\r\n    // this is to avoid having hidden columns not being translated on first load\r\n    if (this.sharedService.gridOptions.enableTranslate) {\r\n      this.translateItems(this.sharedService.allColumns, 'headerKey', 'name');\r\n    }\r\n\r\n    // Auto Tooltip Plugin\r\n    if (this.sharedService.gridOptions.enableAutoTooltip) {\r\n      if (this.autoTooltipExtension && this.autoTooltipExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.autoTooltip, class: this.autoTooltipExtension, extension: this.autoTooltipExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Column Picker Control\r\n    if (this.sharedService.gridOptions.enableColumnPicker) {\r\n      if (this.columnPickerExtension && this.columnPickerExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.columnPicker, class: this.columnPickerExtension, extension: this.columnPickerExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Draggable Grouping Plugin\r\n    if (this.sharedService.gridOptions.enableDraggableGrouping) {\r\n      if (this.draggableGroupingExtension && this.draggableGroupingExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.draggableGrouping, class: this.draggableGroupingExtension, extension: this.draggableGroupingExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Grid Menu Control\r\n    if (this.sharedService.gridOptions.enableGridMenu) {\r\n      if (this.gridMenuExtension && this.gridMenuExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.gridMenu, class: this.gridMenuExtension, extension: this.gridMenuExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Grouping Plugin\r\n    // register the group item metadata provider to add expand/collapse group handlers\r\n    if (this.sharedService.gridOptions.enableGrouping) {\r\n      if (this.groupItemMetaExtension && this.groupItemMetaExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.groupItemMetaProvider, class: this.groupItemMetaExtension, extension: this.groupItemMetaExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Checkbox Selector Plugin\r\n    if (this.sharedService.gridOptions.enableCheckboxSelector) {\r\n      if (this.checkboxSelectorExtension && this.checkboxSelectorExtension.register) {\r\n        const rowSelectionExtension = this.getExtensionByName(ExtensionName.rowSelection);\r\n        this.extensionList.push({ name: ExtensionName.checkboxSelector, class: this.checkboxSelectorExtension, extension: this.checkboxSelectorExtension.register(rowSelectionExtension) });\r\n      }\r\n    }\r\n\r\n    // Row Move Manager Plugin\r\n    if (this.sharedService.gridOptions.enableRowMoveManager) {\r\n      if (this.rowMoveManagerExtension && this.rowMoveManagerExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.rowMoveManager, class: this.rowMoveManagerExtension, extension: this.rowMoveManagerExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Row Selection Plugin\r\n    if (!this.sharedService.gridOptions.enableCheckboxSelector && this.sharedService.gridOptions.enableRowSelection) {\r\n      if (this.rowSelectionExtension && this.rowSelectionExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.rowSelection, class: this.rowSelectionExtension, extension: this.rowSelectionExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Header Button Plugin\r\n    if (this.sharedService.gridOptions.enableHeaderButton) {\r\n      if (this.headerButtonExtension && this.headerButtonExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.headerButton, class: this.headerButtonExtension, extension: this.headerButtonExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Header Menu Plugin\r\n    if (this.sharedService.gridOptions.enableHeaderMenu) {\r\n      if (this.headerMenuExtension && this.headerMenuExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.headerMenu, class: this.headerMenuExtension, extension: this.headerMenuExtension.register() });\r\n      }\r\n    }\r\n\r\n    // Cell External Copy Manager Plugin (Excel Like)\r\n    if (this.sharedService.gridOptions.enableExcelCopyBuffer) {\r\n      if (this.cellExternalCopyExtension && this.cellExternalCopyExtension.register) {\r\n        this.extensionList.push({ name: ExtensionName.cellExternalCopyManager, class: this.cellExternalCopyExtension, extension: this.cellExternalCopyExtension.register() });\r\n      }\r\n    }\r\n\r\n    // manually register other plugins\r\n    if (this.sharedService.gridOptions.registerPlugins !== undefined) {\r\n      if (Array.isArray(this.sharedService.gridOptions.registerPlugins)) {\r\n        this.sharedService.gridOptions.registerPlugins.forEach((plugin) => {\r\n          this.sharedService.grid.registerPlugin(plugin);\r\n          this.extensionList.push({ name: ExtensionName.noname, class: null, extension: plugin });\r\n        });\r\n      } else {\r\n        this.sharedService.grid.registerPlugin(this.sharedService.gridOptions.registerPlugins);\r\n        this.extensionList.push({ name: ExtensionName.noname, class: null, extension: this.sharedService.gridOptions.registerPlugins });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Attach/Create certain plugins before the Grid creation, else they might behave oddly.\r\n   * Mostly because the column definitions might change after the grid creation\r\n   * @param columnDefinitions\r\n   * @param options\r\n   */\r\n  createExtensionsBeforeGridCreation(columnDefinitions: Column[], options: GridOption) {\r\n    if (options.enableCheckboxSelector) {\r\n      this.checkboxSelectorExtension.create(columnDefinitions, options);\r\n    }\r\n    if (options.enableDraggableGrouping) {\r\n      const plugin = this.draggableGroupingExtension.create(options);\r\n      options.enableColumnReorder = plugin.getSetupColumnReorder;\r\n    }\r\n  }\r\n\r\n  /** Hide a column from the grid */\r\n  hideColumn(column: Column) {\r\n    if (this.sharedService && this.sharedService.grid && this.sharedService.grid.getColumns && this.sharedService.grid.setColumns) {\r\n      const columnIndex = this.sharedService.grid.getColumnIndex(column.id);\r\n      this.sharedService.visibleColumns = this.removeColumnByIndex(this.sharedService.grid.getColumns(), columnIndex);\r\n      this.sharedService.grid.setColumns(this.sharedService.visibleColumns);\r\n    }\r\n  }\r\n\r\n  /** Refresh the dataset through the Backend Service */\r\n  refreshBackendDataset(gridOptions?: GridOption) {\r\n    this.gridMenuExtension.refreshBackendDataset(gridOptions);\r\n  }\r\n\r\n  /**\r\n   * Remove a column from the grid by it's index in the grid\r\n   * @param array input\r\n   * @param index\r\n   */\r\n  removeColumnByIndex(array: any[], index: number) {\r\n    return array.filter((el: any, i: number) => {\r\n      return index !== i;\r\n    });\r\n  }\r\n\r\n  /** Translate the Column Picker and it's last 2 checkboxes */\r\n  translateColumnPicker() {\r\n    if (this.columnPickerExtension && this.columnPickerExtension.translateColumnPicker) {\r\n      this.columnPickerExtension.translateColumnPicker();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Translate the Header Menu titles, we need to loop through all column definition to re-translate them\r\n   */\r\n  translateGridMenu() {\r\n    if (this.gridMenuExtension && this.gridMenuExtension.translateGridMenu) {\r\n      this.gridMenuExtension.translateGridMenu();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Translate the Header Menu titles, we need to loop through all column definition to re-translate them\r\n   */\r\n  translateHeaderMenu() {\r\n    if (this.headerMenuExtension && this.headerMenuExtension.translateHeaderMenu) {\r\n      this.headerMenuExtension.translateHeaderMenu();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Translate manually the header titles.\r\n   * We could optionally pass a locale (that will change currently loaded locale), else it will use current locale\r\n   * @param locale to use\r\n   * @param new column definitions (optional)\r\n   */\r\n  translateColumnHeaders(locale?: boolean | string, newColumnDefinitions?: Column[]) {\r\n    if (locale) {\r\n      this.translate.use(locale as string);\r\n    }\r\n\r\n    const columnDefinitions = newColumnDefinitions || this.sharedService.columnDefinitions;\r\n\r\n    this.translateItems(columnDefinitions, 'headerKey', 'name');\r\n    this.translateItems(this.sharedService.allColumns, 'headerKey', 'name');\r\n\r\n    // re-render the column headers\r\n    this.renderColumnHeaders(columnDefinitions);\r\n  }\r\n\r\n  /**\r\n   * Render (or re-render) the column headers from column definitions.\r\n   * calling setColumns() will trigger a grid re-render\r\n   */\r\n  renderColumnHeaders(newColumnDefinitions?: Column[]) {\r\n    const collection = newColumnDefinitions || this.sharedService.columnDefinitions;\r\n    if (Array.isArray(collection) && this.sharedService.grid && this.sharedService.grid.setColumns) {\r\n      this.sharedService.grid.setColumns(collection);\r\n    }\r\n  }\r\n\r\n  /** Translate the an array of items from an input key and assign to the output key */\r\n  private translateItems(items: any[], inputKey: string, outputKey: string) {\r\n    for (const item of items) {\r\n      if (item[inputKey]) {\r\n        item[outputKey] = this.translate.instant(item[inputKey]);\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\n * This GraphqlQueryBuilder class is a lib that already exist\n * but was causing issues with TypeScript, RequireJS and other bundler/packagers\n * and so I rewrote it in pure TypeScript.\n *\n * The previous lib can be viewed here at this Github\n * https://github.com/codemeasandwich/graphql-query-builder\n */\nexport default class GraphqlQueryBuilder {\n  alias: string | Function;\n  head: any[] = [];\n  body: any;\n\n  /* Constructor, query/mutator you wish to use, and an alias or filter arguments. */\n  constructor(private queryFnName: string, aliasOrFilter?: string | object) {\n    if (typeof aliasOrFilter === 'function') {\n      this.alias = aliasOrFilter;\n    } else if (typeof aliasOrFilter === 'object') {\n      this.filter(aliasOrFilter);\n    } else if (undefined === aliasOrFilter && 2 === arguments.length) {\n      throw new TypeError(`You have passed undefined as Second argument to \"Query\"`);\n    } else if (undefined !== aliasOrFilter) {\n      throw new TypeError(`Second argument to \"Query\" should be an alias name(String) or filter arguments(Object). was passed ${aliasOrFilter}`);\n    }\n  }\n\n  /**\n   * The parameters to run the query against.\n   * @param filters An object mapping attribute to values\n   */\n  filter(filters: any) {\n    for (const prop of Object.keys(filters)) {\n      if (typeof filters[prop] === 'function') {\n        continue;\n      }\n      const val = this.getGraphQLValue(filters[prop]);\n      if (val === '{}') {\n        continue;\n      }\n      this.head.push(`${prop}:${val}`);\n    }\n    return this;\n  }\n\n  /**\n   * Outlines the properties you wish to be returned from the query.\n   * @param properties representing each attribute you want Returned\n   */\n  find(...searches: any[]) { // THIS NEED TO BE A \"FUNCTION\" to scope 'arguments'\n    if (!searches) {\n      throw new TypeError(`find value can not be >>falsy<<`);\n    }\n    // if its a string.. it may have other values\n    // else it sould be an Object or Array of maped values\n    const searchKeys = (searches.length === 1 && Array.isArray(searches[0])) ? searches[0] : searches;\n    this.body = this.parceFind(searchKeys);\n    return this;\n  }\n\n  /**\n   * set an alias for this result.\n   * @param alias\n   */\n  setAlias(alias: string) {\n    this.alias = alias;\n  }\n\n  /**\n   * Return to the formatted query string\n   * @return\n   */\n  toString() {\n    if (this.body === undefined) {\n      throw new ReferenceError(`return properties are not defined. use the 'find' function to defined them`);\n    }\n\n    return `${(this.alias) ? (this.alias + ':') : ''} ${this.queryFnName} ${(this.head.length > 0) ? '(' + this.head.join(',') + ')' : ''}  { ${this.body} }`;\n  }\n\n  // --\n  // PRIVATE FUNCTIONS\n  // -----------------\n\n  private parceFind(_levelA: any[]) {\n    const propsA = _levelA.map((currentValue, index) => {\n      const itemX = _levelA[index];\n\n      if (itemX instanceof GraphqlQueryBuilder) {\n        return itemX.toString();\n      } else if (!Array.isArray(itemX) && typeof itemX === 'object') {\n        const propsAA = Object.keys(itemX);\n        if (1 !== propsAA.length) {\n          throw new RangeError(`Alias objects should only have one value. was passed: ${JSON.stringify(itemX)}`);\n        }\n        const propS = propsAA[0];\n        const item = itemX[propS];\n\n        if (Array.isArray(item)) {\n          return new GraphqlQueryBuilder(propS).find(item);\n        }\n        return `${propS} : ${item} `;\n      } else if (typeof itemX === 'string') {\n        return itemX;\n      } else {\n        throw new RangeError(`cannot handle Find value of ${itemX}`);\n      }\n    });\n\n    return propsA.join(',');\n  }\n\n  private getGraphQLValue(value: any) {\n    if (typeof value === 'string') {\n      value = JSON.stringify(value);\n    } else if (Array.isArray(value)) {\n      value = value.map(item => {\n        return this.getGraphQLValue(item);\n      }).join();\n      value = `[${value}]`;\n    } else if (value instanceof Date) {\n      value = JSON.stringify(value);\n    } else if (value !== null && typeof value === 'object') {\n      value = this.objectToString(value);\n    }\n    return value;\n  }\n\n  private objectToString(obj: any) {\n    const sourceA = [];\n\n    for (const prop of Object.keys(obj)) {\n      if (typeof obj[prop] === 'function') {\n        continue;\n      }\n      sourceA.push(`${prop}:${this.getGraphQLValue(obj[prop])}`);\n    }\n    return `{${sourceA.join()}}`;\n  }\n}\n","declare interface StringConstructor {\r\n  allTitleCase(inputStr: string): string;\r\n  format(inputStr: string, args: any): string;\r\n  padZero(length: number): string;\r\n  trim(inputStr: string): string;\r\n  titleCase(inputStr: string): string;\r\n}\r\n\r\n\r\nString.format = function(format: string, args): string {\r\n  // const args = (Array.isArray(arguments[1])) ? arguments[1] : Array.prototype.slice.call(arguments, 1);\r\n\r\n  return format.replace(/{(\\d+)}/g, function (match, number) {\r\n    return (typeof args[number] !== 'undefined') ? args[number] : match;\r\n  });\r\n};\r\n\r\nString.padZero = function (this: string, length: number) {\r\n  let s = this;\r\n  while (s.length < length) {\r\n    s = '0' + s;\r\n  }\r\n  return s;\r\n};\r\n\r\n/**\r\n * Trim any extra white space from the string\r\n * @param string inputStr\r\n * @returns string outputStr\r\n */\r\nString.trim = function(inputStr: string): string {\r\n  return inputStr ? inputStr.replace(/\\s+/g, ' ') : inputStr;\r\n};\r\n\r\n/**\r\n * Title case the complete sentence (upper case first char of each word while changing everything else to lower case)\r\n * @param string inputStr\r\n * @returns string outputStr\r\n */\r\nString.allTitleCase = function(inputStr: string): string {\r\n  return inputStr.replace(/\\w\\S*/g, function(outputStr) {\r\n     return outputStr.charAt(0).toUpperCase() + outputStr.substr(1).toLowerCase();\r\n  });\r\n};\r\n\r\n/**\r\n * Title case the complete sentence (upper case first char of each word while changing everything else to lower case)\r\n * @param string inputStr\r\n * @returns string outputStr\r\n*/\r\nString.titleCase = function(inputStr: string): string {\r\n  return inputStr.charAt(0).toUpperCase() + inputStr.slice(1);\r\n};\r\n","import './global-utilities';\nimport { parseUtcDate } from './utilities';\nimport { Injectable } from '@angular/core';\nimport {\n  BackendService,\n  CaseType,\n  Column,\n  ColumnFilter,\n  ColumnFilters,\n  ColumnSort,\n  CurrentFilter,\n  CurrentPagination,\n  CurrentSorter,\n  FilterChangedArgs,\n  FieldType,\n  GridOption,\n  OdataOption,\n  Pagination,\n  PaginationChangedArgs,\n  SearchTerm,\n  SortChangedArgs,\n  SortDirection,\n  SortDirectionString\n} from './../models/index';\nimport { OdataService } from './odata.service';\n\nlet timer: any;\nconst DEFAULT_FILTER_TYPING_DEBOUNCE = 750;\nconst DEFAULT_ITEMS_PER_PAGE = 25;\nconst DEFAULT_PAGE_SIZE = 20;\n\n@Injectable()\nexport class GridOdataService implements BackendService {\n  private _currentFilters: CurrentFilter[];\n  private _currentPagination: CurrentPagination;\n  private _currentSorters: CurrentSorter[];\n  private _columnDefinitions: Column[];\n  private _grid: any;\n  odataService: OdataService;\n  options: OdataOption;\n  pagination: Pagination | undefined;\n  defaultOptions: OdataOption = {\n    top: DEFAULT_ITEMS_PER_PAGE,\n    orderBy: '',\n    caseType: CaseType.pascalCase\n  };\n\n  constructor() {\n    this.odataService = new OdataService();\n  }\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  buildQuery(): string {\n    return this.odataService.buildQuery();\n  }\n\n  init(options: OdataOption, pagination?: Pagination, grid?: any): void {\n    this._grid = grid;\n    const mergedOptions = { ...this.defaultOptions, ...options };\n    if (pagination && pagination.pageSize) {\n      mergedOptions.top = pagination.pageSize;\n    }\n    this.odataService.options = { ...mergedOptions, top: mergedOptions.top || this.defaultOptions.top };\n    this.options = this.odataService.options;\n    this.pagination = pagination;\n\n    // save current pagination as Page 1 and page size as \"top\"\n    this._currentPagination = {\n      pageNumber: 1,\n      pageSize: this.odataService.options.top || this.defaultOptions.top\n    };\n\n    if (grid && grid.getColumns) {\n      this._columnDefinitions = (options && options.columnDefinitions) || grid.getColumns();\n      this._columnDefinitions = this._columnDefinitions.filter((column: Column) => !column.excludeFromQuery);\n    }\n  }\n\n  updateOptions(serviceOptions?: OdataOption) {\n    this.options = { ...this.options, ...serviceOptions };\n  }\n\n  removeColumnFilter(fieldName: string): void {\n    this.odataService.removeColumnFilter(fieldName);\n  }\n\n  /** Get the Filters that are currently used by the grid */\n  getCurrentFilters(): CurrentFilter[] {\n    return this._currentFilters;\n  }\n\n  /** Get the Pagination that is currently used by the grid */\n  getCurrentPagination(): CurrentPagination {\n    return this._currentPagination;\n  }\n\n  /** Get the Sorters that are currently used by the grid */\n  getCurrentSorters(): CurrentSorter[] {\n    return this._currentSorters;\n  }\n\n  /*\n   * Reset the pagination options\n   */\n  resetPaginationOptions() {\n    this.odataService.updateOptions({\n      skip: 0\n    });\n  }\n\n  saveColumnFilter(fieldName: string, value: string, terms?: any[]) {\n    this.odataService.saveColumnFilter(fieldName, value, terms);\n  }\n\n  /*\n   * FILTERING\n   */\n  processOnFilterChanged(event: Event, args: FilterChangedArgs): Promise<string> {\n    const serviceOptions: GridOption = args.grid.getOptions();\n    const backendApi = serviceOptions.backendServiceApi;\n\n    if (backendApi === undefined) {\n      throw new Error('Something went wrong in the GridOdataService, \"backendServiceApi\" is not initialized');\n    }\n\n    // only add a delay when user is typing, on select dropdown filter it will execute right away\n    let debounceTypingDelay = 0;\n    if (event && (event.type === 'keyup' || event.type === 'keydown')) {\n      debounceTypingDelay = backendApi.filterTypingDebounce || DEFAULT_FILTER_TYPING_DEBOUNCE;\n    }\n\n    // keep current filters & always save it as an array (columnFilters can be an object when it is dealt by SlickGrid Filter)\n    this._currentFilters = this.castFilterToColumnFilter(args.columnFilters);\n\n    const promise = new Promise<string>((resolve, reject) => {\n      // reset Pagination, then build the OData query which we will use in the WebAPI callback\n      // wait a minimum user typing inactivity before processing any query\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        // loop through all columns to inspect filters & set the query\n        this.updateFilters(args.columnFilters);\n\n        this.resetPaginationOptions();\n        resolve(this.odataService.buildQuery());\n      }, debounceTypingDelay);\n    });\n\n    return promise;\n  }\n\n  /*\n   * PAGINATION\n   */\n  processOnPaginationChanged(event: Event, args: PaginationChangedArgs) {\n    const pageSize = +(args.pageSize || DEFAULT_PAGE_SIZE);\n    this.updatePagination(args.newPage, pageSize);\n\n    // build the OData query which we will use in the WebAPI callback\n    return this.odataService.buildQuery();\n  }\n\n  /*\n   * SORTING\n   */\n  processOnSortChanged(event: Event, args: SortChangedArgs) {\n    const sortColumns = (args.multiColumnSort) ? args.sortCols : new Array({ sortCol: args.sortCol, sortAsc: args.sortAsc });\n\n    // loop through all columns to inspect sorters & set the query\n    this.updateSorters(sortColumns);\n\n    // build the OData query which we will use in the WebAPI callback\n    return this.odataService.buildQuery();\n  }\n\n  /**\n   * loop through all columns to inspect filters & update backend service filteringOptions\n   * @param columnFilters\n   */\n  updateFilters(columnFilters: ColumnFilters | CurrentFilter[], isUpdatedByPreset?: boolean) {\n    let searchBy = '';\n    const searchByArray: string[] = [];\n\n    // loop through all columns to inspect filters\n    for (const columnId in columnFilters) {\n      if (columnFilters.hasOwnProperty(columnId)) {\n        const columnFilter = columnFilters[columnId];\n\n        // if user defined some \"presets\", then we need to find the filters from the column definitions instead\n        let columnDef: Column | undefined;\n        if (isUpdatedByPreset && Array.isArray(this._columnDefinitions)) {\n          columnDef = this._columnDefinitions.find((column: Column) => {\n            return column.id === columnFilter.columnId;\n          });\n        } else {\n          columnDef = columnFilter.columnDef;\n        }\n        if (!columnDef) {\n          throw new Error('[Backend Service API]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?');\n        }\n\n        let fieldName = columnDef.queryField || columnDef.queryFieldFilter || columnDef.field || columnDef.name || '';\n        const fieldType = columnDef.type || 'string';\n        const searchTerms = (columnFilter ? columnFilter.searchTerms : null) || [];\n        let fieldSearchValue = (Array.isArray(searchTerms) && searchTerms.length === 1) ? searchTerms[0] : '';\n        if (typeof fieldSearchValue === 'undefined') {\n          fieldSearchValue = '';\n        }\n\n        if (typeof fieldSearchValue !== 'string' && !searchTerms) {\n          throw new Error(`ODdata filter searchTerm property must be provided as type \"string\", if you use filter with options then make sure your IDs are also string. For example: filter: {model: Filters.select, collection: [{ id: \"0\", value: \"0\" }, { id: \"1\", value: \"1\" }]`);\n        }\n\n        fieldSearchValue = '' + fieldSearchValue; // make sure it's a string\n        const matches = fieldSearchValue.match(/^([<>!=\\*]{0,2})(.*[^<>!=\\*])([\\*]?)$/); // group 1: Operator, 2: searchValue, 3: last char is '*' (meaning starts with, ex.: abc*)\n        const operator = columnFilter.operator || ((matches) ? matches[1] : '');\n        let searchValue = (!!matches) ? matches[2] : '';\n        const lastValueChar = (!!matches) ? matches[3] : (operator === '*z' ? '*' : '');\n        const bypassOdataQuery = columnFilter.bypassBackendQuery || false;\n\n        // no need to query if search value is empty\n        if (fieldName && searchValue === '' && searchTerms.length === 0) {\n          this.removeColumnFilter(fieldName);\n          continue;\n        }\n\n        // escaping the search value\n        searchValue = searchValue.replace(`'`, `''`); // escape single quotes by doubling them\n        searchValue = encodeURIComponent(searchValue); // encode URI of the final search value\n\n        // extra query arguments\n        if (bypassOdataQuery) {\n          // push to our temp array and also trim white spaces\n          if (fieldName) {\n            this.saveColumnFilter(fieldName, fieldSearchValue, searchTerms);\n          }\n        } else {\n          searchBy = '';\n\n          // titleCase the fieldName so that it matches the WebApi names\n          if (this.odataService.options.caseType === CaseType.pascalCase) {\n            fieldName = String.titleCase(fieldName || '');\n          }\n\n          // when having more than 1 search term (then check if we have a \"IN\" or \"NOT IN\" filter search)\n          if (searchTerms && searchTerms.length > 1) {\n            const tmpSearchTerms = [];\n\n            if (operator === 'IN') {\n              // example:: (Stage eq \"Expired\" or Stage eq \"Renewal\")\n              for (let j = 0, lnj = searchTerms.length; j < lnj; j++) {\n                tmpSearchTerms.push(`${fieldName} eq '${searchTerms[j]}'`);\n              }\n              searchBy = tmpSearchTerms.join(' or ');\n              searchBy = `(${searchBy})`;\n            } else if (operator === 'NIN' || operator === 'NOTIN' || operator === 'NOT IN') {\n              // example:: (Stage ne \"Expired\" and Stage ne \"Renewal\")\n              for (let k = 0, lnk = searchTerms.length; k < lnk; k++) {\n                tmpSearchTerms.push(`${fieldName} ne '${searchTerms[k]}'`);\n              }\n              searchBy = tmpSearchTerms.join(' and ');\n              searchBy = `(${searchBy})`;\n            }\n          } else if (operator === '*' || operator === 'a*' || operator === '*z' || lastValueChar !== '') {\n            // first/last character is a '*' will be a startsWith or endsWith\n            searchBy = (operator === '*' || operator === '*z')\n              ? `endswith(${fieldName}, '${searchValue}')`\n              : `startswith(${fieldName}, '${searchValue}')`;\n          } else if (fieldType === FieldType.date) {\n            // date field needs to be UTC and within DateTime function\n            const dateFormatted = parseUtcDate(searchValue, true);\n            if (dateFormatted) {\n              searchBy = `${fieldName} ${this.mapOdataOperator(operator)} DateTime'${dateFormatted}'`;\n            }\n          } else if (fieldType === FieldType.string) {\n            // string field needs to be in single quotes\n            if (operator === '') {\n              searchBy = `substringof('${searchValue}', ${fieldName})`;\n            } else {\n              // searchBy = `substringof('${searchValue}', ${fieldNameCased}) ${this.mapOdataOperator(operator)} true`;\n              searchBy = `${fieldName} ${this.mapOdataOperator(operator)} '${searchValue}'`;\n            }\n          } else {\n            // any other field type (or undefined type)\n            searchValue = fieldType === FieldType.number ? searchValue : `'${searchValue}'`;\n            searchBy = `${fieldName} ${this.mapOdataOperator(operator)} ${searchValue}`;\n          }\n\n          // push to our temp array and also trim white spaces\n          if (searchBy !== '') {\n            searchByArray.push(String.trim(searchBy));\n            this.saveColumnFilter(fieldName || '', fieldSearchValue, searchTerms);\n          }\n        }\n      }\n    }\n\n    // update the service options with filters for the buildQuery() to work later\n    this.odataService.updateOptions({\n      filter: (searchByArray.length > 0) ? searchByArray.join(' and ') : '',\n      skip: undefined\n    });\n  }\n\n  /**\n   * Update the pagination component with it's new page number and size\n   * @param newPage\n   * @param pageSize\n   */\n  updatePagination(newPage: number, pageSize: number) {\n    this._currentPagination = {\n      pageNumber: newPage,\n      pageSize\n    };\n\n    this.odataService.updateOptions({\n      top: pageSize,\n      skip: (newPage - 1) * pageSize\n    });\n  }\n\n  /**\n   * loop through all columns to inspect sorters & update backend service orderBy\n   * @param columnFilters\n   */\n  updateSorters(sortColumns?: ColumnSort[], presetSorters?: CurrentSorter[]) {\n    let sortByArray: any[] = [];\n    const sorterArray: CurrentSorter[] = [];\n\n    if (!sortColumns && presetSorters) {\n      // make the presets the current sorters, also make sure that all direction are in lowercase for OData\n      sortByArray = presetSorters;\n      sortByArray.forEach((sorter) => sorter.direction = sorter.direction.toLowerCase() as SortDirectionString);\n\n      // display the correct sorting icons on the UI, for that it requires (columnId, sortAsc) properties\n      const tmpSorterArray = sortByArray.map((sorter) => {\n        const columnDef = this._columnDefinitions.find((column: Column) => column.id === sorter.columnId);\n\n        sorterArray.push({\n          columnId: columnDef ? ((columnDef.queryField || columnDef.queryFieldSorter || columnDef.field || columnDef.id) + '') : (sorter.columnId + ''),\n          direction: sorter.direction\n        });\n\n        // return only the column(s) found in the Column Definitions ELSE null\n        if (columnDef) {\n          return {\n            columnId: sorter.columnId,\n            sortAsc: sorter.direction.toUpperCase() === SortDirection.ASC\n          };\n        }\n        return null;\n      });\n      this._grid.setSortColumns(tmpSorterArray);\n    } else if (sortColumns && !presetSorters) {\n      // build the SortBy string, it could be multisort, example: customerNo asc, purchaserName desc\n      if (sortColumns && sortColumns.length === 0) {\n        sortByArray = new Array(this.defaultOptions.orderBy); // when empty, use the default sort\n      } else {\n        if (sortColumns) {\n          for (const columnDef of sortColumns) {\n            if (columnDef.sortCol) {\n              let fieldName = (columnDef.sortCol.queryField || columnDef.sortCol.queryFieldSorter || columnDef.sortCol.field || columnDef.sortCol.id) + '';\n              let columnFieldName = (columnDef.sortCol.field || columnDef.sortCol.id) + '';\n              if (this.odataService.options.caseType === CaseType.pascalCase) {\n                fieldName = String.titleCase(fieldName);\n                columnFieldName = String.titleCase(columnFieldName);\n              }\n\n              sorterArray.push({\n                columnId: columnFieldName,\n                direction: columnDef.sortAsc ? 'asc' : 'desc'\n              });\n            }\n          }\n          sortByArray = sorterArray;\n        }\n      }\n    }\n\n    // transform the sortby array into a CSV string for OData\n    sortByArray = sortByArray as CurrentSorter[];\n    const csvString = sortByArray.map((sorter) => `${sorter.columnId} ${sorter.direction.toLowerCase()}`).join(',');\n    this.odataService.updateOptions({\n      orderBy: (this.odataService.options.caseType === CaseType.pascalCase) ? String.titleCase(csvString) : csvString\n    });\n\n    // keep current Sorters and update the service options with the new sorting\n    this._currentSorters = sortByArray as CurrentSorter[];\n\n    // build the OData query which we will use in the WebAPI callback\n    return this.odataService.buildQuery();\n  }\n\n  //\n  // private functions\n  // -------------------\n  /**\n   * Cast provided filters (could be in multiple format) into an array of ColumnFilter\n   * @param columnFilters\n   */\n  private castFilterToColumnFilter(columnFilters: ColumnFilters | CurrentFilter[]): CurrentFilter[] {\n    // keep current filters & always save it as an array (columnFilters can be an object when it is dealt by SlickGrid Filter)\n    const filtersArray: ColumnFilter[] = ((typeof columnFilters === 'object') ? Object.keys(columnFilters).map(key => columnFilters[key]) : columnFilters) as CurrentFilter[];\n\n    return filtersArray.map((filter) => {\n      const columnDef = filter.columnDef;\n      const header = (columnDef) ? (columnDef.headerKey || columnDef.name || '') : '';\n      const tmpFilter: CurrentFilter = { columnId: filter.columnId || '' };\n      if (filter.operator) {\n        tmpFilter.operator = filter.operator;\n      }\n      if (Array.isArray(filter.searchTerms)) {\n        tmpFilter.searchTerms = filter.searchTerms;\n      }\n      return tmpFilter;\n    });\n  }\n\n  /**\n   * Mapper for mathematical operators (ex.: <= is \"le\", > is \"gt\")\n   * @param string operator\n   * @returns string map\n   */\n  private mapOdataOperator(operator: string) {\n    let map = '';\n    switch (operator) {\n      case '<':\n        map = 'lt';\n        break;\n      case '<=':\n        map = 'le';\n        break;\n      case '>':\n        map = 'gt';\n        break;\n      case '>=':\n        map = 'ge';\n        break;\n      case '<>':\n      case '!=':\n        map = 'ne';\n        break;\n      case '=':\n      case '==':\n      default:\n        map = 'eq';\n        break;\n    }\n\n    return map;\n  }\n}\n","import './global-utilities';\r\nimport { CaseType, OdataOption } from './../models/index';\r\n\r\nexport class OdataService {\r\n  _columnFilters: any;\r\n  _defaultSortBy: string;\r\n  _odataOptions: OdataOption;\r\n\r\n  constructor() {\r\n    this._odataOptions = {\r\n      filterQueue: [],\r\n      orderBy: ''\r\n    };\r\n    this._defaultSortBy = '';\r\n    this._columnFilters = {};\r\n  }\r\n\r\n  /*\r\n    * Build the OData query string from all the options provided\r\n    * @return string OData query\r\n    */\r\n  buildQuery(): string {\r\n    this._odataOptions.filterQueue = [];\r\n    const queryTmpArray = [];\r\n\r\n    if (this._odataOptions.top) {\r\n      queryTmpArray.push(`$top=${this._odataOptions.top}`);\r\n    }\r\n    if (this._odataOptions.skip) {\r\n      queryTmpArray.push(`$skip=${this._odataOptions.skip}`);\r\n    }\r\n    if (this._odataOptions.orderBy) {\r\n      let argument = '';\r\n      if (Array.isArray(this._odataOptions.orderBy)) {\r\n        argument = this._odataOptions.orderBy.join(','); // csv, that will form a query example like: $orderby=RoleName asc, Id desc\r\n      } else {\r\n        argument = this._odataOptions.orderBy;\r\n      }\r\n      queryTmpArray.push(`$orderby=${argument}`);\r\n    }\r\n    if (this._odataOptions.filterBy || this._odataOptions.filter) {\r\n      if (this._odataOptions.filter) {\r\n        this._odataOptions.filterQueue = [];\r\n        let filterStr = this._odataOptions.filter;\r\n        if (Array.isArray(this._odataOptions.filter)) {\r\n          filterStr = this._odataOptions.filter.join(` ${this._odataOptions.filterBySeparator || 'and'} `);\r\n        }\r\n        this._odataOptions.filterQueue.push(`(${filterStr})`);\r\n      }\r\n      // filterBy are passed manually by the user, however we will only add it if the column wasn't yet filtered\r\n      if (!!this._odataOptions.filterBy && !!this._odataOptions.filterBy.fieldName && !this._columnFilters[this._odataOptions.filterBy.fieldName.toLowerCase()]) {\r\n        if (this._odataOptions.filterBy.searchTerm !== '') {\r\n          this.saveColumnFilter(this._odataOptions.filterBy.fieldName.toLowerCase(), this._odataOptions.filterBy.searchTerm, this._odataOptions.filterBy.searchTerms);\r\n          this.updateFilterFromListTerms(this._odataOptions.filterBy);\r\n        }\r\n      }\r\n    }\r\n    if (this._odataOptions.filterQueue.length > 0) {\r\n      const query = this._odataOptions.filterQueue.join(` ${this._odataOptions.filterBySeparator || 'and'} `);\r\n      this._odataOptions.filter = query; // overwrite with\r\n      queryTmpArray.push(`$filter=${query}`);\r\n    }\r\n\r\n    // join all the odata functions by a '&'\r\n    return queryTmpArray.join('&');\r\n  }\r\n\r\n  getFilterByColumn(columnName: string): string {\r\n    return (!!this._columnFilters[columnName]) ? this._columnFilters[columnName] : null;\r\n  }\r\n\r\n  getFilterCount(): number {\r\n    return (this._odataOptions.filterQueue) ? this._odataOptions.filterQueue.length : 0;\r\n  }\r\n\r\n  get columnFilters(): any[] {\r\n    return this._columnFilters;\r\n  }\r\n\r\n  get options(): OdataOption {\r\n    return this._odataOptions;\r\n  }\r\n\r\n  set options(options: OdataOption) {\r\n    this._odataOptions = options;\r\n  }\r\n\r\n  removeColumnFilter(fieldName: string) {\r\n    delete this._columnFilters[fieldName];\r\n  }\r\n\r\n  saveColumnFilter(fieldName: string, value: any, searchTerms?: any[]) {\r\n    this._columnFilters[fieldName] = {\r\n      search: searchTerms,\r\n      value\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update the filter by a list of terms usually passed manually by the user as default filters\r\n   * @param filterOptions\r\n   * @returns\r\n   */\r\n  updateFilterFromListTerms(filterOptions: any) {\r\n    // build the filter query\r\n    if (Array.isArray(filterOptions)) {\r\n      filterOptions.forEach((filterOptionObject) => {\r\n        this.updateFilterFromTerm(filterOptionObject);\r\n      });\r\n    } else {\r\n      this.updateFilterFromTerm(filterOptions);\r\n    }\r\n  }\r\n\r\n  updateFilterFromTerm(filterOptions: any) {\r\n    let searchBy = '';\r\n    const tmpSearchByArray = [];\r\n    const fieldName = filterOptions.fieldName;\r\n    const fieldSearchTerms = filterOptions.searchTerms;\r\n    const operator = filterOptions.operator;\r\n\r\n    // when having more than 1 search term (then check if we have a \"IN\" or \"NOT IN\" filter search)\r\n    if (!!fieldSearchTerms && fieldSearchTerms.length > 0) {\r\n      const tmpSearchTerms = [];\r\n\r\n      if (operator === 'IN') {\r\n        // example:: (Stage eq \"Expired\" or Stage eq \"Renewal\")\r\n        for (let j = 0, lnj = fieldSearchTerms.length; j < lnj; j++) {\r\n          tmpSearchTerms.push(`${fieldName} eq '${fieldSearchTerms[j]}'`);\r\n        }\r\n        searchBy = tmpSearchTerms.join(' or ');\r\n        searchBy = `$(${searchBy})`;\r\n      } else if (operator === 'NIN' || operator === 'NOTIN' || operator === 'NOT IN') {\r\n        // example:: (Stage ne \"Expired\" and Stage ne \"Renewal\")\r\n        for (let k = 0, lnk = fieldSearchTerms.length; k < lnk; k++) {\r\n          tmpSearchTerms.push(`${fieldName} ne '${fieldSearchTerms[k]}'`);\r\n        }\r\n        searchBy = tmpSearchTerms.join(' and ');\r\n        searchBy = `$(${searchBy})`;\r\n      }\r\n    }\r\n\r\n    // push to our temp array and also trim white spaces\r\n    tmpSearchByArray.push(String.trim(searchBy));\r\n\r\n    // add to the filter queue only if it doesn't exist in the queue\r\n    const filter = (tmpSearchByArray.length > 0) ? tmpSearchByArray.join(' and ') : '';\r\n    if (this._odataOptions.filterQueue && this._odataOptions.filterQueue.indexOf(filter) === -1) {\r\n      this._odataOptions.filterQueue.push(filter);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Change any OData options that will be used to build the query\r\n   * @param object options\r\n   */\r\n  updateOptions(options: OdataOption) {\r\n    for (const property of Object.keys(options)) {\r\n      if (options.hasOwnProperty(property)) {\r\n        this._odataOptions[property] = options[property]; // replace of the property\r\n      }\r\n\r\n      // we need to keep the defaultSortBy for references whenever the user removes his Sorting\r\n      // then we would revert to the defaultSortBy and the only way is to keep a hard copy here\r\n      if (property === 'orderBy' || property === 'sortBy') {\r\n        let sortBy = options[property];\r\n\r\n        // make sure first char of each orderBy field is capitalize\r\n        if (this._odataOptions.caseType === CaseType.pascalCase) {\r\n          if (Array.isArray(sortBy)) {\r\n            sortBy.forEach((field, index, inputArray) => {\r\n              inputArray[index] = String.titleCase(field);\r\n            });\r\n          } else {\r\n            sortBy = String.titleCase(options[property]);\r\n          }\r\n        }\r\n        this._odataOptions.orderBy = sortBy;\r\n        this._defaultSortBy = sortBy;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","import { OnEventArgs, CellArgs, GridOption } from './../models/index';\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\nexport class GridEventService {\r\n  private _eventHandler: any = new Slick.EventHandler();\r\n\r\n  /* OnCellChange Event */\r\n  attachOnCellChange(grid: any, dataView: any) {\r\n    // subscribe to this Slickgrid event of onCellChange\r\n    this._eventHandler.subscribe(grid.onCellChange, (e: Event, args: CellArgs) => {\r\n      if (!e || !args || !grid || args.cell === undefined || !grid.getColumns || !grid.getDataItem) {\r\n        return;\r\n      }\r\n      const column = grid.getColumns()[args.cell];\r\n\r\n      // if the column definition has a onCellChange property (a callback function), then run it\r\n      if (typeof column.onCellChange === 'function') {\r\n        // add to the output gridOptions & dataView since we'll need them inside the AJAX column.onCellChange\r\n        const returnedArgs: OnEventArgs = {\r\n          row: args.row,\r\n          cell: args.cell,\r\n          dataView,\r\n          gridDefinition: grid.getOptions(),\r\n          grid,\r\n          columnDef: column,\r\n          dataContext: grid.getDataItem(args.row)\r\n        };\r\n\r\n        // finally call up the Slick.column.onCellChanges.... function\r\n        column.onCellChange(e, returnedArgs);\r\n      }\r\n    });\r\n  }\r\n  /* OnClick Event */\r\n  attachOnClick(grid: any, dataView: any) {\r\n    this._eventHandler.subscribe(grid.onClick, (e: Event, args: CellArgs) => {\r\n      if (!e || !args || !grid || args.cell === undefined || !grid.getColumns || !grid.getDataItem) {\r\n        return;\r\n      }\r\n      const column = grid.getColumns()[args.cell];\r\n\r\n      // if the column definition has a onCellClick property (a callback function), then run it\r\n      if (typeof column.onCellClick === 'function') {\r\n        // add to the output gridOptions & dataView since we'll need them inside the AJAX column.onClick\r\n        const returnedArgs: OnEventArgs = {\r\n          row: args.row,\r\n          cell: args.cell,\r\n          dataView,\r\n          gridDefinition: grid.getOptions(),\r\n          grid,\r\n          columnDef: column,\r\n          dataContext: grid.getDataItem(args.row)\r\n        };\r\n\r\n        // finally call up the Slick.column.onCellClick.... function\r\n        column.onCellClick(e, returnedArgs);\r\n      }\r\n    });\r\n  }\r\n\r\n  dispose() {\r\n    this._eventHandler.unsubscribeAll();\r\n  }\r\n}\r\n","import {\n  Column,\n  CurrentColumn,\n  CurrentFilter,\n  CurrentPagination,\n  CurrentSorter,\n  ExtensionName,\n  GridOption,\n  GridState,\n  GridStateChange,\n  GridStateType,\n} from './../models/index';\nimport { ExtensionService } from './extension.service';\nimport { FilterService } from './filter.service';\nimport { SortService } from './sort.service';\nimport { Subject, Subscription } from 'rxjs';\n\n// using external non-typed js libraries\ndeclare var $: any;\ndeclare var Slick: any;\n\nexport class GridStateService {\n  private _eventHandler = new Slick.EventHandler();\n  private _columns: Column[] = [];\n  private _currentColumns: CurrentColumn[] = [];\n  private _grid: any;\n  private extensionService: ExtensionService;\n  private filterService: FilterService;\n  private sortService: SortService;\n  private subscriptions: Subscription[] = [];\n  onGridStateChanged = new Subject<GridStateChange>();\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  /**\n   * Initialize the Export Service\n   * @param grid\n   * @param filterService\n   * @param sortService\n   * @param dataView\n   */\n  init(grid: any, extensionService: ExtensionService, filterService: FilterService, sortService: SortService): void {\n    this._grid = grid;\n    this.extensionService = extensionService;\n    this.filterService = filterService;\n    this.sortService = sortService;\n\n    this.subscribeToAllGridChanges(grid);\n  }\n\n  /** Dispose of all the SlickGrid & Angular subscriptions */\n  dispose() {\n    // unsubscribe all SlickGrid events\n    this._eventHandler.unsubscribeAll();\n\n    // also unsubscribe all Angular Subscriptions\n    this.subscriptions.forEach((subscription: Subscription) => {\n      if (subscription && subscription.unsubscribe) {\n        subscription.unsubscribe();\n      }\n    });\n    this.subscriptions = [];\n  }\n\n  /**\n   * Get the current grid state (filters/sorters/pagination)\n   * @return grid state\n   */\n  getCurrentGridState(): GridState {\n    const gridState: GridState = {\n      columns: this.getCurrentColumns(),\n      filters: this.getCurrentFilters(),\n      sorters: this.getCurrentSorters()\n    };\n\n    const currentPagination = this.getCurrentPagination();\n    if (currentPagination) {\n      gridState.pagination = currentPagination;\n    }\n    return gridState;\n  }\n\n  /**\n   * Get the Columns (and their state: visibility/position) that are currently applied in the grid\n   * @return current columns\n   */\n  getColumns(): Column[] {\n    return this._columns || this._grid.getColumns();\n  }\n\n  /**\n   * From an array of Grid Column Definitions, get the associated Current Columns\n   * @param gridColumns\n   */\n  getAssociatedCurrentColumns(gridColumns: Column[]): CurrentColumn[] {\n    const currentColumns: CurrentColumn[] = [];\n\n    if (gridColumns && Array.isArray(gridColumns)) {\n      gridColumns.forEach((column: Column, index: number) => {\n        if (column && column.id) {\n          currentColumns.push({\n            columnId: column.id as string,\n            cssClass: column.cssClass || '',\n            headerCssClass: column.headerCssClass || '',\n            width: column.width || 0\n          });\n        }\n      });\n    }\n    this._currentColumns = currentColumns;\n    return currentColumns;\n  }\n\n  /**\n   * From an array of Current Columns, get the associated Grid Column Definitions\n   * @param grid\n   * @param currentColumns\n   */\n  getAssociatedGridColumns(grid: any, currentColumns: CurrentColumn[]): Column[] {\n    const columns: Column[] = [];\n    const gridColumns: Column[] = grid.getColumns();\n\n    if (currentColumns && Array.isArray(currentColumns)) {\n      currentColumns.forEach((currentColumn: CurrentColumn, index: number) => {\n        const gridColumn: Column = gridColumns.find((c: Column) => c.id === currentColumn.columnId);\n        if (gridColumn && gridColumn.id) {\n          columns.push({\n            ...gridColumn,\n            cssClass: currentColumn.cssClass,\n            headerCssClass: currentColumn.headerCssClass,\n            width: currentColumn.width\n          });\n        }\n      });\n    }\n    this._columns = columns;\n    return columns;\n  }\n\n  /**\n   * Get the Columns (and their state: visibility/position) that are currently applied in the grid\n   * @return current columns\n   */\n  getCurrentColumns(): CurrentColumn[] {\n    let currentColumns: CurrentColumn[] = [];\n    if (this._currentColumns && Array.isArray(this._currentColumns) && this._currentColumns.length > 0) {\n      currentColumns = this._currentColumns;\n    } else {\n      currentColumns = this.getAssociatedCurrentColumns(this._grid.getColumns());\n    }\n\n    return currentColumns;\n  }\n\n  /**\n   * Get the Filters (and their state, columnId, searchTerm(s)) that are currently applied in the grid\n   * @return current filters\n   */\n  getCurrentFilters(): CurrentFilter[] | null {\n    if (this._gridOptions && this._gridOptions.backendServiceApi) {\n      const backendService = this._gridOptions.backendServiceApi.service;\n      if (backendService && backendService.getCurrentFilters) {\n        return backendService.getCurrentFilters() as CurrentFilter[];\n      }\n    } else if (this.filterService && this.filterService.getCurrentLocalFilters) {\n      return this.filterService.getCurrentLocalFilters();\n    }\n    return null;\n  }\n\n  /**\n   * Get current Pagination (and it's state, pageNumber, pageSize) that are currently applied in the grid\n   * @return current pagination state\n   */\n  getCurrentPagination(): CurrentPagination | null {\n    if (this._gridOptions && this._gridOptions.backendServiceApi) {\n      const backendService = this._gridOptions.backendServiceApi.service;\n      if (backendService && backendService.getCurrentPagination) {\n        return backendService.getCurrentPagination();\n      }\n    } else {\n      // TODO implement this whenever local pagination gets implemented\n    }\n    return null;\n  }\n\n  /**\n   * Get the current Sorters (and their state, columnId, direction) that are currently applied in the grid\n   * @return current sorters\n   */\n  getCurrentSorters(): CurrentSorter[] | null {\n    if (this._gridOptions && this._gridOptions.backendServiceApi) {\n      const backendService = this._gridOptions.backendServiceApi.service;\n      if (backendService && backendService.getCurrentSorters) {\n        return backendService.getCurrentSorters() as CurrentSorter[];\n      }\n    } else if (this.sortService && this.sortService.getCurrentLocalSorters) {\n      return this.sortService.getCurrentLocalSorters();\n    }\n    return null;\n  }\n\n  /**\n   * Hook a SlickGrid Extension Event to a Grid State change event\n   * @param extension name\n   * @param grid\n   */\n  hookExtensionEventToGridStateChange(extensionName: ExtensionName, eventName: string) {\n    const extension = this.extensionService && this.extensionService.getExtensionByName(extensionName);\n\n    if (extension && extension.class && extension.class[eventName] && extension.class[eventName].subscribe) {\n      this._eventHandler.subscribe(extension.class[eventName], (e: Event, args: any) => {\n        const columns: Column[] = args && args.columns;\n        const currentColumns: CurrentColumn[] = this.getAssociatedCurrentColumns(columns);\n        this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });\n      });\n    }\n  }\n\n  /**\n   * Hook a Grid Event to a Grid State change event\n   * @param event name\n   * @param grid\n   */\n  hookSlickGridEventToGridStateChange(eventName: string, grid: any) {\n    if (grid && grid[eventName] && grid[eventName].subscribe) {\n      this._eventHandler.subscribe(grid[eventName], (e: Event, args: any) => {\n        const columns: Column[] = grid.getColumns();\n        const currentColumns: CurrentColumn[] = this.getAssociatedCurrentColumns(columns);\n        this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });\n      });\n    }\n  }\n\n  resetColumns(columnDefinitions?: Column[]) {\n    const columns: Column[] = columnDefinitions || this._columns;\n    const currentColumns: CurrentColumn[] = this.getAssociatedCurrentColumns(columns);\n    this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });\n  }\n\n  /** if we use Row Selection or the Checkbox Selector, we need to reset any selection */\n  resetRowSelection() {\n    if (this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector) {\n      // this also requires the Row Selection Model to be registered as well\n      const rowSelectionExtension = this.extensionService && this.extensionService.getExtensionByName && this.extensionService.getExtensionByName(ExtensionName.rowSelection);\n      if (rowSelectionExtension && rowSelectionExtension.extension) {\n        this._grid.setSelectedRows([]);\n      }\n    }\n  }\n\n  /**\n   * Subscribe to all necessary SlickGrid or Service Events that deals with a Grid change,\n   * when triggered, we will publish a Grid State Event with current Grid State\n   */\n  subscribeToAllGridChanges(grid: any) {\n    // Subscribe to Event Emitter of Filter changed\n    this.subscriptions.push(\n      this.filterService.onFilterChanged.subscribe((currentFilters: CurrentFilter[]) => {\n        this.resetRowSelection();\n        this.onGridStateChanged.next({ change: { newValues: currentFilters, type: GridStateType.filter }, gridState: this.getCurrentGridState() });\n      })\n    );\n    // Subscribe to Event Emitter of Filter cleared\n      this.subscriptions.push(\n        this.filterService.onFilterCleared.subscribe(() => {\n          this.resetRowSelection();\n          this.onGridStateChanged.next({ change: { newValues: [], type: GridStateType.filter }, gridState: this.getCurrentGridState() });\n        })\n      );\n\n    // Subscribe to Event Emitter of Sort changed\n    this.subscriptions.push(\n      this.sortService.onSortChanged.subscribe((currentSorters: CurrentSorter[]) => {\n        this.resetRowSelection();\n        this.onGridStateChanged.next({ change: { newValues: currentSorters, type: GridStateType.sorter }, gridState: this.getCurrentGridState() });\n      })\n    );\n\n    // Subscribe to Event Emitter of Sort cleared\n    this.subscriptions.push(\n      this.sortService.onSortCleared.subscribe(() => {\n        this.resetRowSelection();\n        this.onGridStateChanged.next({ change: { newValues: [], type: GridStateType.sorter }, gridState: this.getCurrentGridState() });\n      })\n    );\n\n    // Subscribe to ColumnPicker and/or GridMenu for show/hide Columns visibility changes\n    this.hookExtensionEventToGridStateChange(ExtensionName.columnPicker, 'onColumnsChanged');\n    this.hookExtensionEventToGridStateChange(ExtensionName.gridMenu, 'onColumnsChanged');\n\n    // subscribe to Column Resize & Reordering\n    this.hookSlickGridEventToGridStateChange('onColumnsReordered', grid);\n    this.hookSlickGridEventToGridStateChange('onColumnsResized', grid);\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport { Injectable } from '@angular/core';\nimport { CellArgs, Column, GridOption, OnEventArgs } from './../models/index';\nimport { ExtensionService } from './extension.service';\nimport { FilterService } from './filter.service';\nimport { GridStateService } from './gridState.service';\nimport { SortService } from './sort.service';\n\n// using external non-typed js libraries\ndeclare var $: any;\ndeclare var Slick: any;\n\n@Injectable()\nexport class GridService {\n  private _grid: any;\n  private _dataView: any;\n\n  constructor(private extensionService: ExtensionService, private filterService: FilterService, private gridStateService: GridStateService, private sortService: SortService, private translate: TranslateService) { }\n\n  /** Getter for the Column Definitions pulled through the Grid Object */\n  private get _columnDefinitions(): Column[] {\n    return (this._grid && this._grid.getColumns) ? this._grid.getColumns() : [];\n  }\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  init(grid: any, dataView: any): void {\n    this._grid = grid;\n    this._dataView = dataView;\n  }\n\n  /**\n   * From a SlickGrid Event triggered get the Column Definition and Item Data Context\n   *\n   * For example the SlickGrid onClick will return cell arguments when subscribing to it.\n   * From these cellArgs, we want to get the Column Definition and Item Data\n   * @param cell event args\n   * @return object with columnDef and dataContext\n   */\n  getColumnFromEventArguments(args: CellArgs): OnEventArgs {\n    if (!args || !args.grid || !args.grid.getColumns || !args.grid.getDataItem) {\n      throw new Error('To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)');\n    }\n\n    return {\n      row: args.row,\n      cell: args.cell,\n      columnDef: args.grid.getColumns()[args.cell],\n      dataContext: args.grid.getDataItem(args.row),\n      dataView: this._dataView,\n      grid: this._grid,\n      gridDefinition: this._gridOptions\n    };\n  }\n\n  /** Get data item by it's row index number */\n  getDataItemByRowNumber(rowNumber: number) {\n    if (!this._grid || typeof this._grid.getDataItem !== 'function') {\n      throw new Error('We could not find SlickGrid Grid object');\n    }\n    return this._grid.getDataItem(rowNumber);\n  }\n\n  /** Chain the item Metadata with our implementation of Metadata at given row index */\n  getItemRowMetadataToHighlight(previousItemMetadata: any) {\n    return (rowNumber: number) => {\n      const item = this._dataView.getItem(rowNumber);\n      let meta = { cssClasses: '' };\n      if (typeof previousItemMetadata === 'function') {\n        meta = previousItemMetadata(rowNumber);\n      }\n\n      if (item && item._dirty) {\n        meta.cssClasses = (meta && meta.cssClasses || '') + ' dirty';\n      }\n\n      if (!meta) {\n        meta = { cssClasses: '' };\n      }\n\n      if (item && item.rowClass && meta) {\n        meta.cssClasses += ` ${item.rowClass}`;\n        meta.cssClasses += ` row${rowNumber}`;\n      }\n\n      return meta;\n    };\n  }\n\n  /**\n   * Highlight then fade a row for x seconds.\n   * The implementation follows this SO answer: https://stackoverflow.com/a/19985148/1212166\n   * @param rowNumber\n   * @param fadeDelay\n   */\n  highlightRow(rowNumber: number | number[], fadeDelay: number = 1500) {\n    // create a SelectionModel if there's not one yet\n    if (!this._grid.getSelectionModel()) {\n      const rowSelectionPlugin = new Slick.RowSelectionModel(this._gridOptions.rowSelectionOptions || {});\n      this._grid.setSelectionModel(rowSelectionPlugin);\n    }\n\n    const rowIndexes = Array.isArray(rowNumber) ? rowNumber : [rowNumber];\n    this._grid.setSelectedRows(rowIndexes);\n\n    if (Array.isArray(rowNumber)) {\n      rowNumber.forEach(row => this.highlightRowByMetadata(row, fadeDelay));\n    } else {\n      this.highlightRowByMetadata(rowNumber, fadeDelay);\n    }\n  }\n\n  highlightRowByMetadata(rowNumber: number, fadeDelay: number = 1500) {\n    this._dataView.getItemMetadata = this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);\n\n    const item = this._dataView.getItem(rowNumber);\n    if (item && item.id) {\n      item.rowClass = 'highlight';\n      this._dataView.updateItem(item.id, item);\n      const gridOptions = this._grid.getOptions() as GridOption;\n\n      // highlight the row for a user defined timeout\n      $(`#${gridOptions.gridId}`)\n          .find(`.highlight.row${rowNumber}`)\n          .first();\n\n      // delete the row's CSS that was attached for highlighting\n      setTimeout(() => {\n        if (item && item.id) {\n          delete item.rowClass;\n          const gridIdx = this._dataView.getIdxById(item.id);\n          if (gridIdx !== undefined) {\n            this._dataView.updateItem(item.id, item);\n          }\n        }\n      }, fadeDelay + 10);\n    }\n  }\n\n  /** Get the Data Item from a grid row index */\n  getDataItemByRowIndex(index: number) {\n    if (!this._grid || typeof this._grid.getDataItem !== 'function') {\n      throw new Error('We could not find SlickGrid Grid object');\n    }\n\n    return this._grid.getDataItem(index);\n  }\n\n  /** Get the Data Item from an array of grid row indexes */\n  getDataItemByRowIndexes(indexes: number[]) {\n    if (!this._grid || typeof this._grid.getDataItem !== 'function') {\n      throw new Error('We could not find SlickGrid Grid object');\n    }\n\n    const dataItems = [];\n\n    if (Array.isArray(indexes)) {\n      indexes.forEach((idx) => {\n        dataItems.push(this._grid.getDataItem(idx));\n      });\n    }\n\n    return dataItems;\n  }\n\n  /** Get the currently selected row indexes */\n  getSelectedRows() {\n    return this._grid.getSelectedRows();\n  }\n\n  /** Get the currently selected rows item data */\n  getSelectedRowsDataItem() {\n    if (!this._grid || typeof this._grid.getSelectedRows !== 'function') {\n      throw new Error('We could not find SlickGrid Grid object');\n    }\n\n    const selectedRowIndexes = this._grid.getSelectedRows();\n    return this.getDataItemByRowIndexes(selectedRowIndexes);\n  }\n\n  /** Select the selected row by a row index */\n  setSelectedRow(rowIndex: number) {\n    this._grid.setSelectedRows([rowIndex]);\n  }\n\n  /** Set selected rows with provided array of row indexes */\n  setSelectedRows(rowIndexes: number[]) {\n    this._grid.setSelectedRows(rowIndexes);\n  }\n\n  /** Re-Render the Grid */\n  renderGrid() {\n    if (this._grid && typeof this._grid.invalidate === 'function') {\n      this._grid.invalidate();\n      this._grid.render();\n    }\n  }\n\n  /**\n   * Reset the grid to it's original state (clear any filters, sorting & pagination if exists) .\n   * The column definitions could be passed as argument to reset (this can be used after a Grid State reset)\n   * The reset will clear the Filters & Sort, then will reset the Columns to their original state\n   */\n  resetGrid(columnDefinitions?: Column[]) {\n    // reset columns to original states & refresh the grid\n    if (this._grid && this._dataView) {\n      const originalColumns = this.extensionService.getAllColumns();\n      // const originalColumns = columnDefinitions || this._columnDefinitions;\n      if (Array.isArray(originalColumns) && originalColumns.length > 0) {\n        // set the grid columns to it's original column definitions\n        this._grid.setColumns(originalColumns);\n        this._dataView.refresh();\n        if (this._gridOptions && this._gridOptions.enableAutoSizeColumns) {\n          this._grid.autosizeColumns();\n        }\n        this.gridStateService.resetColumns(columnDefinitions);\n      }\n    }\n    if (this.filterService && this.filterService.clearFilters) {\n      this.filterService.clearFilters();\n    }\n    if (this.sortService && this.sortService.clearSorting) {\n      this.sortService.clearSorting();\n    }\n  }\n\n  /**\n   * Add an item (data item) to the datagrid, by default it will highlight (flashing) the inserted row but we can disable it too\n   * @param object dataItem: item object holding all properties of that row\n   * @param shouldHighlightRow do we want to highlight the row after adding item\n   */\n  addItemToDatagrid(item: any, shouldHighlightRow = true) {\n    if (!this._grid || !this._gridOptions || !this._dataView) {\n      throw new Error('We could not find SlickGrid Grid, DataView objects');\n    }\n\n    const row = 0;\n    this._dataView.insertItem(row, item);\n    this._grid.scrollRowIntoView(0); // scroll to row 0\n\n    // highlight the row we just added, if defined\n    if (shouldHighlightRow) {\n      this.highlightRow(0, 1500);\n    }\n\n    // refresh dataview & grid\n    this._dataView.refresh();\n  }\n\n  /**\n   * Add item array (data item) to the datagrid, by default it will highlight (flashing) the inserted row but we can disable it too\n   * @param dataItem array: item object holding all properties of that row\n   * @param shouldHighlightRow do we want to highlight the row after adding item\n   */\n  addItemsToDatagrid(items: any[], shouldHighlightRow = true) {\n    if (Array.isArray(items)) {\n      items.forEach((item: any) => this.addItemToDatagrid(item, shouldHighlightRow));\n    }\n  }\n\n  /**\n   * Delete an existing item from the datagrid (dataView)\n   * @param object item: item object holding all properties of that row\n   */\n  deleteDataGridItem(item: any) {\n    if (!item || !item.hasOwnProperty('id')) {\n      throw new Error(`deleteDataGridItem() requires an item object which includes the \"id\" property`);\n    }\n    const itemId = (!item || !item.hasOwnProperty('id')) ? undefined : item.id;\n    this.deleteDataGridItemById(itemId);\n  }\n\n  /**\n   * Delete an existing item from the datagrid (dataView) by it's id\n   * @param itemId: item unique id\n   */\n  deleteDataGridItemById(itemId: string | number) {\n    if (itemId === undefined) {\n      throw new Error(`Cannot delete a row without a valid \"id\"`);\n    }\n\n    // delete the item from the dataView\n    this._dataView.deleteItem(itemId);\n    this._dataView.refresh();\n  }\n\n  /**\n   * Update an existing item with new properties inside the datagrid\n   * @param object item: item object holding all properties of that row\n   * @return grid row index\n   */\n  updateDataGridItem(item: any, shouldHighlightRow = true) {\n    const itemId = (!item || !item.hasOwnProperty('id')) ? undefined : item.id;\n\n    if (itemId === undefined) {\n      throw new Error(`Could not find the item in the grid or it's associated \"id\"`);\n    }\n\n    return this.updateDataGridItemById(itemId, item, shouldHighlightRow);\n  }\n\n  /**\n   * Update an array of existing items with new properties inside the datagrid\n   * @param object item: item object holding all properties of that row\n   */\n  updateDataGridItems(items: any[], shouldHighlightRow = true) {\n    if (!Array.isArray(items)) {\n      throw new Error('The function \"updateDataGridItems\" only support array of items, if you wish to only update 1 item then use \"updateDataGridItem\"');\n    }\n\n    const gridIndexes: number[] = [];\n    items.forEach((item) => {\n      gridIndexes.push(this.updateDataGridItem(item, false));\n    });\n\n    // only highlight at the end, all at once\n    // we have to do this because doing highlight 1 by 1 would only re-select the last highlighted row which is wrong behavior\n    if (shouldHighlightRow) {\n      this.highlightRow(gridIndexes);\n    }\n  }\n\n  /**\n   * Update an existing item in the datagrid by it's id and new properties\n   * @param itemId: item unique id\n   * @param object item: item object holding all properties of that row\n   * @param shouldHighlightRow do we want to highlight the row after update\n   * @return grid row index\n   */\n  updateDataGridItemById(itemId: number | string, item: any, shouldHighlightRow = true) {\n    if (itemId === undefined) {\n      throw new Error(`Cannot update a row without a valid \"id\"`);\n    }\n    const row = this._dataView.getRowById(itemId);\n\n    if (!item || row === undefined) {\n      throw new Error(`Could not find the item in the grid or it's associated \"id\"`);\n    }\n\n    const gridIdx = this._dataView.getIdxById(itemId);\n    if (gridIdx !== undefined) {\n      // Update the item itself inside the dataView\n      this._dataView.updateItem(itemId, item);\n\n      // highlight the row we just updated, if defined\n      if (shouldHighlightRow) {\n        this.highlightRow(row, 1500);\n      }\n\n      // refresh dataview & grid\n      this._dataView.refresh();\n\n      return gridIdx;\n    }\n  }\n}\n","\r\nimport {\r\n  Column,\r\n  GridOption\r\n} from './../models/index';\r\n\r\n// using external non-typed js libraries\r\ndeclare let $: any;\r\n\r\n// using external non-typed js libraries\r\ndeclare var Slick: any;\r\n\r\nexport class GroupingAndColspanService {\r\n  private _eventHandler = new Slick.EventHandler();\r\n  private _dataView: any;\r\n  private _grid: any;\r\n\r\n  /** Getter for the Grid Options pulled through the Grid Object */\r\n  private get _gridOptions(): GridOption {\r\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\r\n  }\r\n\r\n  /** Getter for the Column Definitions pulled through the Grid Object */\r\n  private get _columnDefinitions(): Column[] {\r\n    return (this._grid && this._grid.getColumns) ? this._grid.getColumns() : [];\r\n  }\r\n\r\n  init(grid: any, dataView: any) {\r\n    this._grid = grid;\r\n    this._dataView = dataView;\r\n\r\n    if (grid && this._gridOptions) {\r\n      // When dealing with Pre-Header Grouping colspan, we need to re-create the pre-header in multiple occasions\r\n      // for all these occasions, we have to trigger a re-create\r\n      if (this._gridOptions.createPreHeaderPanel) {\r\n        this._eventHandler.subscribe(grid.onSort, (e: Event, args: any) => {\r\n          this.createPreHeaderRowGroupingTitle();\r\n        });\r\n        this._eventHandler.subscribe(grid.onColumnsResized, (e: Event, args: any) => {\r\n          this.createPreHeaderRowGroupingTitle();\r\n        });\r\n        this._eventHandler.subscribe(dataView.onRowCountChanged, (e: Event, args: any) => {\r\n          this.createPreHeaderRowGroupingTitle();\r\n        });\r\n\r\n        // also not sure why at this point, but it seems that I need to call the 1st create in a delayed execution\r\n        // probably some kind of timing issues and delaying it until the grid is fully ready does help\r\n        setTimeout(() => {\r\n          this.createPreHeaderRowGroupingTitle();\r\n        }, 50);\r\n      }\r\n    }\r\n  }\r\n\r\n  dispose() {\r\n    // unsubscribe all SlickGrid events\r\n    this._eventHandler.unsubscribeAll();\r\n  }\r\n\r\n  createPreHeaderRowGroupingTitle() {\r\n    const $preHeaderPanel = $(this._grid.getPreHeaderPanel())\r\n      .empty()\r\n      .addClass('slick-header-columns')\r\n      .css('left', '-1000px')\r\n      .width(this._grid.getHeadersWidth());\r\n    $preHeaderPanel.parent().addClass('slick-header');\r\n    const headerColumnWidthDiff = this._grid.getHeaderColumnWidthDiff();\r\n    let m;\r\n    let header;\r\n    let lastColumnGroup = '';\r\n    let widthTotal = 0;\r\n\r\n    for (let i = 0; i < this._columnDefinitions.length; i++) {\r\n      m = this._columnDefinitions[i];\r\n      if (lastColumnGroup === m.columnGroup && i > 0) {\r\n        widthTotal += m.width;\r\n        header.width(widthTotal - headerColumnWidthDiff);\r\n      } else {\r\n        widthTotal = m.width;\r\n        header = $(`<div class=\"ui-state-default slick-header-column\" />`)\r\n          .html(`<span class=\"slick-column-name\">${m.columnGroup || ''}</span>`)\r\n          .width(m.width - headerColumnWidthDiff)\r\n          .appendTo($preHeaderPanel);\r\n      }\r\n      lastColumnGroup = m.columnGroup;\r\n    }\r\n  }\r\n}\r\n","import { GridOption } from './../models/index';\nimport { getScrollBarWidth } from './utilities';\nimport { Subject } from 'rxjs';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n// global constants, height/width are in pixels\nconst DATAGRID_MIN_HEIGHT = 180;\nconst DATAGRID_MIN_WIDTH = 300;\nconst DATAGRID_BOTTOM_PADDING = 20;\nconst DATAGRID_PAGINATION_HEIGHT = 35;\n\nexport interface GridDimension {\n  height: number;\n  width: number;\n  heightWithPagination?: number;\n}\n\nexport class ResizerService {\n  private _fixedHeight: number | null;\n  private _fixedWidth: number | null;\n  private _grid: any;\n  private _lastDimensions: GridDimension;\n  private _timer: any;\n  onGridBeforeResize = new Subject<boolean>();\n\n  /** Getter for the Grid Options pulled through the Grid Object */\n  private get _gridOptions(): GridOption {\n    return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};\n  }\n\n  private get _gridUid(): string {\n    return (this._grid && this._grid.getUID) ? this._grid.getUID() : this._gridOptions.gridId;\n  }\n\n  init(grid: any, fixedDimensions?: GridDimension): void {\n    this._grid = grid;\n    if (fixedDimensions) {\n      this._fixedHeight = fixedDimensions.height;\n      this._fixedWidth = fixedDimensions.width;\n    }\n  }\n\n  /** Attach an auto resize trigger on the datagrid, if that is enable then it will resize itself to the available space\n   * Options: we could also provide a % factor to resize on each height/width independently\n   */\n  attachAutoResizeDataGrid(newSizes?: GridDimension) {\n    // if we can't find the grid to resize, return without attaching anything\n    const gridDomElm = $(`#${this._gridOptions && this._gridOptions.gridId ? this._gridOptions.gridId : 'grid1'}`);\n    if (gridDomElm === undefined || gridDomElm.offset() === undefined) {\n      return null;\n    }\n\n    // -- 1st resize the datagrid size at first load (we need this because the .on event is not triggered on first load)\n    // -- also we add a slight delay (in ms) so that we resize after the grid render is done\n    this.resizeGrid(10, newSizes);\n\n    // -- 2nd attach a trigger on the Window DOM element, so that it happens also when resizing after first load\n    // -- attach auto-resize to Window object only if it exist\n    $(window).on(`resize.grid.${this._gridUid}`, () => {\n      this.onGridBeforeResize.next(true);\n      this.resizeGrid(0, newSizes);\n    });\n  }\n\n  /**\n   * Calculate the datagrid new height/width from the available space, also consider that a % factor might be applied to calculation\n   * object gridOptions\n   */\n  calculateGridNewDimensions(gridOptions: GridOption): GridDimension | null {\n    const gridDomElm = $(`#${gridOptions.gridId}`);\n    const autoResizeOptions = gridOptions && gridOptions.autoResize;\n    const containerElm = (autoResizeOptions && autoResizeOptions.containerId) ? $(`#${autoResizeOptions.containerId}`) : $(`#${gridOptions.gridContainerId}`);\n    const windowElm = $(window);\n    if (windowElm === undefined || containerElm === undefined || gridDomElm === undefined) {\n      return null;\n    }\n\n    // calculate bottom padding\n    // if using pagination, we need to add the pagination height to this bottom padding\n    let bottomPadding = (autoResizeOptions && autoResizeOptions.bottomPadding) ? autoResizeOptions.bottomPadding : DATAGRID_BOTTOM_PADDING;\n    if (bottomPadding && (gridOptions.enablePagination || this._gridOptions.backendServiceApi)) {\n      bottomPadding += DATAGRID_PAGINATION_HEIGHT;\n    }\n\n    const gridHeight = windowElm.height() || 0;\n    const coordOffsetTop = gridDomElm.offset();\n    const gridOffsetTop = (coordOffsetTop !== undefined) ? coordOffsetTop.top : 0;\n    const availableHeight = gridHeight - gridOffsetTop - bottomPadding;\n    const availableWidth = containerElm.width() || 0;\n    const maxHeight = (autoResizeOptions && autoResizeOptions.maxHeight && autoResizeOptions.maxHeight > 0) ? autoResizeOptions.maxHeight : undefined;\n    const minHeight = (autoResizeOptions && autoResizeOptions.minHeight && autoResizeOptions.minHeight < 0) ? autoResizeOptions.minHeight : DATAGRID_MIN_HEIGHT;\n    const maxWidth = (autoResizeOptions && autoResizeOptions.maxWidth && autoResizeOptions.maxWidth > 0) ? autoResizeOptions.maxWidth : undefined;\n    const minWidth = (autoResizeOptions && autoResizeOptions.minWidth && autoResizeOptions.minWidth < 0) ? autoResizeOptions.minWidth : DATAGRID_MIN_WIDTH;\n\n    let newHeight = availableHeight;\n    let newWidth = (autoResizeOptions && autoResizeOptions.sidePadding) ? availableWidth - autoResizeOptions.sidePadding : availableWidth;\n\n    // optionally (when defined), make sure that grid height & width are within their thresholds\n    if (newHeight < minHeight) {\n      newHeight = minHeight;\n    }\n    if (maxHeight && newHeight > maxHeight) {\n      newHeight = maxHeight;\n    }\n    if (newWidth < minWidth) {\n      newWidth = minWidth;\n    }\n    if (maxWidth && newWidth > maxWidth) {\n      newWidth = maxWidth;\n    }\n\n    // return the new dimensions unless a fixed height/width was defined\n    return {\n      height: this._fixedHeight || newHeight,\n      width: this._fixedWidth || newWidth\n    };\n  }\n\n  /**\n   * Dispose function when element is destroyed\n   */\n  dispose() {\n    $(window).off(`resize.grid.${this._gridUid}`);\n  }\n\n  /**\n   * For some reason this only seems to happen in Chrome and is sometime miscalculated by SlickGrid measureSrollbar() method\n   * When that happens we will compensate and resize the Grid Viewport to avoid seeing horizontal scrollbar\n   * Most of the time it happens, it's a tiny offset calculation of usually 3px (enough to show scrollbar)\n   * GitHub issue reference: https://github.com/6pac/SlickGrid/issues/275\n   */\n  compensateHorizontalScroll(grid: any, gridOptions: GridOption) {\n    const gridElm = $(`#${gridOptions.gridId}`);\n\n    const scrollbarDimensions = grid && grid.getScrollbarDimensions();\n    const slickGridScrollbarWidth = scrollbarDimensions && scrollbarDimensions.width;\n    const calculatedScrollbarWidth = getScrollBarWidth();\n\n     // if scrollbar width is different from SlickGrid calculation to our custom calculation\n    // then resize the grid with the missing pixels to remove scroll (usually only 3px)\n    if (slickGridScrollbarWidth < calculatedScrollbarWidth) {\n      gridElm.width(gridElm.width() + (calculatedScrollbarWidth - slickGridScrollbarWidth));\n    }\n  }\n\n  /**\n   * Return the last resize dimensions used by the service\n   * @return last dimensions\n   */\n  getLastResizeDimensions(): GridDimension {\n    return this._lastDimensions;\n  }\n\n  /** Resize the datagrid to fit the browser height & width */\n  resizeGrid(delay = 10, newSizes?: GridDimension): Promise<GridDimension> {\n    if (!this._grid || !this._gridOptions) {\n      throw new Error(`\n      Angular-Slickgrid resizer requires a valid Grid object and Grid Options defined.\n      You can fix this by setting your gridOption to use \"enableAutoResize\" or create an instance of the ResizerService by calling attachAutoResizeDataGrid()`);\n    }\n\n    return new Promise((resolve) => {\n      // because of the javascript async nature, we might want to delay the resize a little bit\n      delay = delay || 0;\n\n      if (delay > 0) {\n        clearTimeout(this._timer);\n        this._timer = setTimeout(() => {\n          this.resizeGridWithDimensions(newSizes);\n          resolve(this._lastDimensions);\n        }, delay);\n      } else {\n        this.resizeGridWithDimensions(newSizes);\n        resolve(this._lastDimensions);\n      }\n    });\n  }\n\n  resizeGridWithDimensions(newSizes?: GridDimension): GridDimension {\n    // calculate the available sizes with minimum height defined as a constant\n    const availableDimensions = this.calculateGridNewDimensions(this._gridOptions);\n    const gridElm = $(`#${this._gridOptions.gridId}`) || {};\n    const gridContainerElm = $(`#${this._gridOptions.gridContainerId}`) || {};\n\n    if ((newSizes || availableDimensions) && gridElm.length > 0) {\n      // get the new sizes, if new sizes are passed (not 0), we will use them else use available space\n      // basically if user passes 1 of the dimension, let say he passes just the height,\n      // we will use the height as a fixed height but the width will be resized by it's available space\n      const newHeight = (newSizes && newSizes.height) ? newSizes.height : availableDimensions.height;\n      const newWidth = (newSizes && newSizes.width) ? newSizes.width : availableDimensions.width;\n\n      // apply these new height/width to the datagrid\n      gridElm.height(newHeight);\n      gridElm.width(newWidth);\n      gridContainerElm.height(newHeight);\n      gridContainerElm.width(newWidth);\n\n      // resize the slickgrid canvas on all browser except some IE versions\n      // exclude all IE below IE11\n      // IE11 wants to be a better standard (W3C) follower (finally) they even changed their appName output to also have 'Netscape'\n      if (new RegExp('MSIE [6-8]').exec(navigator.userAgent) === null && this._grid && this._grid.resizeCanvas) {\n        this._grid.resizeCanvas();\n      }\n\n      // also call the grid auto-size columns so that it takes available when going bigger\n      if (this._gridOptions && this._gridOptions.enableAutoSizeColumns && typeof this._grid.autosizeColumns) {\n        // make sure that the grid still exist (by looking if the Grid UID is found in the DOM tree) to avoid SlickGrid error \"missing stylesheet\"\n        if (this._gridUid && $(`.${this._gridUid}`).length > 0) {\n          this._grid.autosizeColumns();\n        }\n\n        // compensate anytime SlickGrid measureScrollbar is incorrect\n        this.compensateHorizontalScroll(this._grid, this._gridOptions);\n      }\n\n      // keep last resized dimensions & resolve them to the Promise\n      this._lastDimensions = {\n        height: newHeight,\n        width: newWidth\n      };\n\n      if ((this._gridOptions.enablePagination || this._gridOptions.backendServiceApi)) {\n        this._lastDimensions.heightWithPagination = newHeight + DATAGRID_PAGINATION_HEIGHT;\n      }\n    }\n\n    return this._lastDimensions;\n  }\n}\n","import { Aggregator } from './../models/aggregator.interface';\r\n\r\nexport class AvgAggregator implements Aggregator {\r\n  private _count: number;\r\n  private _nonNullCount: number;\r\n  private _sum: number;\r\n  private _field: number | string;\r\n\r\n  constructor(field: number | string) {\r\n    this._field = field;\r\n  }\r\n\r\n  init(): void {\r\n    this._count = 0;\r\n    this._nonNullCount = 0;\r\n    this._sum = 0;\r\n  }\r\n\r\n  accumulate(item) {\r\n    const val = item[this._field];\r\n    this._count++;\r\n    if (val != null && val !== '' && !isNaN(val)) {\r\n      this._nonNullCount++;\r\n      this._sum += parseFloat(val);\r\n    }\r\n  }\r\n\r\n  storeResult(groupTotals) {\r\n    if (!groupTotals.avg) {\r\n      groupTotals.avg = {};\r\n    }\r\n    if (this._nonNullCount !== 0) {\r\n      groupTotals.avg[this._field] = this._sum / this._nonNullCount;\r\n    }\r\n  }\r\n}\r\n","import { Aggregator } from './../models/aggregator.interface';\r\n\r\nexport class MinAggregator implements Aggregator {\r\n  private _min: number;\r\n  private _field: number | string;\r\n\r\n  constructor(field: number | string) {\r\n    this._field = field;\r\n  }\r\n\r\n  init() {\r\n    this._min = null;\r\n  }\r\n\r\n  accumulate(item) {\r\n    const val = item[this._field];\r\n    if (val != null && val !== '' && !isNaN(val)) {\r\n      if (this._min == null || val < this._min) {\r\n        this._min = val;\r\n      }\r\n    }\r\n  }\r\n\r\n  storeResult(groupTotals) {\r\n    if (!groupTotals.min) {\r\n      groupTotals.min = {};\r\n    }\r\n    groupTotals.min[this._field] = this._min;\r\n  }\r\n}\r\n","import { Aggregator } from './../models/aggregator.interface';\r\n\r\nexport class MaxAggregator implements Aggregator {\r\n  private _max: number;\r\n  private _field: number | string;\r\n\r\n  constructor(field: number | string) {\r\n    this._field = field;\r\n  }\r\n\r\n  init(): void {\r\n    this._max = null;\r\n  }\r\n\r\n  accumulate(item) {\r\n    const val = item[this._field];\r\n    if (val != null && val !== '' && !isNaN(val)) {\r\n      if (this._max == null || val > this._max) {\r\n        this._max = val;\r\n      }\r\n    }\r\n  }\r\n\r\n  storeResult(groupTotals) {\r\n    if (!groupTotals.max) {\r\n      groupTotals.max = {};\r\n    }\r\n    groupTotals.max[this._field] = this._max;\r\n  }\r\n}\r\n","import { Aggregator } from './../models/aggregator.interface';\r\n\r\nexport class SumAggregator implements Aggregator {\r\n  private _sum: number;\r\n  private _field: number | string;\r\n\r\n  constructor(field: number | string) {\r\n    this._field = field;\r\n  }\r\n\r\n  init() {\r\n    this._sum = null;\r\n  }\r\n\r\n  accumulate(item) {\r\n    const val = item[this._field];\r\n    if (val != null && val !== '' && !isNaN(val)) {\r\n      this._sum += parseFloat(val);\r\n    }\r\n  }\r\n\r\n  storeResult(groupTotals) {\r\n    if (!groupTotals.sum) {\r\n      groupTotals.sum = {};\r\n    }\r\n    groupTotals.sum[this._field] = this._sum;\r\n  }\r\n}\r\n","import { AvgAggregator } from './avgAggregator';\r\nimport { MinAggregator } from './minAggregator';\r\nimport { MaxAggregator } from './maxAggregator';\r\nimport { SumAggregator } from './sumAggregator';\r\n\r\n/** Provides a list of different Aggregators for the Group Formatter */\r\nexport const Aggregators = {\r\n  Avg: AvgAggregator,\r\n  Min: MinAggregator,\r\n  Max: MaxAggregator,\r\n  Sum: SumAggregator\r\n};\r\n","import { Column, Editor, EditorValidator, EditorValidatorOutput } from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n/*\n * An example of a 'detached' editor.\n * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n */\nexport class CheckboxEditor implements Editor {\n  $input: any;\n  defaultValue: boolean;\n\n  constructor(private args: any) {\n    this.init();\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor || {};\n  }\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  init(): void {\n    const fieldId = this.columnDef && this.columnDef.id;\n    this.$input = $(`<input type=\"checkbox\" value=\"true\" class=\"editor-checkbox editor-${fieldId}\" />`);\n    this.$input.appendTo(this.args.container);\n    this.$input.focus();\n\n    // make the checkbox editor act like a regular checkbox that commit the value on click\n    if (this.args.grid.getOptions().autoCommitEdit) {\n      this.$input.click(() => this.args.grid.getEditorLock().commitCurrentEdit());\n    }\n  }\n\n  destroy(): void {\n    this.$input.remove();\n  }\n\n  focus(): void {\n    this.$input.focus();\n  }\n\n  hide() {\n    this.$input.hide();\n  }\n\n  show() {\n    this.$input.show();\n  }\n\n  loadValue(item: any) {\n    this.defaultValue = !!item[this.columnDef.field];\n    if (this.defaultValue) {\n      this.$input.prop('checked', true);\n    } else {\n      this.$input.prop('checked', false);\n    }\n  }\n\n  preClick() {\n    this.$input.prop('checked', !this.$input.prop('checked'));\n  }\n\n  serializeValue(): boolean {\n    return this.$input.prop('checked');\n  }\n\n  applyValue(item: any, state: any) {\n    item[this.columnDef.field] = state;\n  }\n\n  isValueChanged() {\n    return (this.serializeValue() !== this.defaultValue);\n  }\n\n  validate(): EditorValidatorOutput {\n    if (this.validator) {\n      const value = this.$input && this.$input.val && this.$input.val();\n      const validationResults = this.validator(value, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    }\n\n    // by default the editor is always valid\n    // if user want it to be a required checkbox, he would have to provide his own validator\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n}\n","import { mapFlatpickrDateFormatWithFieldType, mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport { Column, Editor, EditorValidator, EditorValidatorOutput, FieldType, GridOption } from './../models/index';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\n\r\ndeclare function require(name: string);\r\nrequire('flatpickr');\r\n\r\n// using external non-typed js libraries\r\ndeclare var $: any;\r\n\r\n/*\r\n * An example of a date picker editor using Flatpickr\r\n * https://chmln.github.io/flatpickr\r\n */\r\nexport class DateEditor implements Editor {\r\n  $input: any;\r\n  flatInstance: any;\r\n  defaultDate: string;\r\n\r\n  constructor(private args: any) {\r\n    this.init();\r\n  }\r\n\r\n  /** Get Column Definition object */\r\n  get columnDef(): Column {\r\n    return this.args && this.args.column || {};\r\n  }\r\n\r\n  /** Get Column Editor object */\r\n  get columnEditor(): any {\r\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor || {};\r\n  }\r\n\r\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\r\n  get validator(): EditorValidator {\r\n    return this.columnEditor.validator || this.columnDef.validator;\r\n  }\r\n\r\n  init(): void {\r\n    if (this.args && this.args.column) {\r\n      const fieldId = this.columnDef && this.columnDef.id;\r\n      const gridOptions = this.args.grid.getOptions() as GridOption;\r\n      this.defaultDate = (this.args.item) ? this.args.item[this.args.column.field] : null;\r\n      const inputFormat = mapFlatpickrDateFormatWithFieldType(this.columnDef.type || FieldType.dateIso);\r\n      const outputFormat = mapFlatpickrDateFormatWithFieldType(this.columnDef.outputType || FieldType.dateUtc);\r\n      let currentLocale = this.getCurrentLocale(this.columnDef, gridOptions);\r\n      if (currentLocale.length > 2) {\r\n        currentLocale = currentLocale.substring(0, 2);\r\n      }\r\n\r\n      const pickerOptions: any = {\r\n        defaultDate: this.defaultDate,\r\n        altInput: true,\r\n        altFormat: inputFormat,\r\n        dateFormat: outputFormat,\r\n        closeOnSelect: false,\r\n        locale: (currentLocale !== 'en') ? this.loadFlatpickrLocale(currentLocale) : 'en',\r\n        onChange: (selectedDates: any[] | any, dateStr: string, instance: any) => {\r\n          this.save();\r\n        },\r\n      };\r\n\r\n      this.$input = $(`<input type=\"text\" data-defaultDate=\"${this.defaultDate}\" class=\"editor-text flatpickr editor-${fieldId}\" />`);\r\n      this.$input.appendTo(this.args.container);\r\n      this.flatInstance = (this.$input[0] && typeof this.$input[0].flatpickr === 'function') ? this.$input[0].flatpickr(pickerOptions) : null;\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  getCurrentLocale(columnDef: Column, gridOptions: GridOption) {\r\n    const options = gridOptions || columnDef.params || {};\r\n    if (options.i18n && options.i18n instanceof TranslateService) {\r\n      return options.i18n.currentLang;\r\n    }\r\n\r\n    return 'en';\r\n  }\r\n\r\n  loadFlatpickrLocale(locale: string) {\r\n    // change locale if needed, Flatpickr reference: https://chmln.github.io/flatpickr/localization/\r\n    const gridOptions = this.args && this.args.grid && this.args.grid.getOptions();\r\n    if (gridOptions && gridOptions.params && gridOptions.params.flapickrLocale) {\r\n      return gridOptions.params.flapickrLocale;\r\n    } else if (locale !== 'en') {\r\n      const localeDefault: any = require(`flatpickr/dist/l10n/${locale}.js`).default;\r\n      return (localeDefault && localeDefault[locale]) ? localeDefault[locale] : 'en';\r\n    }\r\n    return 'en';\r\n  }\r\n\r\n  destroy() {\r\n    this.hide();\r\n    // this.flatInstance.destroy();\r\n    this.$input.remove();\r\n  }\r\n\r\n  show() {\r\n    if (this.flatInstance && typeof this.flatInstance.open === 'function') {\r\n      this.flatInstance.open();\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    if (this.flatInstance && typeof this.flatInstance.close === 'function') {\r\n      this.flatInstance.close();\r\n    }\r\n  }\r\n\r\n  focus() {\r\n    this.$input.focus();\r\n  }\r\n\r\n  save() {\r\n    // autocommit will not focus the next editor\r\n    const validation = this.validate();\r\n    if (validation && validation.valid) {\r\n      if (this.args.grid.getOptions().autoCommitEdit) {\r\n        this.args.grid.getEditorLock().commitCurrentEdit();\r\n      } else {\r\n        this.args.commitChanges();\r\n      }\r\n    }\r\n  }\r\n\r\n  getColumnEditor() {\r\n    return this.args && this.args.column && this.args.column.internalColumnEditor && this.args.column.internalColumnEditor;\r\n  }\r\n\r\n  loadValue(item: any) {\r\n    this.defaultDate = item[this.args.column.field];\r\n    this.flatInstance.setDate(item[this.args.column.field]);\r\n  }\r\n\r\n  serializeValue() {\r\n    const domValue: string = this.$input.val();\r\n\r\n    if (!domValue) {\r\n      return '';\r\n    }\r\n\r\n    const outputFormat = mapMomentDateFormatWithFieldType(this.args.column.type || FieldType.dateIso);\r\n    const value = moment(domValue).format(outputFormat);\r\n\r\n    return value;\r\n  }\r\n\r\n  applyValue(item: any, state: any) {\r\n    if (!state) {\r\n      return;\r\n    }\r\n\r\n    const outputFormat = mapMomentDateFormatWithFieldType(this.args.column.type || FieldType.dateIso);\r\n    item[this.args.column.field] = moment(state, outputFormat).toDate();\r\n  }\r\n\r\n  isValueChanged() {\r\n    return (!(this.$input.val() === '' && this.defaultDate == null)) && (this.$input.val() !== this.defaultDate);\r\n  }\r\n\r\n  validate(): EditorValidatorOutput {\r\n    if (this.validator) {\r\n      const value = this.$input && this.$input.val && this.$input.val();\r\n      const validationResults = this.validator(value, this.args);\r\n      if (!validationResults.valid) {\r\n        return validationResults;\r\n      }\r\n    }\r\n\r\n    // by default the editor is always valid\r\n    // if user want it to be a required checkbox, he would have to provide his own validator\r\n    return {\r\n      valid: true,\r\n      msg: null\r\n    };\r\n  }\r\n}\r\n","import { Constants } from '../constants';\nimport { Column, Editor, EditorValidator, EditorValidatorOutput, KeyCode } from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\nconst defaultDecimalPlaces = 0;\n\n/*\n * An example of a 'detached' editor.\n * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n */\nexport class FloatEditor implements Editor {\n  $input: any;\n  defaultValue: any;\n\n  constructor(private args: any) {\n    this.init();\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor || {};\n  }\n\n  get hasAutoCommitEdit() {\n    return this.args.grid.getOptions().autoCommitEdit;\n  }\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  init(): void {\n    const fieldId = this.columnDef && this.columnDef.id;\n    this.$input = $(`<input type=\"number\" class=\"editor-text editor-${fieldId}\" step=\"${this.getInputDecimalSteps()}\" />`)\n      .appendTo(this.args.container)\n      .on('keydown.nav', (e) => {\n        if (e.keyCode === KeyCode.LEFT || e.keyCode === KeyCode.RIGHT) {\n          e.stopImmediatePropagation();\n        }\n      });\n\n    // the lib does not get the focus out event for some reason\n    // so register it here\n    if (this.hasAutoCommitEdit) {\n      this.$input.on('focusout', () => this.save());\n    }\n\n    setTimeout(() => {\n      this.$input.focus().select();\n    }, 50);\n  }\n\n  destroy() {\n    this.$input.remove();\n  }\n\n  focus() {\n    this.$input.focus();\n  }\n\n  getColumnEditor() {\n    return this.args && this.args.column && this.args.column.internalColumnEditor && this.args.column.internalColumnEditor;\n  }\n\n  getDecimalPlaces(): number {\n    // returns the number of fixed decimal places or null\n    let rtn = (this.columnEditor.params && this.columnEditor.params.hasOwnProperty('decimalPlaces')) ? this.columnEditor.params.decimalPlaces : undefined;\n\n    if (rtn === undefined) {\n      rtn = defaultDecimalPlaces;\n    }\n    return (!rtn && rtn !== 0 ? null : rtn);\n  }\n\n  getInputDecimalSteps(): string {\n    const decimals = this.getDecimalPlaces();\n    let zeroString = '';\n    for (let i = 1; i < decimals; i++) {\n      zeroString += '0';\n    }\n\n    if (decimals > 0) {\n      return `0.${zeroString}1`;\n    }\n    return '1';\n  }\n\n  loadValue(item: any) {\n    this.defaultValue = item[this.columnDef.field];\n\n    const decPlaces = this.getDecimalPlaces();\n    if (decPlaces !== null\n      && (this.defaultValue || this.defaultValue === 0)\n      && this.defaultValue.toFixed) {\n      this.defaultValue = this.defaultValue.toFixed(decPlaces);\n    }\n\n    this.$input.val(this.defaultValue);\n    this.$input[0].defaultValue = this.defaultValue;\n    this.$input.select();\n  }\n\n  serializeValue() {\n    let rtn = parseFloat(this.$input.val()) || 0;\n    const decPlaces = this.getDecimalPlaces();\n    if (decPlaces !== null\n      && (rtn || rtn === 0)\n      && rtn.toFixed) {\n      rtn = parseFloat(rtn.toFixed(decPlaces));\n    }\n\n    return rtn;\n  }\n\n  applyValue(item: any, state: any) {\n    item[this.columnDef.field] = state;\n  }\n\n  isValueChanged() {\n    const elmValue = this.$input.val();\n    return (!(elmValue === '' && this.defaultValue === null)) && (elmValue !== this.defaultValue);\n  }\n\n  save() {\n    const validation = this.validate();\n    if (validation && validation.valid) {\n      if (this.hasAutoCommitEdit) {\n        this.args.grid.getEditorLock().commitCurrentEdit();\n      } else {\n        this.args.commitChanges();\n      }\n    }\n  }\n\n  validate(): EditorValidatorOutput {\n    const elmValue = this.$input.val();\n    const floatNumber = !isNaN(elmValue as number) ? parseFloat(elmValue) : null;\n    const decPlaces = this.getDecimalPlaces();\n    const minValue = this.columnEditor.minValue;\n    const maxValue = this.columnEditor.maxValue;\n    const errorMsg = this.columnEditor.errorMessage;\n    const mapValidation = {\n      '{{minValue}}': minValue,\n      '{{maxValue}}': maxValue,\n      '{{minDecimal}}': 0,\n      '{{maxDecimal}}': decPlaces\n    };\n\n    if (this.validator) {\n      const validationResults = this.validator(elmValue, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    } else if (isNaN(elmValue as number) || (decPlaces === 0 && !/^[-+]?(\\d+(\\.)?(\\d)*)$/.test(elmValue))) {\n      // when decimal value is 0 (which is the default), we accept 0 or more decimal values\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_VALID_NUMBER\n      };\n    } else if (minValue !== undefined && maxValue !== undefined && floatNumber !== null && (floatNumber < minValue || floatNumber > maxValue)) {\n      // MIN & MAX Values provided\n      // when decimal value is bigger than 0, we only accept the decimal values as that value set\n      // for example if we set decimalPlaces to 2, we will only accept numbers between 0 and 2 decimals\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi, (matched) => mapValidation[matched])\n      };\n    } else if (minValue !== undefined && floatNumber !== null && floatNumber <= minValue) {\n      // MIN VALUE ONLY\n      // when decimal value is bigger than 0, we only accept the decimal values as that value set\n      // for example if we set decimalPlaces to 2, we will only accept numbers between 0 and 2 decimals\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_NUMBER_MIN.replace(/{{minValue}}/gi, (matched) => mapValidation[matched])\n      };\n    } else if (maxValue !== undefined && floatNumber !== null && floatNumber >= maxValue) {\n      // MAX VALUE ONLY\n      // when decimal value is bigger than 0, we only accept the decimal values as that value set\n      // for example if we set decimalPlaces to 2, we will only accept numbers between 0 and 2 decimals\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_NUMBER_MAX.replace(/{{maxValue}}/gi, (matched) => mapValidation[matched])\n      };\n    } else if ((decPlaces > 0 && !new RegExp(`^(\\\\d*(\\\\.)?(\\\\d){0,${decPlaces}})$`).test(elmValue))) {\n      // when decimal value is bigger than 0, we only accept the decimal values as that value set\n      // for example if we set decimalPlaces to 2, we will only accept numbers between 0 and 2 decimals\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_DECIMAL_BETWEEN.replace(/{{minDecimal}}|{{maxDecimal}}/gi, (matched) => mapValidation[matched])\n      };\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n}\n","import { Constants } from './../constants';\nimport { Column, Editor, EditorValidator, EditorValidatorOutput, KeyCode } from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n/*\n * An example of a 'detached' editor.\n * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n */\nexport class IntegerEditor implements Editor {\n  $input: any;\n  defaultValue: any;\n\n  constructor(private args: any) {\n    this.init();\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor || {};\n  }\n\n  get hasAutoCommitEdit() {\n    return this.args.grid.getOptions().autoCommitEdit;\n  }\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  init(): void {\n    const fieldId = this.columnDef && this.columnDef.id;\n    this.$input = $(`<input type=\"number\" class=\"editor-text editor-${fieldId}\" />`)\n      .appendTo(this.args.container)\n      .on('keydown.nav', (e) => {\n        if (e.keyCode === KeyCode.LEFT || e.keyCode === KeyCode.RIGHT) {\n          e.stopImmediatePropagation();\n        }\n      });\n\n    // the lib does not get the focus out event for some reason\n    // so register it here\n    if (this.hasAutoCommitEdit) {\n      this.$input.on('focusout', () => this.save());\n    }\n\n    setTimeout(() => {\n      this.$input.focus().select();\n    }, 50);\n  }\n\n  destroy() {\n    this.$input.remove();\n  }\n\n  focus() {\n    this.$input.focus();\n  }\n\n  getColumnEditor() {\n    return this.args && this.args.column && this.args.column.internalColumnEditor && this.args.column.internalColumnEditor;\n  }\n\n  loadValue(item: any) {\n    this.defaultValue = parseInt(item[this.args.column.field], 10);\n    this.$input.val(this.defaultValue);\n    this.$input[0].defaultValue = this.defaultValue;\n    this.$input.select();\n  }\n\n  serializeValue() {\n    return parseInt(this.$input.val() as string, 10) || 0;\n  }\n\n  applyValue(item: any, state: any) {\n    item[this.args.column.field] = state;\n  }\n\n  isValueChanged() {\n    const elmValue = this.$input.val();\n    const value = isNaN(elmValue) ? elmValue : parseInt(elmValue, 10);\n    return (!(value === '' && this.defaultValue === null)) && (value !== this.defaultValue);\n  }\n\n  save() {\n    const validation = this.validate();\n    if (validation && validation.valid) {\n      if (this.hasAutoCommitEdit) {\n        this.args.grid.getEditorLock().commitCurrentEdit();\n      } else {\n        this.args.commitChanges();\n      }\n    }\n  }\n\n  validate(): EditorValidatorOutput {\n    const elmValue = this.$input.val();\n    const errorMsg = this.columnEditor.params && this.columnEditor.errorMessage;\n\n    if (this.validator) {\n      const validationResults = this.validator(elmValue, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    } else if (isNaN(elmValue as number) || !/^[+-]?\\d+$/.test(elmValue)) {\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_VALID_INTEGER\n      };\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport { Constants } from './../constants';\nimport {\n  Column,\n  Editor,\n  EditorValidator,\n  EditorValidatorOutput,\n  GridOption,\n  HtmlElementPosition,\n  KeyCode\n} from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n/*\n * An example of a 'detached' editor.\n * The UI is added onto document BODY and .position(), .show() and .hide() are implemented.\n * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n */\nexport class LongTextEditor implements Editor {\n  $input: any;\n  $wrapper: any;\n  defaultValue: any;\n\n  /** Grid options */\n  gridOptions: GridOption;\n\n  /** The translate library */\n  private _translate: TranslateService;\n\n  constructor(private args: any) {\n    this.gridOptions = this.args.grid.getOptions() as GridOption;\n    const options = this.gridOptions || this.args.column.params || {};\n    this._translate = options.i18n;\n\n    this.init();\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor || {};\n  }\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  get hasAutoCommitEdit() {\n    return this.args.grid.getOptions().autoCommitEdit;\n  }\n\n  init(): void {\n    const fieldId = this.columnDef && this.columnDef.id;\n    const cancelText = this._translate && this._translate.instant('CANCEL') || Constants.TEXT_CANCEL;\n    const saveText = this._translate && this._translate.instant('SAVE') || Constants.TEXT_SAVE;\n    const $container = $('body');\n\n    this.$wrapper = $(`<div class=\"slick-large-editor-text editor-${fieldId}\" />`).appendTo($container);\n    this.$input = $(`<textarea hidefocus rows=\"5\">`).appendTo(this.$wrapper);\n\n    // the lib does not get the focus out event for some reason\n    // so register it here\n    if (this.hasAutoCommitEdit) {\n      this.$input.on('focusout', () => this.save());\n    }\n\n    $(`<div class=\"editor-footer\">\n          <button class=\"btn btn-primary btn-xs\">${saveText}</button>\n          <button class=\"btn btn-default btn-xs\">${cancelText}</button>\n      </div>`).appendTo(this.$wrapper);\n\n    this.$wrapper.find('button:first').on('click', () => this.save());\n    this.$wrapper.find('button:last').on('click', () => this.cancel());\n    this.$input.on('keydown', this.handleKeyDown.bind(this));\n\n    this.position(this.args && this.args.position);\n    this.$input.focus().select();\n  }\n\n  handleKeyDown(e: any) {\n    if (e.which === KeyCode.ENTER && e.ctrlKey) {\n      this.save();\n    } else if (e.which === KeyCode.ESCAPE) {\n      e.preventDefault();\n      this.cancel();\n    } else if (e.which === KeyCode.TAB && e.shiftKey) {\n      e.preventDefault();\n      if (this.args && this.args.grid) {\n        this.args.grid.navigatePrev();\n      }\n    } else if (e.which === KeyCode.TAB) {\n      e.preventDefault();\n      if (this.args && this.args.grid) {\n        this.args.grid.navigateNext();\n      }\n    }\n  }\n\n  save() {\n    const validation = this.validate();\n    if (validation && validation.valid) {\n      if (this.hasAutoCommitEdit) {\n        this.args.grid.getEditorLock().commitCurrentEdit();\n      } else {\n        this.args.commitChanges();\n      }\n    }\n  }\n\n  cancel() {\n    this.$input.val(this.defaultValue);\n    if (this.args && this.args.cancelChanges) {\n      this.args.cancelChanges();\n    }\n  }\n\n  hide() {\n    this.$wrapper.hide();\n  }\n\n  show() {\n    this.$wrapper.show();\n  }\n\n  position(position: HtmlElementPosition) {\n    this.$wrapper\n      .css('top', (position.top || 0) - 5)\n      .css('left', (position.left || 0) - 5);\n  }\n\n  destroy() {\n    this.$wrapper.remove();\n  }\n\n  focus() {\n    this.$input.focus();\n  }\n\n  getColumnEditor() {\n    return this.args && this.args.column && this.args.column.internalColumnEditor && this.args.column.internalColumnEditor;\n  }\n\n  loadValue(item: any) {\n    this.$input.val(this.defaultValue = item[this.columnDef.field]);\n    this.$input.select();\n  }\n\n  serializeValue() {\n    return this.$input.val();\n  }\n\n  applyValue(item: any, state: any) {\n    item[this.columnDef.field] = state;\n  }\n\n  isValueChanged() {\n    return (!(this.$input.val() === '' && this.defaultValue == null)) && (this.$input.val() !== this.defaultValue);\n  }\n\n  validate(): EditorValidatorOutput {\n    if (this.validator) {\n      const value = this.$input && this.$input.val && this.$input.val();\n      const validationResults = this.validator(value, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    }\n\n    // by default the editor is always valid\n    // if user want it to be a required checkbox, he would have to provide his own validator\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport {\n  CollectionCustomStructure,\n  CollectionOption,\n  Column,\n  Editor,\n  EditorValidator,\n  EditorValidatorOutput,\n  GridOption,\n  MultipleSelectOption,\n  SelectOption,\n} from './../models/index';\nimport { CollectionService } from '../services/index';\nimport { arraysEqual, findOrDefault, getDescendantProperty, htmlEncode, unsubscribeAllObservables } from '../services/utilities';\nimport { Subscription } from 'rxjs';\nimport * as DOMPurify_ from 'dompurify';\nconst DOMPurify = DOMPurify_; // patch to fix rollup to work\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n/**\n * Slickgrid editor class for multiple/single select lists\n */\nexport class SelectEditor implements Editor {\n  /** The JQuery DOM element */\n  $editorElm: any;\n\n  /** Editor Multiple-Select options */\n  editorElmOptions: MultipleSelectOption;\n\n  /** DOM Element Name, useful for auto-detecting positioning (dropup / dropdown) */\n  elementName: string;\n\n  /** The multiple-select options for a multiple select list */\n  defaultOptions: MultipleSelectOption;\n\n  /** The default item values that are set */\n  defaultValue: any[];\n\n  /** The property name for values in the collection */\n  valueName: string;\n\n  /** The property name for labels in the collection */\n  labelName: string;\n\n  /** The property name for a prefix that can be added to the labels in the collection */\n  labelPrefixName: string;\n\n  /** The property name for a suffix that can be added to the labels in the collection */\n  labelSuffixName: string;\n\n  /** A label that can be added to each option and can be used as an alternative to display selected options */\n  optionLabel: string;\n\n  /** Grid options */\n  gridOptions: GridOption;\n\n  /** Do we translate the label? */\n  enableTranslateLabel: boolean;\n\n  /** Observable Subscriptions */\n  _subscriptions: Subscription[] = [];\n\n  // flag to signal that the editor is destroying itself, helps prevent\n  // commit changes from being called twice and erroring\n  protected _destroying = false;\n\n  /** Collection Service */\n  protected _collectionService: CollectionService;\n\n  /** The translate library */\n  protected _translate: TranslateService;\n\n  constructor(protected args: any, protected isMultipleSelect) {\n    this.gridOptions = this.args.grid.getOptions() as GridOption;\n    const gridOptions = this.gridOptions || this.args.column.params || {};\n    this._translate = gridOptions.i18n;\n\n    // provide the name attribute to the DOM element which will be needed to auto-adjust drop position (dropup / dropdown)\n    const fieldId = this.columnDef && this.columnDef.id;\n    this.elementName = `editor-${fieldId}`;\n\n    const libOptions: MultipleSelectOption = {\n      autoAdjustDropHeight: true,\n      autoAdjustDropPosition: true,\n      autoAdjustDropWidthByTextSize: true,\n      container: 'body',\n      filter: false,\n      maxHeight: 275,\n      name: this.elementName,\n      single: true,\n      textTemplate: ($elm) => {\n        // render HTML code or not, by default it is sanitized and won't be rendered\n        const isRenderHtmlEnabled = this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor.enableRenderHtml || false;\n        return isRenderHtmlEnabled ? $elm.text() : $elm.html();\n      },\n      onBlur: () => this.destroy(),\n      onClose: () => {\n        if (!this._destroying && args.grid.getOptions().autoCommitEdit) {\n          // do not use args.commitChanges() as this sets the focus to the next\n          // row. Also the select list will stay shown when clicking off the grid\n          args.grid.getEditorLock().commitCurrentEdit();\n        }\n      }\n    };\n\n    if (isMultipleSelect) {\n      libOptions.single = false;\n      libOptions.addTitle = true;\n      libOptions.okButton = true;\n      libOptions.selectAllDelimiter = ['', ''];\n\n      if (this._translate) {\n        libOptions.countSelected = this._translate.instant('X_OF_Y_SELECTED');\n        libOptions.allSelected = this._translate.instant('ALL_SELECTED');\n        libOptions.selectAllText = this._translate.instant('SELECT_ALL');\n      }\n    }\n\n    // assign the multiple select lib options\n    this.defaultOptions = libOptions;\n\n    this.init();\n  }\n\n  /** Get the Collection */\n  get collection(): any[] {\n    return this.columnDef && this.columnDef && this.columnDef.internalColumnEditor.collection || [];\n  }\n\n  /** Getter for the Collection Options */\n  get collectionOptions(): CollectionOption {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor.collectionOptions;\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor || {};\n  }\n\n  /** Getter for the Custom Structure if exist */\n  protected get customStructure(): CollectionCustomStructure {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor.customStructure;\n  }\n\n  /**\n   * The current selected values (multiple select) from the collection\n   */\n  get currentValues() {\n    // collection of strings, just return the filtered string that are equals\n    if (this.collection.every(x => typeof x === 'string')) {\n      return this.collection.filter(c => this.$editorElm.val().indexOf(c.toString()) !== -1);\n    }\n\n    // collection of label/value pair\n    const separatorBetweenLabels = this.collectionOptions && this.collectionOptions.separatorBetweenTextLabels || '';\n    const isIncludingPrefixSuffix = this.collectionOptions && this.collectionOptions.includePrefixSuffixToSelectedValues || false;\n\n    return this.collection\n      .filter(c => this.$editorElm.val().indexOf(c[this.valueName].toString()) !== -1)\n      .map(c => {\n        const labelText = c[this.valueName];\n        let prefixText = c[this.labelPrefixName] || '';\n        let suffixText = c[this.labelSuffixName] || '';\n\n        // also translate prefix/suffix if enableTranslateLabel is true and text is a string\n        prefixText = (this.enableTranslateLabel && prefixText && typeof prefixText === 'string') ? this._translate.instant(prefixText || ' ') : prefixText;\n        suffixText = (this.enableTranslateLabel && suffixText && typeof suffixText === 'string') ? this._translate.instant(suffixText || ' ') : suffixText;\n\n        if (isIncludingPrefixSuffix) {\n          const tmpOptionArray = [prefixText, labelText, suffixText].filter((text) => text); // add to a temp array for joining purpose and filter out empty text\n          return tmpOptionArray.join(separatorBetweenLabels);\n        }\n        return labelText;\n      });\n  }\n\n\n  /**\n   * The current selected values (single select) from the collection\n   */\n  get currentValue() {\n    // collection of strings, just return the filtered string that are equals\n    if (this.collection.every(x => typeof x === 'string')) {\n      return findOrDefault(this.collection, (c: any) => c.toString() === this.$editorElm.val());\n    }\n\n    // collection of label/value pair\n    const separatorBetweenLabels = this.collectionOptions && this.collectionOptions.separatorBetweenTextLabels || '';\n    const isIncludingPrefixSuffix = this.collectionOptions && this.collectionOptions.includePrefixSuffixToSelectedValues || false;\n    const itemFound = findOrDefault(this.collection, (c: any) => c[this.valueName].toString() === this.$editorElm.val());\n\n    if (itemFound) {\n      const labelText = itemFound[this.valueName];\n\n      if (isIncludingPrefixSuffix) {\n        let prefixText = itemFound[this.labelPrefixName] || '';\n        let suffixText = itemFound[this.labelSuffixName] || '';\n\n        // also translate prefix/suffix if enableTranslateLabel is true and text is a string\n        prefixText = (this.enableTranslateLabel && prefixText && typeof prefixText === 'string') ? this._translate.instant(prefixText || ' ') : prefixText;\n        suffixText = (this.enableTranslateLabel && suffixText && typeof suffixText === 'string') ? this._translate.instant(suffixText || ' ') : suffixText;\n\n        // add to a temp array for joining purpose and filter out empty text\n        const tmpOptionArray = [prefixText, labelText, suffixText].filter((text) => text);\n        return tmpOptionArray.join(separatorBetweenLabels);\n      }\n\n      return labelText;\n    }\n\n    return '';\n  }\n\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  init() {\n    if (!this.args) {\n      throw new Error('[Angular-SlickGrid] An editor must always have an \"init()\" with valid arguments.');\n    }\n\n    if (!this.columnDef || !this.columnDef.internalColumnEditor || (!this.columnDef.internalColumnEditor.collection && !this.columnDef.internalColumnEditor.collectionAsync)) {\n      throw new Error(`[Angular-SlickGrid] You need to pass a \"collection\" (or \"collectionAsync\") inside Column Definition Editor for the MultipleSelect/SingleSelect Editor to work correctly.\n      Also each option should include a value/label pair (or value/labelKey when using Locale).\n      For example: { editor: { collection: [{ value: true, label: 'True' },{ value: false, label: 'False'}] } }`);\n    }\n\n    this._collectionService = new CollectionService(this._translate);\n    this.enableTranslateLabel = (this.columnDef.internalColumnEditor.enableTranslateLabel) ? this.columnDef.internalColumnEditor.enableTranslateLabel : false;\n    this.labelName = this.customStructure && this.customStructure.label || 'label';\n    this.labelPrefixName = this.customStructure && this.customStructure.labelPrefix || 'labelPrefix';\n    this.labelSuffixName = this.customStructure && this.customStructure.labelSuffix || 'labelSuffix';\n    this.optionLabel = this.customStructure && this.customStructure.optionLabel || 'value';\n    this.valueName = this.customStructure && this.customStructure.value || 'value';\n\n    if (this.enableTranslateLabel && (!this._translate || typeof this._translate.instant !== 'function')) {\n      throw new Error(`[select-editor] The ngx-translate TranslateService is required for the Select Editor to work correctly`);\n    }\n\n    // always render the Select (dropdown) DOM element, even if user passed a \"collectionAsync\",\n    // if that is the case, the Select will simply be without any options but we still have to render it (else SlickGrid would throw an error)\n    this.renderDomElement(this.collection);\n  }\n\n  applyValue(item: any, state: any): void {\n    item[this.columnDef.field] = state;\n  }\n\n  destroy() {\n    this._destroying = true;\n    if (this.$editorElm && this.$editorElm.multipleSelect) {\n      this.$editorElm.multipleSelect('close');\n      this.$editorElm.remove();\n    }\n    this._subscriptions = unsubscribeAllObservables(this._subscriptions);\n  }\n\n  loadValue(item: any): void {\n    if (this.isMultipleSelect) {\n      this.loadMultipleValues(item);\n    } else {\n      this.loadSingleValue(item);\n    }\n\n    this.refresh();\n  }\n\n  loadMultipleValues(items: any[]) {\n    // convert to string because that is how the DOM will return these values\n    this.defaultValue = items[this.columnDef.field].map((i: any) => i.toString());\n    this.$editorElm.find('option').each((i: number, $e: any) => {\n      $e.selected = (this.defaultValue.indexOf($e.value) !== -1);\n    });\n  }\n\n  loadSingleValue(item: any) {\n    // convert to string because that is how the DOM will return these values\n    // make sure the prop exists first\n    this.defaultValue = item[this.columnDef.field] && item[this.columnDef.field].toString();\n\n    this.$editorElm.find('option').each((i: number, $e: any) => {\n      $e.selected = (this.defaultValue === $e.value);\n    });\n  }\n\n  serializeValue(): any {\n    return (this.isMultipleSelect) ? this.currentValues : this.currentValue;\n  }\n\n  focus() {\n    if (this.$editorElm && this.$editorElm.multipleSelect) {\n      this.$editorElm.multipleSelect('focus');\n    }\n  }\n\n  isValueChanged(): boolean {\n    if (this.isMultipleSelect) {\n      return !arraysEqual(this.$editorElm.val(), this.defaultValue);\n    }\n    return this.$editorElm.val() !== this.defaultValue;\n  }\n\n  validate(): EditorValidatorOutput {\n    if (this.validator) {\n      const value = this.isMultipleSelect ? this.currentValues : this.currentValue;\n      const validationResults = this.validator(value, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    }\n\n    // by default the editor is always valid\n    // if user want it to be a required checkbox, he would have to provide his own validator\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n\n  //\n  // protected functions\n  // ------------------\n\n  /**\n   * user might want to filter certain items of the collection\n   * @param inputCollection\n   * @return outputCollection filtered and/or sorted collection\n   */\n  protected filterCollection(inputCollection) {\n    let outputCollection = inputCollection;\n\n    // user might want to filter certain items of the collection\n    if (this.columnEditor && this.columnEditor.collectionFilterBy) {\n      const filterBy = this.columnEditor.collectionFilterBy;\n      const filterCollectionBy = this.columnEditor.collectionOptions && this.columnEditor.collectionOptions.filterAfterEachPass || null;\n      outputCollection = this._collectionService.filterCollection(outputCollection, filterBy, filterCollectionBy);\n    }\n\n    return outputCollection;\n  }\n\n  /**\n   * user might want to sort the collection in a certain way\n   * @param inputCollection\n   * @return outputCollection sorted collection\n   */\n  protected sortCollection(inputCollection) {\n    let outputCollection = inputCollection;\n\n    // user might want to sort the collection\n    if (this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor.collectionSortBy) {\n      const sortBy = this.columnDef.internalColumnEditor.collectionSortBy;\n      outputCollection = this._collectionService.sortCollection(outputCollection, sortBy, this.enableTranslateLabel);\n    }\n\n    return outputCollection;\n  }\n\n  protected renderDomElement(collection: any[]) {\n    if (!Array.isArray(collection) && this.collectionOptions && this.collectionOptions.collectionInObjectProperty) {\n      collection = getDescendantProperty(collection, this.collectionOptions.collectionInObjectProperty);\n    }\n    if (!Array.isArray(collection)) {\n      throw new Error('The \"collection\" passed to the Select Editor is not a valid array');\n    }\n\n    // user can optionally add a blank entry at the beginning of the collection\n    if (this.collectionOptions && this.collectionOptions.addBlankEntry) {\n      collection.unshift(this.createBlankEntry());\n    }\n\n    let newCollection = collection || [];\n\n    // user might want to filter and/or sort certain items of the collection\n    newCollection = this.filterCollection(newCollection);\n    newCollection = this.sortCollection(newCollection);\n\n    // step 1, create HTML string template\n    const editorTemplate = this.buildTemplateHtmlString(newCollection);\n\n    // step 2, create the DOM Element of the editor\n    // also subscribe to the onClose event\n    this.createDomElement(editorTemplate);\n  }\n\n  protected buildTemplateHtmlString(collection: any[]) {\n    let options = '';\n    const fieldId = this.columnDef && this.columnDef.id;\n    const separatorBetweenLabels = this.collectionOptions && this.collectionOptions.separatorBetweenTextLabels || '';\n    const isRenderHtmlEnabled = this.columnDef.internalColumnEditor.enableRenderHtml || false;\n    const sanitizedOptions = this.gridOptions && this.gridOptions.sanitizeHtmlOptions || {};\n\n    // collection could be an Array of Strings OR Objects\n    if (collection.every(x => typeof x === 'string')) {\n      collection.forEach((option: string) => {\n        options += `<option value=\"${option}\" label=\"${option}\">${option}</option>`;\n      });\n    } else {\n      // array of objects will require a label/value pair unless a customStructure is passed\n      collection.forEach((option: SelectOption) => {\n        if (!option || (option[this.labelName] === undefined && option.labelKey === undefined)) {\n          throw new Error(`[select-editor] A collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example: { collection: [ { value: '1', label: 'One' } ])`);\n        }\n        const labelKey = (option.labelKey || option[this.labelName]) as string;\n        const labelText = ((option.labelKey || this.enableTranslateLabel) && labelKey) ? this._translate.instant(labelKey || ' ') : labelKey;\n        let prefixText = option[this.labelPrefixName] || '';\n        let suffixText = option[this.labelSuffixName] || '';\n        let optionLabel = option[this.optionLabel] || '';\n        optionLabel = optionLabel.toString().replace(/\\\"/g, '\\''); // replace double quotes by single quotes to avoid interfering with regular html\n\n        // also translate prefix/suffix if enableTranslateLabel is true and text is a string\n        prefixText = (this.enableTranslateLabel && prefixText && typeof prefixText === 'string') ? this._translate.instant(prefixText || ' ') : prefixText;\n        suffixText = (this.enableTranslateLabel && suffixText && typeof suffixText === 'string') ? this._translate.instant(suffixText || ' ') : suffixText;\n        optionLabel = (this.enableTranslateLabel && optionLabel && typeof optionLabel === 'string') ? this._translate.instant(optionLabel || ' ') : optionLabel;\n\n        // add to a temp array for joining purpose and filter out empty text\n        const tmpOptionArray = [prefixText, labelText, suffixText].filter((text) => text);\n        let optionText = tmpOptionArray.join(separatorBetweenLabels);\n\n        // if user specifically wants to render html text, he needs to opt-in else it will stripped out by default\n        // also, the 3rd party lib will saninitze any html code unless it's encoded, so we'll do that\n        if (isRenderHtmlEnabled) {\n          // sanitize any unauthorized html tags like script and others\n          // for the remaining allowed tags we'll permit all attributes\n          const sanitizedText = DOMPurify.sanitize(optionText, sanitizedOptions);\n          optionText = htmlEncode(sanitizedText);\n        }\n\n        options += `<option value=\"${option[this.valueName]}\" label=\"${optionLabel}\">${optionText}</option>`;\n      });\n    }\n\n    return `<select id=\"${this.elementName}\" class=\"ms-filter search-filter editor-${fieldId}\" ${this.isMultipleSelect ? 'multiple=\"multiple\"' : ''}>${options}</select>`;\n  }\n\n  /** Create a blank entry that can be added to the collection. It will also reuse the same customStructure if need be */\n  protected createBlankEntry() {\n    const blankEntry = {\n      [this.labelName]: '',\n      [this.valueName]: ''\n    };\n    if (this.labelPrefixName) {\n      blankEntry[this.labelPrefixName] = '';\n    }\n    if (this.labelSuffixName) {\n      blankEntry[this.labelSuffixName] = '';\n    }\n    return blankEntry;\n  }\n\n  /** Build the template HTML string */\n  protected createDomElement(editorTemplate: string) {\n    this.$editorElm = $(editorTemplate);\n\n    if (this.$editorElm && typeof this.$editorElm.appendTo === 'function') {\n      this.$editorElm.appendTo(this.args.container);\n    }\n\n    if (typeof this.$editorElm.multipleSelect !== 'function') {\n      // fallback to bootstrap\n      this.$editorElm.addClass('form-control');\n    } else {\n      const elementOptions = (this.columnDef.internalColumnEditor) ? this.columnDef.internalColumnEditor.elementOptions : {};\n      this.editorElmOptions = { ...this.defaultOptions, ...elementOptions };\n      this.$editorElm = this.$editorElm.multipleSelect(this.editorElmOptions);\n      setTimeout(() => this.$editorElm.multipleSelect('open'));\n    }\n  }\n\n  // refresh the jquery object because the selected checkboxes were already set\n  // prior to this method being called\n  protected refresh() {\n    if (typeof this.$editorElm.multipleSelect === 'function') {\n      this.$editorElm.multipleSelect('refresh');\n    }\n  }\n}\n","import { SelectEditor } from './selectEditor';\r\n\r\nexport class MultipleSelectEditor extends SelectEditor {\r\n  /**\r\n   * Initialize the Editor\r\n   */\r\n  constructor(protected args: any) {\r\n    super(args, true);\r\n  }\r\n}\r\n","import { SelectEditor } from './selectEditor';\r\n\r\nexport class SingleSelectEditor extends SelectEditor {\r\n  /**\r\n   * Initialize the Editor\r\n   */\r\n  constructor(protected args: any) {\r\n    super(args, false);\r\n  }\r\n}\r\n","import { Constants } from '../constants';\nimport { Column, Editor, EditorValidator, EditorValidatorOutput } from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\nconst DEFAULT_MIN_VALUE = 0;\nconst DEFAULT_MAX_VALUE = 100;\nconst DEFAULT_STEP = 1;\n\nexport class SliderEditor implements Editor {\n  private _elementRangeInputId: string;\n  private _elementRangeOutputId: string;\n  $editorElm: any;\n  $input: any;\n  $sliderNumber: any;\n  defaultValue: any;\n\n  constructor(private args: any) {\n    this.init();\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor || {};\n  }\n\n  /** Getter for the Editor Generic Params */\n  private get editorParams(): any {\n    return this.columnEditor.params || {};\n  }\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  init(): void {\n    const container = this.args && this.args.container;\n\n    // define the input & slider number IDs\n    const itemId = this.args && this.args.item && this.args.item.id;\n    this._elementRangeInputId = `rangeInput_${this.columnDef.field}_${itemId}`;\n    this._elementRangeOutputId = `rangeOutput_${this.columnDef.field}_${itemId}`;\n\n    // create HTML string template\n    const editorTemplate = this.buildTemplateHtmlString();\n    this.$editorElm = $(editorTemplate);\n    this.$input = this.$editorElm.children('input');\n    this.$sliderNumber = this.$editorElm.children('div.input-group-addon.input-group-append').children();\n\n    // watch on change event\n    this.$editorElm\n      .appendTo(container)\n      .on('mouseup', () => this.save());\n\n    // if user chose to display the slider number on the right side, then update it every time it changes\n    // we need to use both \"input\" and \"change\" event to be all cross-browser\n    if (!this.editorParams.hideSliderNumber) {\n      this.$editorElm.on('input change', (e: { target: HTMLInputElement }) => {\n        const value = e && e.target && e.target.value || '';\n        if (value) {\n          document.getElementById(this._elementRangeOutputId).innerHTML = e.target.value;\n        }\n      });\n    }\n  }\n\n  destroy() {\n    this.$editorElm.remove();\n  }\n\n  focus() {\n    this.$editorElm.focus();\n  }\n\n  save() {\n    if (this.args.grid.getOptions().autoCommitEdit) {\n      this.args.grid.getEditorLock().commitCurrentEdit();\n    } else {\n      this.args.commitChanges();\n    }\n  }\n\n  cancel() {\n    this.$input.val(this.defaultValue);\n    this.args.cancelChanges();\n  }\n\n  loadValue(item: any) {\n    // this.$input.val(this.defaultValue = item[this.columnDef.field]);\n    this.defaultValue = item[this.columnDef.field];\n    this.$input.val(this.defaultValue);\n    this.$input[0].defaultValue = this.defaultValue;\n    this.$sliderNumber.html(this.defaultValue);\n  }\n\n  serializeValue() {\n    return parseInt(this.$input.val() as string, 10) || 0;\n  }\n\n  applyValue(item: any, state: any) {\n    item[this.columnDef.field] = state;\n  }\n\n  isValueChanged() {\n    const elmValue = this.$input.val();\n    return (!(elmValue === '' && this.defaultValue === null)) && (elmValue !== this.defaultValue);\n  }\n\n  validate(): EditorValidatorOutput {\n    const elmValue = this.$input.val();\n    const minValue = this.columnEditor.minValue;\n    const maxValue = this.columnEditor.maxValue;\n    const errorMsg = this.columnEditor.errorMessage;\n    const mapValidation = {\n      '{{minValue}}': minValue,\n      '{{maxValue}}': maxValue\n    };\n\n    if (this.validator) {\n      const validationResults = this.validator(elmValue, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    } else if (minValue !== undefined && (elmValue < minValue || elmValue > maxValue)) {\n      // when decimal value is bigger than 0, we only accept the decimal values as that value set\n      // for example if we set decimalPlaces to 2, we will only accept numbers between 0 and 2 decimals\n      return {\n        valid: false,\n        msg: errorMsg || Constants.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi, (matched) => {\n          return mapValidation[matched];\n        })\n      };\n    }\n\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n\n  //\n  // private functions\n  // ------------------\n\n  /**\n   * Create the HTML template as a string\n   */\n  private buildTemplateHtmlString() {\n    const fieldId = this.columnDef && this.columnDef.id;\n    const minValue = this.columnEditor.hasOwnProperty('minValue') ? this.columnEditor.minValue : DEFAULT_MIN_VALUE;\n    const maxValue = this.columnEditor.hasOwnProperty('maxValue') ? this.columnEditor.maxValue : DEFAULT_MAX_VALUE;\n    const defaultValue = this.editorParams.hasOwnProperty('sliderStartValue') ? this.editorParams.sliderStartValue : minValue;\n    const step = this.columnEditor.hasOwnProperty('valueStep') ? this.columnEditor.valueStep : DEFAULT_STEP;\n    const itemId = this.args && this.args.item && this.args.item.id;\n\n    if (this.editorParams.hideSliderNumber) {\n      return `\n      <div class=\"slider-editor\">\n        <input type=\"range\" id=\"${this._elementRangeInputId}\"\n          name=\"${this._elementRangeInputId}\"\n          defaultValue=\"${defaultValue}\" min=\"${minValue}\" max=\"${maxValue}\" step=\"${step}\"\n          class=\"form-control slider-editor-input editor-${fieldId} range\" />\n      </div>`;\n    }\n\n    return `\n      <div class=\"input-group slider-editor\">\n        <input type=\"range\" id=\"${this._elementRangeInputId}\"\n          name=\"${this._elementRangeInputId}\"\n          defaultValue=\"${defaultValue}\" min=\"${minValue}\" max=\"${maxValue}\" step=\"${step}\"\n          class=\"form-control slider-editor-input editor-${fieldId} range\" />\n        <div class=\"input-group-addon input-group-append slider-value\"><span class=\"input-group-text\" id=\"${this._elementRangeOutputId}\">${defaultValue}</span></div>\n      </div>`;\n  }\n}\n","import { Column, Editor, EditorValidator, EditorValidatorOutput, KeyCode } from './../models/index';\n\n// using external non-typed js libraries\ndeclare var $: any;\n\n/*\n * An example of a 'detached' editor.\n * KeyDown events are also handled to provide handling for Tab, Shift-Tab, Esc and Ctrl-Enter.\n */\nexport class TextEditor implements Editor {\n  $input: any;\n  defaultValue: any;\n\n  constructor(private args: any) {\n    this.init();\n  }\n\n  /** Get Column Definition object */\n  get columnDef(): Column {\n    return this.args && this.args.column || {};\n  }\n\n  /** Get Column Editor object */\n  get columnEditor(): any {\n    return this.columnDef && this.columnDef.internalColumnEditor && this.columnDef.internalColumnEditor || {};\n  }\n\n  get hasAutoCommitEdit() {\n    return this.args.grid.getOptions().autoCommitEdit;\n  }\n\n  /** Get the Validator function, can be passed in Editor property or Column Definition */\n  get validator(): EditorValidator {\n    return this.columnEditor.validator || this.columnDef.validator;\n  }\n\n  init(): void {\n    const fieldId = this.columnDef && this.columnDef.id;\n    this.$input = $(`<input type=\"text\" class=\"editor-text editor-${fieldId}\" />`)\n      .appendTo(this.args.container)\n      .on('keydown.nav', (e) => {\n        if (e.keyCode === KeyCode.LEFT || e.keyCode === KeyCode.RIGHT) {\n          e.stopImmediatePropagation();\n        }\n      });\n\n    // the lib does not get the focus out event for some reason\n    // so register it here\n    if (this.hasAutoCommitEdit) {\n      this.$input.on('focusout', () => this.save());\n    }\n\n    setTimeout(() => {\n      this.$input.focus().select();\n    }, 50);\n  }\n\n  destroy() {\n    this.$input.remove();\n  }\n\n  focus() {\n    this.$input.focus();\n  }\n\n  getValue() {\n    return this.$input.val();\n  }\n\n  setValue(val: string) {\n    this.$input.val(val);\n  }\n\n  loadValue(item: any) {\n    this.defaultValue = item[this.args.column.field] || '';\n    this.$input.val(this.defaultValue);\n    this.$input[0].defaultValue = this.defaultValue;\n    this.$input.select();\n  }\n\n  serializeValue() {\n    return this.$input.val();\n  }\n\n  applyValue(item: any, state: any) {\n    item[this.args.column.field] = state;\n  }\n\n  isValueChanged() {\n    return (!(this.$input.val() === '' && this.defaultValue === null)) && (this.$input.val() !== this.defaultValue);\n  }\n\n  save() {\n    const validation = this.validate();\n    if (validation && validation.valid) {\n      if (this.hasAutoCommitEdit) {\n        this.args.grid.getEditorLock().commitCurrentEdit();\n      } else {\n        this.args.commitChanges();\n      }\n    }\n  }\n\n  validate(): EditorValidatorOutput {\n    if (this.validator) {\n      const value = this.$input && this.$input.val && this.$input.val();\n      const validationResults = this.validator(value, this.args);\n      if (!validationResults.valid) {\n        return validationResults;\n      }\n    }\n\n    // by default the editor is always valid\n    // if user want it to be a required checkbox, he would have to provide his own validator\n    return {\n      valid: true,\n      msg: null\n    };\n  }\n}\n","import { CheckboxEditor } from './checkboxEditor';\r\nimport { DateEditor } from './dateEditor';\r\nimport { FloatEditor } from './floatEditor';\r\nimport { IntegerEditor } from './integerEditor';\r\nimport { LongTextEditor } from './longTextEditor';\r\nimport { MultipleSelectEditor } from './multipleSelectEditor';\r\nimport { SingleSelectEditor } from './singleSelectEditor';\r\nimport { SliderEditor } from './sliderEditor';\r\nimport { TextEditor } from './textEditor';\r\n\r\nexport const Editors = {\r\n  /** Checkbox Editor (uses native checkbox DOM element) */\r\n  checkbox: CheckboxEditor,\r\n\r\n  /** Date Picker Editor (which uses 3rd party lib \"flatpickr\") */\r\n  date: DateEditor,\r\n\r\n  /** Float Number Editor */\r\n  float: FloatEditor,\r\n\r\n  /** Integer Editor */\r\n  integer: IntegerEditor,\r\n\r\n  /** Long Text Editor (uses a textarea) */\r\n  longText: LongTextEditor,\r\n\r\n  /** Multiple Select editor (which uses 3rd party lib \"multiple-select.js\") */\r\n  multipleSelect: MultipleSelectEditor,\r\n\r\n  /** Single Select editor (which uses 3rd party lib \"multiple-select.js\") */\r\n  singleSelect: SingleSelectEditor,\r\n\r\n  /** Slider Editor */\r\n  slider: SliderEditor,\r\n\r\n  /** Text Editor */\r\n  text: TextEditor\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const arrayObjectToCsvFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const propertyNames = columnDef && columnDef.params && columnDef.params.propertyNames;\r\n  const parentObjectKeyName = columnDef && columnDef.field && columnDef.field.split('.')[0]; // e.g. \"users.roles\" would be \"users\"\r\n\r\n  if (!propertyNames || !Array.isArray(propertyNames) || !parentObjectKeyName) {\r\n    throw new Error(`Formatters.arrayObjectToCsv requires you to pass an array of \"propertyNames\" (declared in \"params\") that you want to pull the data from.\r\n      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: ['firtName'] }}`);\r\n  }\r\n\r\n  // the dataContext holds all the data, so we can find the values we want even when \"value\" argument might be null\r\n  // e.g. if we want to use the propertyNames of ['firstName', 'lastName'] from the \"users\" array of objects\r\n  if (dataContext[parentObjectKeyName] && Array.isArray(dataContext[parentObjectKeyName])) {\r\n    // we will 1st get the object from the dataContext, then\r\n    if (Array.isArray(dataContext[parentObjectKeyName])) {\r\n      const outputStrings = [];\r\n      dataContext[parentObjectKeyName].forEach((data) => {\r\n        const strings = [];\r\n\r\n        // 2nd from that data loop through all propertyNames we want to use (e.g.: ['firstName', 'lastName'])\r\n        propertyNames.forEach((prop) => {\r\n          strings.push(data[prop]);\r\n        });\r\n        // we will join these strings with spaces (e.g. 'John Doe' where 'John' was firstName and 'Doe' was lastName)\r\n        outputStrings.push(strings.join(' '));\r\n      });\r\n\r\n      // finally join all the output strings by CSV (e.g.: 'John Doe, Jane Doe')\r\n      const output = outputStrings.join(', ');\r\n      return `<span title=\"${output}\">${output}</span>`;\r\n    }\r\n  }\r\n  return '';\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const arrayToCsvFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  if (value && Array.isArray(value)) {\r\n    const values = value.join(', ');\r\n    return `<span title=\"${values}\">${values}</span>`;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const boldFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isNumber = (value === null || value === undefined) ? false : !isNaN(+value);\r\n  if (!isNumber) {\r\n    return '';\r\n  } else if (value >= 0) {\r\n    return `<span style=\"font-weight: bold\">${decimalFormatted(value, 2, 2)}$</span>`;\r\n  } else {\r\n    return `<span style=\"font-weight: bold\">${decimalFormatted(value, 2, 2)}$</span>`;\r\n  }\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const checkboxFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) =>\r\n  value ? '&#x2611;' : '';\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const checkmarkFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) =>\r\n  value ? `<i class=\"fa fa-check checkmark-icon\" aria-hidden=\"true\"></i>` : '';\r\n","import { arrayToCsvFormatter } from './arrayToCsvFormatter';\r\nimport { Column, Formatter } from './../models/index';\r\nimport { findOrDefault } from '../services/utilities';\r\n\r\n/**\r\n * A formatter to show the label property value of a params collection\r\n */\r\nexport const collectionFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  if (!value || !columnDef || !columnDef.params || !columnDef.params.collection\r\n    || !columnDef.params.collection.length) {\r\n    return '';\r\n  }\r\n\r\n  const { params, params: { collection } } = columnDef;\r\n  const labelName = (params.customStructure) ? params.customStructure.label : 'label';\r\n  const valueName = (params.customStructure) ? params.customStructure.value : 'value';\r\n\r\n  if (Array.isArray(value)) {\r\n    return arrayToCsvFormatter(row,\r\n      cell,\r\n      value.map((v: any) => findOrDefault(collection, (c: any) => c[valueName] === v)[labelName]),\r\n      columnDef,\r\n      dataContext);\r\n  }\r\n\r\n  return findOrDefault(collection, (c: any) => c[valueName] === value)[labelName] || '';\r\n};\r\n","import { arrayToCsvFormatter } from './arrayToCsvFormatter';\r\nimport { Column, Formatter } from './../models/index';\r\nimport { findOrDefault } from '../services/utilities';\r\n\r\n/**\r\n * A formatter to show the label property value of an editor collection\r\n */\r\nexport const collectionEditorFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  if (!value || !columnDef || !columnDef.internalColumnEditor || !columnDef.internalColumnEditor.collection\r\n    || !columnDef.internalColumnEditor.collection.length) {\r\n    return '';\r\n  }\r\n\r\n  const { internalColumnEditor, internalColumnEditor: { collection } } = columnDef;\r\n  const labelName = (internalColumnEditor.customStructure) ? internalColumnEditor.customStructure.label : 'label';\r\n  const valueName = (internalColumnEditor.customStructure) ? internalColumnEditor.customStructure.value : 'value';\r\n\r\n  if (Array.isArray(value)) {\r\n    if (collection.every(x => typeof x === 'string')) {\r\n      return arrayToCsvFormatter(row,\r\n        cell,\r\n        value.map((v: any) => findOrDefault(collection, (c: any) => c === v)),\r\n        columnDef,\r\n        dataContext);\r\n    } else {\r\n      return arrayToCsvFormatter(row,\r\n        cell,\r\n        value.map((v: any) => findOrDefault(collection, (c: any) => c[valueName] === v)[labelName]),\r\n        columnDef,\r\n        dataContext);\r\n    }\r\n  }\r\n\r\n  return findOrDefault(collection, (c: any) => c[valueName] === value)[labelName] || '';\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const complexObjectFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  if (!columnDef) {\r\n    return '';\r\n  }\r\n  const complexField = columnDef.field || '';\r\n  return complexField.split('.').reduce((obj, i) => (obj ? obj[i] : ''), dataContext);\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateIso);\r\n\r\nexport const dateIsoFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateTimeIso);\r\n\r\nexport const dateTimeIsoFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateTimeIsoAmPm);\r\n\r\nexport const dateTimeIsoAmPmFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateTimeUsAmPm);\r\n\r\nexport const dateTimeUsAmPmFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateTimeUs);\r\n\r\nexport const dateTimeUsFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateTimeShortIso);\r\n\r\nexport const dateTimeShortIsoFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateTimeShortUs);\r\n\r\nexport const dateTimeShortUsFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, FieldType, Formatter } from './../models/index';\r\nimport { mapMomentDateFormatWithFieldType } from './../services/utilities';\r\nimport * as moment_ from 'moment-mini';\r\nconst moment = moment_; // patch to fix rollup \"moment has no default export\" issue, document here https://github.com/rollup/rollup/issues/670\r\nconst FORMAT = mapMomentDateFormatWithFieldType(FieldType.dateUs);\r\n\r\nexport const dateUsFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isDateValid = moment(value, FORMAT, false).isValid();\r\n  return (value && isDateValid) ? moment(value).format(FORMAT) : value;\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const decimalFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const params = columnDef.params || {};\r\n  const minDecimalPlaces = params.minDecimalPlaces || params.decimalPlaces || 2;\r\n  const maxDecimalPlaces = params.maxDecimalPlaces || 2;\r\n  const isNumber = (value === null || value === undefined) ? false : !isNaN(+value);\r\n\r\n  return !isNumber ? value : `${decimalFormatted(value, minDecimalPlaces, maxDecimalPlaces)}`;\r\n};\r\n\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const deleteIconFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) =>\r\n  `<i class=\"fa fa-trash pointer delete-icon\" aria-hidden=\"true\"></i>`;\r\n","import { Column, Formatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const dollarColoredBoldFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isNumber = (value === null || value === undefined) ? false : !isNaN(+value);\r\n  const params = columnDef && columnDef.params || {};\r\n  const minDecimal = params.minDecimal || 2;\r\n  const maxDecimal = params.minDecimal || 4;\r\n  const outputValue = (isNumber && (params.minDecimal || params.maxDecimal)) ? decimalFormatted(value, minDecimal, maxDecimal) : value;\r\n\r\n  if (!isNumber) {\r\n    return '';\r\n  } else if (value >= 0) {\r\n    return `<span style=\"color:green; font-weight: bold;\">$${outputValue}</span>`;\r\n  } else {\r\n    return `<span style=\"color:red; font-weight: bold;\">$${outputValue}</span>`;\r\n  }\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const dollarColoredFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isNumber = (value === null || value === undefined) ? false : !isNaN(+value);\r\n  const params = columnDef && columnDef.params || {};\r\n  const minDecimal = params.minDecimal || 2;\r\n  const maxDecimal = params.minDecimal || 4;\r\n  const outputValue = (isNumber && (params.minDecimal || params.maxDecimal)) ? decimalFormatted(value, minDecimal, maxDecimal) : value;\r\n\r\n  if (!isNumber) {\r\n    return '';\r\n  } else if (value >= 0) {\r\n    return `<span style=\"color:green;\">$${outputValue}</span>`;\r\n  } else {\r\n    return `<span style=\"color:red;\">$${outputValue}</span>`;\r\n  }\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const dollarFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const isNumber = (value === null || value === undefined) ? false : !isNaN(+value);\r\n  const params = columnDef && columnDef.params || {};\r\n  const minDecimal = params.minDecimal || 2;\r\n  const maxDecimal = params.minDecimal || 4;\r\n  const outputValue = (isNumber && (params.minDecimal || params.maxDecimal)) ? decimalFormatted(value, minDecimal, maxDecimal) : value;\r\n\r\n  return !isNumber ? '' : `$${outputValue}`;\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const editIconFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) =>\r\n  `<i class=\"fa fa-pencil pointer edit-icon\" aria-hidden=\"true\"></i>`;\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const hyperlinkFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  if (value && typeof value === 'string') {\r\n    const matchUrl = value.match(/^(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&amp;:\\/~\\+#]*[\\w\\-\\@?^=%&amp;\\/~\\+#])?/i);\r\n    if (matchUrl && Array.isArray(matchUrl)) {\r\n      return `<a href=\"${matchUrl[0]}\">' + value + '</a>`;\r\n    }\r\n  }\r\n  return '';\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\n\r\n/** Takes an hyperlink URI prefix (passed in column definition \"params.uriPrefix\") and adds the cell value. The structure will be \"<a href=\"uriPrefix\">value</a>\"  */\r\nexport const hyperlinkUriPrefixFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  let uriPrefix = (columnDef && columnDef.params && columnDef.params.uriPrefix) ? columnDef.params.uriPrefix : '';\r\n  if (!uriPrefix) {\r\n    throw new Error(`HyperlinkUriPrefix Formatter require a \"uriPrefix\" that can be passed through params. e.g.:: formatter: Formatters.hyperlinkUriPrefix, params: { uriPrefix: '/users/' }`);\r\n  }\r\n  if (value && uriPrefix && typeof uriPrefix === 'string' && !uriPrefix.includes('<script>')) {\r\n    uriPrefix += value;\r\n    return '<a href=\"' + uriPrefix + '\">' + value + '</a>';\r\n  }\r\n  return '';\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const infoIconFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) =>\r\n  `<i class=\"fa fa-info-circle pointer info-icon\" aria-hidden=\"true\"></i>`;\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const lowercaseFormatter: Formatter = (row: number, cell: number, value: string | any, columnDef: Column, dataContext: any): string => {\r\n  // make sure the value is a string\r\n  if (value !== undefined && typeof value !== 'string') {\r\n    value = value + '';\r\n  }\r\n\r\n  return value ? value.toLowerCase() : '';\r\n};\r\n","\r\nimport { Column, Formatter } from './../models/index';\r\n\r\n/**\r\n * Takes a value display it according to a mask provided\r\n * e.: 1234567890 with mask \"(000) 000-0000\" will display \"(123) 456-7890\"\r\n */\r\nexport const maskFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any) => {\r\n  const params = columnDef.params || {};\r\n  const mask = params.mask;\r\n\r\n  if (!mask) {\r\n    throw new Error(`You must provide a \"mask\" via the generic \"params\" options (e.g.: { formatter: Formatters.mask, params: { mask: '000-000' }}`);\r\n  }\r\n\r\n  if (value && mask) {\r\n    let i = 0;\r\n    const v = value.toString();\r\n    return mask.replace(/[09A]/g, () => v[i++] || '');\r\n  }\r\n  return '';\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\n\r\nexport const multipleFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any, grid: any) => {\r\n  const params = columnDef.params || {};\r\n  if (!params.formatters || !Array.isArray(params.formatters)) {\r\n    throw new Error(`The multiple formatter requires the \"formatters\" to be provided as a column params.\r\n    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }`);\r\n  }\r\n  const formatters: Formatter[] = params.formatters;\r\n\r\n  // loop through all Formatters, the value of 1st formatter will be used by 2nd formatter and so on.\r\n  // they are piped and executed in sequences\r\n  let currentValue = value;\r\n  for (const formatter of formatters) {\r\n    currentValue = formatter(row, cell, currentValue, columnDef, dataContext, grid);\r\n  }\r\n  return currentValue;\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const percentFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any): string => {\r\n  if (value === null || value === '') {\r\n    return '';\r\n  }\r\n\r\n  const outputValue = value > 0 ? value / 100 : 0;\r\n  return `<span>${outputValue}%</span>`;\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const percentCompleteBarFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any): string => {\r\n  if (value === null || value === '') {\r\n    return '';\r\n  }\r\n\r\n  let color;\r\n\r\n  if (value < 30) {\r\n    color = 'red';\r\n  } else if (value < 70) {\r\n    color = 'silver';\r\n  } else {\r\n    color = 'green';\r\n  }\r\n\r\n  return `<span class=\"percent-complete-bar\" style=\"background:${color}; width:${value}%\"></span>`;\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const percentCompleteFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any): string => {\r\n  if (value === null || value === '') {\r\n    return '-';\r\n  } else if (value < 50) {\r\n    return `<span style='color:red;font-weight:bold;'>${value}%</span>`;\r\n  } else {\r\n    return `<span style='color:green'>${value}%</span>`;\r\n  }\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const percentSymbolFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any): string => {\r\n  return value ? `<span>${value}%</span>` : '';\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const progressBarFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any): string => {\r\n  if (value === null || value === '') {\r\n    return '';\r\n  }\r\n\r\n  let color;\r\n\r\n  if (value < 30) {\r\n    color = 'danger';\r\n  } else if (value < 70) {\r\n    color = 'warning';\r\n  } else {\r\n    color = 'success';\r\n  }\r\n\r\n  return `<div class=\"progress\">\r\n    <div class=\"progress-bar progress-bar-${color} bg-${color}\" role=\"progressbar\" aria-valuenow=\"${value}\" aria-valuemin=\"0\" aria-valuemax=\"100\" style=\"min-width: 2em; width: ${value}%;\">\r\n    ${value}%\r\n    </div>\r\n  </div>`;\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\n\r\n/** Takes a cell value and translates it with the \"ngx-translate\" service */\r\nexport const translateFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any, grid: any) => {\r\n  const gridOptions = (grid && typeof grid.getOptions === 'function') ? grid.getOptions() : {};\r\n  const options = gridOptions || columnDef.params || {};\r\n  const translate = options.i18n;\r\n\r\n  if (!translate || typeof translate.instant !== 'function') {\r\n    throw new Error(`The translate formatter requires the \"ngx-translate\" Service to be provided as a Grid Options or Column Definition \"i18n\".\r\n    For example: this.gridOptions = { enableTranslate: true, i18n: this.translate }`);\r\n  }\r\n\r\n  // make sure the value is a string (for example a boolean value would throw an error)\r\n  if (value !== undefined && typeof value !== 'string') {\r\n    value = value + '';\r\n  }\r\n\r\n  return value ? translate.instant(value) : '';\r\n};\r\n","import { Column, Formatter } from './../models/index';\r\n\r\n/** Takes a boolean value, cast it to upperCase string and finally translates it with the \"ngx-translate\" service */\r\nexport const translateBooleanFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any, grid: any) => {\r\n  const gridOptions = (grid && typeof grid.getOptions === 'function') ? grid.getOptions() : {};\r\n  const options = gridOptions || columnDef.params || {};\r\n  const translate = options.i18n;\r\n\r\n  if (!translate || typeof translate.instant !== 'function') {\r\n    throw new Error(`The translate formatter requires the \"ngx-translate\" Service to be provided as a Grid Options or Column Definition \"i18n\".\r\n    For example: this.gridOptions = { enableTranslate: true, i18n: this.translate }`);\r\n  }\r\n\r\n  // make sure the value is a string (for example a boolean value would throw an error)\r\n  if (value !== undefined && typeof value !== 'string') {\r\n    value = value + '';\r\n  }\r\n  return value ? translate.instant(value.toUpperCase() as string) : '';\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const uppercaseFormatter: Formatter = (row: number, cell: number, value: string | any, columnDef: Column, dataContext: any): string => {\r\n  // make sure the value is a string\r\n  if (value !== undefined && typeof value !== 'string') {\r\n    value = value + '';\r\n  }\r\n\r\n  return value ? value.toUpperCase() : '';\r\n};\r\n","import { Column } from './../models/column.interface';\r\nimport { Formatter } from './../models/formatter.interface';\r\n\r\nexport const yesNoFormatter: Formatter = (row: number, cell: number, value: any, columnDef: Column, dataContext: any): string =>\r\n  value ? 'Yes' : 'No';\r\n","import { Column } from './../models/index';\r\nimport { arrayObjectToCsvFormatter } from './arrayObjectToCsvFormatter';\r\nimport { arrayToCsvFormatter } from './arrayToCsvFormatter';\r\nimport { boldFormatter } from './boldFormatter';\r\nimport { checkboxFormatter } from './checkboxFormatter';\r\nimport { checkmarkFormatter } from './checkmarkFormatter';\r\nimport { collectionFormatter } from './collectionFormatter';\r\nimport { collectionEditorFormatter } from './collectionEditorFormatter';\r\nimport { complexObjectFormatter } from './complexObjectFormatter';\r\nimport { dateIsoFormatter } from './dateIsoFormatter';\r\nimport { dateTimeIsoFormatter } from './dateTimeIsoFormatter';\r\nimport { dateTimeIsoAmPmFormatter } from './dateTimeIsoAmPmFormatter';\r\nimport { dateTimeUsAmPmFormatter } from './dateTimeUsAmPmFormatter';\r\nimport { dateTimeUsFormatter } from './dateTimeUsFormatter';\r\nimport { dateTimeShortIsoFormatter } from './dateTimeShortIsoFormatter';\r\nimport { dateTimeShortUsFormatter } from './dateTimeShortUsFormatter';\r\nimport { dateUsFormatter } from './dateUsFormatter';\r\nimport { decimalFormatter } from './decimalFormatter';\r\nimport { deleteIconFormatter } from './deleteIconFormatter';\r\nimport { dollarColoredBoldFormatter } from './dollarColoredBoldFormatter';\r\nimport { dollarColoredFormatter } from './dollarColoredFormatter';\r\nimport { dollarFormatter } from './dollarFormatter';\r\nimport { editIconFormatter } from './editIconFormatter';\r\nimport { hyperlinkFormatter } from './hyperlinkFormatter';\r\nimport { hyperlinkUriPrefixFormatter } from './hyperlinkUriPrefixFormatter';\r\nimport { infoIconFormatter } from './infoIconFormatter';\r\nimport { lowercaseFormatter } from './lowercaseFormatter';\r\nimport { maskFormatter } from './maskFormatter';\r\nimport { multipleFormatter } from './multipleFormatter';\r\nimport { percentFormatter } from './percentFormatter';\r\nimport { percentCompleteBarFormatter } from './percentCompleteBarFormatter';\r\nimport { percentCompleteFormatter } from './percentCompleteFormatter';\r\nimport { percentSymbolFormatter } from './percentSymbolFormatter';\r\nimport { progressBarFormatter } from './progressBarFormatter';\r\nimport { translateFormatter } from './translateFormatter';\r\nimport { translateBooleanFormatter } from './translateBooleanFormatter';\r\nimport { uppercaseFormatter } from './uppercaseFormatter';\r\nimport { yesNoFormatter } from './yesNoFormatter';\r\n\r\n/** Provides a list of different Formatters that will change the cell value displayed in the UI */\r\nexport const Formatters = {\r\n  /**\r\n   * Takes an array of complex objects converts it to a comma delimited string.\r\n   * Requires to pass an array of \"propertyNames\" in the column definition the generic \"params\" property\r\n   * For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition::\r\n   * { params: { propertyNames: ['firtName'] }}\r\n   */\r\n  arrayObjectToCsv: arrayObjectToCsvFormatter,\r\n\r\n  /** Takes an array of string and converts it to a comma delimited string */\r\n  arrayToCsv: arrayToCsvFormatter,\r\n\r\n  /** show value in bold font weight as well */\r\n  bold: boldFormatter,\r\n\r\n  /** When value is filled (true), it will display a checkbox Unicode icon */\r\n  checkbox: checkboxFormatter,\r\n\r\n  /** When value is filled (true), it will display a Font-Awesome icon (fa-check) */\r\n  checkmark: checkmarkFormatter,\r\n\r\n  /** Takes a complex data object and return the data under that property (for example: \"user.firstName\" will return the first name \"John\") */\r\n  complexObject: complexObjectFormatter,\r\n\r\n  /**\r\n   * Looks up values from the columnDefinition.params.collection property and displays the label in CSV or string format\r\n   * @example\r\n   * // the grid will display 'foo' and 'bar' and not 1 and 2 from your dataset\r\n   * { params: { collection: [{ value: 1, label: 'foo'}, {value: 2, label: 'bar' }] }}\r\n   * const dataset = [{ value: 1 },{ value: 2 }];\r\n   */\r\n  collection: collectionFormatter,\r\n\r\n  /**\r\n   * Looks up values from the columnDefinition.editor.collection property and displays the label in CSV or string format\r\n   * @example\r\n   * // the grid will display 'foo' and 'bar' and not 1 and 2 from your dataset\r\n   * { params: { collection: [{ value: 1, label: 'foo'}, {value: 2, label: 'bar' }] }}\r\n   * const dataset = [{ value: 1 },{ value: 2 }];\r\n   */\r\n  collectionEditor: collectionEditorFormatter,\r\n\r\n  /** Takes a Date object and displays it as an ISO Date format */\r\n  dateIso: dateIsoFormatter,\r\n\r\n  /** Takes a Date object and displays it as an ISO Date+Time format */\r\n  dateTimeIso: dateTimeIsoFormatter,\r\n\r\n  /** Takes a Date object and displays it as an ISO Date+Time (without seconds) format */\r\n  dateTimeShortIso: dateTimeShortIsoFormatter,\r\n\r\n  /** Takes a Date object and displays it as an ISO Date+Time+(am/pm) format */\r\n  dateTimeIsoAmPm: dateTimeIsoAmPmFormatter,\r\n\r\n  /** Takes a Date object and displays it as an US Date format */\r\n  dateUs: dateUsFormatter,\r\n\r\n  /** Takes a Date object and displays it as an US Date+Time format */\r\n  dateTimeUs: dateTimeUsFormatter,\r\n\r\n  /** Takes a Date object and displays it as an US Date+Time (without seconds) format */\r\n  dateTimeShortUs: dateTimeShortUsFormatter,\r\n\r\n  /** Takes a Date object and displays it as an US Date+Time+(am/pm) format */\r\n  dateTimeUsAmPm: dateTimeUsAmPmFormatter,\r\n\r\n  /** Displays a Font-Awesome delete icon (fa-trash) */\r\n  deleteIcon: deleteIconFormatter,\r\n\r\n  /**\r\n   * Display the value as x decimals formatted, defaults to 2 decimals.\r\n   * You can pass \"decimalPlaces\" or \"minDecimalPlaces\" and/or \"maxDecimalPlaces\" to the \"params\" property.\r\n   * For example:: `{ formatter: Formatters.decimal, params: { decimalPlaces: 3 }}`\r\n   * The property \"decimalPlaces\" is an alias of \"minDecimalPlaces\"\r\n   */\r\n  decimal: decimalFormatter,\r\n\r\n  /** Display the value as 2 decimals formatted with dollar sign '$' at the end of of the value */\r\n  dollar: dollarFormatter,\r\n\r\n  /** Display the value as 2 decimals formatted with dollar sign '$' at the end of of the value, change color of text to red/green on negative/positive value */\r\n  dollarColored: dollarColoredFormatter,\r\n\r\n  /** Display the value as 2 decimals formatted with dollar sign '$' at the end of of the value, change color of text to red/green on negative/positive value, show it in bold font weight as well */\r\n  dollarColoredBold: dollarColoredBoldFormatter,\r\n\r\n  /** Displays a Font-Awesome edit icon (fa-pencil) */\r\n  editIcon: editIconFormatter,\r\n\r\n  /** Takes an hyperlink cell value and transforms it into a real hyperlink, given that the value starts with 1 of these (http|ftp|https). The structure will be \"<a href=\"hyperlink\">hyperlink</a>\" */\r\n  hyperlink: hyperlinkFormatter,\r\n\r\n  /** Takes an hyperlink URI prefix (passed in column definition \"params.uriPrefix\") and adds the cell value. The structure will be \"<a href=\"uriPrefix\">value</a>\"  */\r\n  hyperlinkUriPrefix: hyperlinkUriPrefixFormatter,\r\n\r\n  /** Displays a Font-Awesome edit icon (fa-info-circle) */\r\n  infoIcon: infoIconFormatter,\r\n\r\n  /** Takes a value and displays it all lowercase */\r\n  lowercase: lowercaseFormatter,\r\n\r\n  /**\r\n   * Takes a value display it according to a mask provided\r\n   * e.: 1234567890 with mask \"(000) 000-0000\" will display \"(123) 456-7890\"\r\n   */\r\n  mask: maskFormatter,\r\n\r\n  /**\r\n   * You can pipe multiple formatters (executed in sequence), use params to pass the list of formatters.\r\n   * Requires to pass an array of \"formatters\" in the column definition the generic \"params\" property\r\n   * For example::\r\n   * { field: 'title', formatter: Formatters.multiple, params: { formatters: [ Formatters.lowercase, Formatters.uppercase ] }\r\n   */\r\n  multiple: multipleFormatter,\r\n\r\n  /** Takes a cell value number (between 0.0-1.0) and displays a red (<50) or green (>=50) bar */\r\n  percent: percentFormatter,\r\n\r\n  /** Takes a cell value number (between 0.0-100) and displays a red (<50) or green (>=50) bar */\r\n  percentComplete: percentCompleteFormatter,\r\n\r\n  /** Takes a cell value number (between 0-100) and displays Bootstrap \"percent-complete-bar\" a red (<30), silver (>30 & <70) or green (>=70) bar */\r\n  percentCompleteBar: percentCompleteBarFormatter,\r\n\r\n  /** Takes a cell value number (between 0-100) and add the \"%\" after the number */\r\n  percentSymbol: percentSymbolFormatter,\r\n\r\n  /** Takes a cell value number (between 0-100) and displays Bootstrap \"progress-bar\" a red (<30), silver (>30 & <70) or green (>=70) bar */\r\n  progressBar: progressBarFormatter,\r\n\r\n  /** Takes a cell value and translates it (i18n). Requires an instance of the Translate Service:: `i18n: this.translate */\r\n  translate: translateFormatter,\r\n\r\n  /** Takes a boolean value, cast it to upperCase string and finally translates it (i18n). */\r\n  translateBoolean: translateBooleanFormatter,\r\n\r\n  /** Takes a value and displays it all uppercase */\r\n  uppercase: uppercaseFormatter,\r\n\r\n  /** Takes a boolean value and display a string 'Yes' or 'No' */\r\n  yesNo: yesNoFormatter\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const avgTotalsPercentageFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.avg && totals.avg[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + Math.round(val) + '%' + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const avgTotalsDollarFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.avg && totals.avg[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + '$' + decimalFormatted(val, 2, 4) + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const avgTotalsFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.avg && totals.avg[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + Math.round(val) + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const minTotalsFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.min && totals.min[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + ((Math.round(parseFloat(val) * 1000000) / 1000000)) + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const maxTotalsFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.max && totals.max[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + ((Math.round(parseFloat(val) * 1000000) / 1000000)) + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const sumTotalsColoredFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (isNaN(+val)) {\r\n    return '';\r\n  } else if (val >= 0) {\r\n    return `<span style=\"color:green;\">${prefix + ((Math.round(parseFloat(val) * 1000000) / 1000000)) + suffix}</span>`;\r\n  } else {\r\n    return `<span style=\"color:red;\">${prefix + ((Math.round(parseFloat(val) * 1000000) / 1000000)) + suffix}</span>`;\r\n  }\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const sumTotalsDollarColoredBoldFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (isNaN(+val)) {\r\n    return '';\r\n  } else if (val >= 0) {\r\n    return `<span style=\"color:green; font-weight: bold;\">${prefix + '$' + decimalFormatted(val, 2, 2) + suffix}</span>`;\r\n  } else {\r\n    return `<span style=\"color:red; font-weight: bold;\">${prefix + '$' + decimalFormatted(val, 2, 2) + suffix}</span>`;\r\n  }\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const sumTotalsDollarColoredFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (isNaN(+val)) {\r\n    return '';\r\n  } else if (val >= 0) {\r\n    return `<span style=\"color:green;\">${prefix + '$' + decimalFormatted(val, 2, 2) + suffix}</span>`;\r\n  } else {\r\n    return `<span style=\"color:red;\">${prefix + '$' + decimalFormatted(val, 2, 2) + suffix}</span>`;\r\n  }\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const sumTotalsDollarBoldFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return `<span style=\"font-weight: bold;\">${prefix + '$' + decimalFormatted(val, 2, 4) + suffix}</span>`;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\nimport { decimalFormatted } from './../services/utilities';\r\n\r\nexport const sumTotalsDollarFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + '$' + decimalFormatted(val, 2, 2) + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const sumTotalsFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return prefix + ((Math.round(parseFloat(val) * 1000000) / 1000000)) + suffix;\r\n  }\r\n  return '';\r\n};\r\n","import { Column, GroupTotalsFormatter } from './../models/index';\r\n\r\nexport const sumTotalsBoldFormatter: GroupTotalsFormatter = (totals: any, columnDef: Column, grid?: any) => {\r\n  const field = columnDef.field || '';\r\n  const val = totals.sum && totals.sum[field];\r\n  const prefix = (columnDef.params && columnDef.params.groupFormatterPrefix) ? columnDef.params.groupFormatterPrefix : '';\r\n  const suffix = (columnDef.params && columnDef.params.groupFormatterSuffix) ? columnDef.params.groupFormatterSuffix : '';\r\n\r\n  if (val != null) {\r\n    return `<span style=\"font-weight: bold;\">${prefix + ((Math.round(parseFloat(val) * 1000000) / 1000000)) + suffix}`;\r\n  }\r\n  return '';\r\n};\r\n","import { Column } from './../models/index';\r\nimport { avgTotalsPercentageFormatter } from './avgTotalsPercentageFormatter';\r\nimport { avgTotalsDollarFormatter } from './avgTotalsDollarFormatter';\r\nimport { avgTotalsFormatter } from './avgTotalsFormatter';\r\nimport { minTotalsFormatter } from './minTotalsFormatter';\r\nimport { maxTotalsFormatter } from './maxTotalsFormatter';\r\nimport { sumTotalsColoredFormatter } from './sumTotalsColoredFormatter';\r\nimport { sumTotalsDollarColoredBoldFormatter } from './sumTotalsDollarColoredBoldFormatter';\r\nimport { sumTotalsDollarColoredFormatter } from './sumTotalsDollarColoredFormatter';\r\nimport { sumTotalsDollarBoldFormatter } from './sumTotalsDollarBoldFormatter';\r\nimport { sumTotalsDollarFormatter } from './sumTotalsDollarFormatter';\r\nimport { sumTotalsFormatter } from './sumTotalsFormatter';\r\nimport { sumTotalsBoldFormatter } from './sumTotalsBoldFormatter';\r\n\r\n/** Provides a list of different Formatters that will change the cell value displayed in the UI */\r\nexport const GroupTotalFormatters = {\r\n  /**\r\n   * Average all the column totals\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g.: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  avgTotals: avgTotalsFormatter,\r\n\r\n  /**\r\n   * Average all the column totals and display '$' at the end of the value\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g.: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  avgTotalsDollar: avgTotalsDollarFormatter,\r\n\r\n  /**\r\n   * Average all the column totals and display '%' at the end of the value\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g.: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  avgTotalsPercentage: avgTotalsPercentageFormatter,\r\n\r\n  /**\r\n   * Show max value of all the column totals\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g.: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  maxTotals: maxTotalsFormatter,\r\n\r\n  /**\r\n   * Show min value of all the column totals\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g.: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  minTotals: minTotalsFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g.: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotals: sumTotalsFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals and display it in bold font weight\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotalsBold: sumTotalsBoldFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals, change color of text to red/green on negative/positive value\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotalsColored: sumTotalsColoredFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals and display dollar sign\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotalsDollar: sumTotalsDollarFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals and display dollar sign and show it in bold font weight\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotalsDollarBold: sumTotalsDollarBoldFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals, change color of text to red/green on negative/positive value\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotalsDollarColored: sumTotalsDollarColoredFormatter,\r\n\r\n  /**\r\n   * Sums up all the column totals, change color of text to red/green on negative/positive value, show it in bold font weight as well\r\n   * Extra options available in \"params\":: \"groupFormatterPrefix\" and \"groupFormatterSuffix\", e.g: params: { groupFormatterPrefix: '<i>Total</i>: ', groupFormatterSuffix: '$' }\r\n   */\r\n  sumTotalsDollarColoredBold: sumTotalsDollarColoredBoldFormatter,\r\n};\r\n","import { Pagination } from './../models/pagination.interface';\nimport { AfterViewInit, Component, EventEmitter, Injectable, Input, OnDestroy, Output } from '@angular/core';\nimport { castToPromise } from './../services/utilities';\nimport { GridOption } from './../models/index';\nimport { FilterService } from './../services/index';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'slick-pagination',\n  templateUrl: './slick-pagination.component.html'\n})\n@Injectable()\nexport class SlickPaginationComponent implements AfterViewInit, OnDestroy {\n  private _filterSubcription: Subscription;\n  private _gridPaginationOptions: GridOption;\n  private _isFirstRender = true;\n  @Output() onPaginationChanged = new EventEmitter<Pagination>();\n\n  @Input()\n  set gridPaginationOptions(gridPaginationOptions: GridOption) {\n    this._gridPaginationOptions = gridPaginationOptions;\n    if (this._isFirstRender || !gridPaginationOptions || !gridPaginationOptions.pagination || (gridPaginationOptions.pagination.totalItems !== this.totalItems)) {\n      this.refreshPagination();\n      this._isFirstRender = false;\n    }\n  }\n  get gridPaginationOptions(): GridOption {\n    return this._gridPaginationOptions;\n  }\n  @Input() grid: any;\n  dataFrom = 1;\n  dataTo = 1;\n  itemsPerPage: number;\n  pageCount = 0;\n  pageNumber = 1;\n  totalItems = 0;\n  paginationCallback: Function;\n  paginationPageSizes = [25, 75, 100];\n  fromToParams: any = { from: this.dataFrom, to: this.dataTo, totalItems: this.totalItems };\n\n  /** Constructor */\n  constructor(private filterService: FilterService) { }\n\n  ngOnDestroy() {\n    this.dispose();\n  }\n\n  ngAfterViewInit() {\n    this._gridPaginationOptions = this._gridPaginationOptions;\n    if (!this._gridPaginationOptions || !this._gridPaginationOptions.pagination || (this._gridPaginationOptions.pagination.totalItems !== this.totalItems)) {\n      this.refreshPagination();\n    }\n\n    // Subscribe to Event Emitter of Filter & Sort changed, go back to page 1 when that happen\n    this._filterSubcription = this.filterService.onFilterChanged.subscribe((data) => {\n      this.refreshPagination(true);\n    });\n    // Subscribe to Filter clear and go back to page 1 when that happen\n    this._filterSubcription = this.filterService.onFilterCleared.subscribe((data) => {\n      this.refreshPagination(true);\n    });\n  }\n\n  ceil(number: number) {\n    return Math.ceil(number);\n  }\n\n  changeToFirstPage(event: any) {\n    this.pageNumber = 1;\n    this.onPageChanged(event, this.pageNumber);\n  }\n\n  changeToLastPage(event: any) {\n    this.pageNumber = this.pageCount;\n    this.onPageChanged(event, this.pageNumber);\n  }\n\n  changeToNextPage(event: any) {\n    if (this.pageNumber < this.pageCount) {\n      this.pageNumber++;\n      this.onPageChanged(event, this.pageNumber);\n    }\n  }\n\n  changeToPreviousPage(event: any) {\n    if (this.pageNumber > 0) {\n      this.pageNumber--;\n      this.onPageChanged(event, this.pageNumber);\n    }\n  }\n\n  changeToCurrentPage(event: any) {\n    this.pageNumber = +event.currentTarget.value;\n    if (this.pageNumber < 1) {\n      this.pageNumber = 1;\n    } else if (this.pageNumber > this.pageCount) {\n      this.pageNumber = this.pageCount;\n    }\n\n    this.onPageChanged(event, this.pageNumber);\n  }\n\n  dispose() {\n    this.onPaginationChanged.unsubscribe();\n    if (this._filterSubcription) {\n      this._filterSubcription.unsubscribe();\n    }\n  }\n\n  onChangeItemPerPage(event: any) {\n    const itemsPerPage = +event.target.value;\n    this.pageCount = Math.ceil(this.totalItems / itemsPerPage);\n    this.pageNumber = (this.totalItems > 0) ? 1 : 0;\n    this.itemsPerPage = itemsPerPage;\n    this.onPageChanged(event, this.pageNumber);\n  }\n\n  refreshPagination(isPageNumberReset: boolean = false) {\n    const backendApi = this._gridPaginationOptions.backendServiceApi;\n    if (!backendApi || !backendApi.service || !backendApi.process) {\n      throw new Error(`BackendServiceApi requires at least a \"process\" function and a \"service\" defined`);\n    }\n\n    if (this._gridPaginationOptions && this._gridPaginationOptions.pagination) {\n      const pagination = this._gridPaginationOptions.pagination;\n      // set the number of items per page if not already set\n      if (!this.itemsPerPage) {\n        this.itemsPerPage = +((backendApi && backendApi.options && backendApi.options.paginationOptions && backendApi.options.paginationOptions.first) ? backendApi.options.paginationOptions.first : this._gridPaginationOptions.pagination.pageSize);\n      }\n\n      // if totalItems changed, we should always go back to the first page and recalculation the From-To indexes\n      if (isPageNumberReset || this.totalItems !== pagination.totalItems) {\n        if (this._isFirstRender && pagination.pageNumber && pagination.pageNumber > 1) {\n          this.pageNumber = pagination.pageNumber || 1;\n        } else {\n          this.pageNumber = 1;\n        }\n\n        // when page number is set to 1 then also reset the \"offset\" of backend service\n        if (this.pageNumber === 1) {\n          backendApi.service.resetPaginationOptions();\n        }\n      }\n\n      // calculate and refresh the multiple properties of the pagination UI\n      this.paginationPageSizes = this._gridPaginationOptions.pagination.pageSizes;\n      this.totalItems = this._gridPaginationOptions.pagination.totalItems;\n      this.recalculateFromToIndexes();\n    }\n    this.pageCount = Math.ceil(this.totalItems / this.itemsPerPage);\n  }\n\n  async onPageChanged(event: Event | undefined, pageNumber: number) {\n    this.recalculateFromToIndexes();\n\n    const backendApi = this._gridPaginationOptions.backendServiceApi;\n    if (!backendApi || !backendApi.service || !backendApi.process) {\n      throw new Error(`BackendServiceApi requires at least a \"process\" function and a \"service\" defined`);\n    }\n\n    if (this.dataTo > this.totalItems) {\n      this.dataTo = this.totalItems;\n    } else if (this.totalItems < this.itemsPerPage) {\n      this.dataTo = this.totalItems;\n    }\n    if (backendApi) {\n      try {\n        const itemsPerPage = +this.itemsPerPage;\n\n        // keep start time & end timestamps & return it after process execution\n        const startTime = new Date();\n\n        if (backendApi.preProcess) {\n          backendApi.preProcess();\n        }\n\n        const query = backendApi.service.processOnPaginationChanged(event, { newPage: pageNumber, pageSize: itemsPerPage });\n\n        // the process could be an Observable (like HttpClient) or a Promise\n        // in any case, we need to have a Promise so that we can await on it (if an Observable, convert it to Promise)\n        const observableOrPromise = backendApi.process(query);\n        const processResult = await castToPromise(observableOrPromise);\n        const endTime = new Date();\n\n        // from the result, call our internal post process to update the Dataset and Pagination info\n        if (processResult && backendApi.internalPostProcess) {\n          backendApi.internalPostProcess(processResult);\n        }\n\n        // send the response process to the postProcess callback\n        if (backendApi.postProcess) {\n          if (processResult instanceof Object) {\n            processResult.statistics = {\n              startTime,\n              endTime,\n              executionTime: endTime.valueOf() - startTime.valueOf(),\n              itemCount: this.totalItems,\n              totalItemCount: this.totalItems\n            };\n          }\n          backendApi.postProcess(processResult);\n        }\n      } catch (e) {\n        if (backendApi && backendApi.onError) {\n          backendApi.onError(e);\n        } else {\n          throw e;\n        }\n      }\n    } else {\n      throw new Error('Pagination with a backend service requires \"BackendServiceApi\" to be defined in your grid options');\n    }\n\n    // emit the changes to the parent component\n    this.onPaginationChanged.emit({\n      pageNumber: this.pageNumber,\n      pageSizes: this.paginationPageSizes,\n      pageSize: this.itemsPerPage,\n      totalItems: this.totalItems\n    });\n  }\n\n  recalculateFromToIndexes() {\n    if (this.totalItems === 0) {\n      this.dataFrom = 0;\n      this.dataTo = 0;\n      this.pageNumber = 0;\n    } else {\n      this.dataFrom = (this.pageNumber * this.itemsPerPage) - this.itemsPerPage + 1;\n      this.dataTo = (this.totalItems < this.itemsPerPage) ? this.totalItems : (this.pageNumber * this.itemsPerPage);\n    }\n  }\n}\n","// import 3rd party vendor libs\n// only import the necessary core lib, each will be imported on demand when enabled (via require)\nimport 'jquery-ui-dist/jquery-ui';\nimport 'slickgrid/lib/jquery.event.drag-2.3.0';\nimport 'slickgrid/slick.core';\nimport 'slickgrid/slick.grid';\nimport 'slickgrid/slick.dataview';\n\nimport { AfterViewInit, Component, ElementRef, EventEmitter, Inject, Injectable, Input, Output, OnDestroy, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { castToPromise, titleCase, unsubscribeAllObservables } from './../services/utilities';\nimport { GlobalGridOptions } from './../global-grid-options';\nimport {\n  AngularGridInstance,\n  BackendServiceOption,\n  Column,\n  ExtensionName,\n  GraphqlResult,\n  GridOption,\n  GridStateChange,\n  GridStateType,\n  Pagination,\n} from './../models/index';\nimport { FilterFactory } from '../filters/filterFactory';\nimport { SlickgridConfig } from '../slickgrid-config';\nimport { Observable, Subscription } from 'rxjs';\n\n// Services\nimport { ExportService } from './../services/export.service';\nimport { ExtensionService } from '../services/extension.service';\nimport { ExtensionUtility } from '../extensions/extensionUtility';\nimport { FilterService } from './../services/filter.service';\nimport { GraphqlService } from './../services/graphql.service';\nimport { GridEventService } from './../services/gridEvent.service';\nimport { GridService } from './../services/grid.service';\nimport { GridStateService } from './../services/gridState.service';\nimport { GroupingAndColspanService } from './../services/groupingAndColspan.service';\nimport { ResizerService } from './../services/resizer.service';\nimport { SharedService } from '../services/shared.service';\nimport { SortService } from './../services/sort.service';\n\n// Extensions (SlickGrid Controls & Plugins)\nimport { AutoTooltipExtension } from '../extensions/autoTooltipExtension';\nimport { CellExternalCopyManagerExtension } from '../extensions/cellExternalCopyManagerExtension';\nimport { CheckboxSelectorExtension } from '../extensions/checkboxSelectorExtension';\nimport { ColumnPickerExtension } from '../extensions/columnPickerExtension';\nimport { DraggableGroupingExtension } from '../extensions/draggableGroupingExtension';\nimport { GridMenuExtension } from '../extensions/gridMenuExtension';\nimport { GroupItemMetaProviderExtension } from '../extensions/groupItemMetaProviderExtension';\nimport { HeaderButtonExtension } from '../extensions/headerButtonExtension';\nimport { HeaderMenuExtension } from '../extensions/headerMenuExtension';\nimport { RowMoveManagerExtension } from '../extensions/rowMoveManagerExtension';\nimport { RowSelectionExtension } from '../extensions/rowSelectionExtension';\n\n\n// using external non-typed js libraries\ndeclare var Slick: any;\ndeclare var $: any;\n\nconst slickgridEventPrefix = 'sg';\n\n@Injectable()\n@Component({\n  selector: 'angular-slickgrid',\n  templateUrl: './angular-slickgrid.component.html',\n  providers: [\n    // make everything transient (non-singleton)\n    AutoTooltipExtension,\n    CellExternalCopyManagerExtension,\n    CheckboxSelectorExtension,\n    ColumnPickerExtension,\n    DraggableGroupingExtension,\n    ExtensionService,\n    ExportService,\n    ExtensionUtility,\n    FilterFactory,\n    FilterService,\n    GraphqlService,\n    GridEventService,\n    GridMenuExtension,\n    GridService,\n    GridStateService,\n    GroupingAndColspanService,\n    GroupItemMetaProviderExtension,\n    HeaderButtonExtension,\n    HeaderMenuExtension,\n    ResizerService,\n    RowMoveManagerExtension,\n    RowSelectionExtension,\n    SharedService,\n    SortService,\n    SlickgridConfig\n  ]\n})\nexport class AngularSlickgridComponent implements AfterViewInit, OnDestroy, OnInit {\n  private _dataset: any[];\n  private _columnDefinitions: Column[];\n  private _dataView: any;\n  private _eventHandler: any = new Slick.EventHandler();\n  private _fixedHeight: number | null;\n  private _fixedWidth: number | null;\n  private _hideHeaderRowAfterPageLoad = false;\n  grid: any;\n  gridPaginationOptions: GridOption;\n  gridHeightString: string;\n  gridWidthString: string;\n  groupingDefinition: any = {};\n  groupItemMetadataProvider: any;\n  showPagination = false;\n  isGridInitialized = false;\n  subscriptions: Subscription[] = [];\n\n  @Output() onAngularGridCreated = new EventEmitter<AngularGridInstance>();\n  @Output() onDataviewCreated = new EventEmitter<any>();\n  @Output() onGridCreated = new EventEmitter<any>();\n  @Output() onGridInitialized = new EventEmitter<any>();\n  @Output() onBeforeGridCreate = new EventEmitter<boolean>();\n  @Output() onBeforeGridDestroy = new EventEmitter<any>();\n  @Output() onAfterGridDestroyed = new EventEmitter<boolean>();\n  @Output() onGridStateChanged = new EventEmitter<GridStateChange>();\n  @Input() customDataView: any;\n  @Input() gridId: string;\n  @Input() gridOptions: GridOption;\n\n  @Input()\n  set gridHeight(height: number) {\n    this._fixedHeight = height;\n  }\n  @Input()\n  set gridWidth(width: number) {\n    this._fixedWidth = width;\n  }\n\n  @Input()\n  set columnDefinitions(columnDefinitions: Column[]) {\n    this._columnDefinitions = columnDefinitions;\n    if (this.isGridInitialized) {\n      this.updateColumnDefinitionsList(columnDefinitions);\n    }\n  }\n  get columnDefinitions(): Column[] {\n    return this._columnDefinitions;\n  }\n  @Input()\n  set dataset(dataset: any[]) {\n    this._dataset = dataset;\n    this.refreshGridData(dataset);\n  }\n  get dataset(): any[] {\n    return this._dataView.getItems();\n  }\n\n  constructor(\n    private elm: ElementRef,\n    private exportService: ExportService,\n    private extensionService: ExtensionService,\n    private extensionUtility: ExtensionUtility,\n    private filterService: FilterService,\n    private gridService: GridService,\n    private gridEventService: GridEventService,\n    private gridStateService: GridStateService,\n    private groupingAndColspanService: GroupingAndColspanService,\n    private resizer: ResizerService,\n    private sharedService: SharedService,\n    private sortService: SortService,\n    private translate: TranslateService,\n    @Inject('config') private forRootConfig: GridOption\n  ) {}\n\n  ngOnInit(): void {\n    this.onBeforeGridCreate.emit(true);\n    if (this.gridOptions && !this.gridOptions.enableAutoResize && !this.gridOptions.autoResize) {\n      this.gridHeightString = `${this._fixedHeight}px`;\n      this.gridWidthString = `${this._fixedWidth}px`;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.onBeforeGridDestroy.emit(this.grid);\n    this.destroy();\n    this.onAfterGridDestroyed.emit(true);\n  }\n\n  destroy(emptyDomElementContainer = false) {\n    this._dataView = [];\n    this.gridOptions = {};\n    this._eventHandler.unsubscribeAll();\n    this.extensionService.dispose();\n    this.filterService.dispose();\n    this.gridEventService.dispose();\n    this.gridStateService.dispose();\n    this.groupingAndColspanService.dispose();\n    this.resizer.dispose();\n    this.sortService.dispose();\n    this.grid.destroy();\n\n    if (emptyDomElementContainer) {\n      $(this.gridOptions.gridContainerId).empty();\n    }\n\n    // also unsubscribe all RxJS subscriptions\n    this.subscriptions = unsubscribeAllObservables(this.subscriptions);\n  }\n\n  ngAfterViewInit() {\n    this.initialization();\n    this.isGridInitialized = true;\n  }\n\n  initialization() {\n    // make sure the dataset is initialized (if not it will throw an error that it cannot getLength of null)\n    this._dataset = this._dataset || [];\n    this.gridOptions = this.mergeGridOptions(this.gridOptions);\n    this.createBackendApiInternalPostProcessCallback(this.gridOptions);\n\n    if (!this.customDataView) {\n      if (this.gridOptions.draggableGrouping || this.gridOptions.enableGrouping) {\n        this.extensionUtility.loadExtensionDynamically(ExtensionName.groupItemMetaProvider);\n        this.groupItemMetadataProvider = new Slick.Data.GroupItemMetadataProvider();\n        this.sharedService.groupItemMetadataProvider = this.groupItemMetadataProvider;\n        this._dataView = new Slick.Data.DataView({ groupItemMetadataProvider: this.groupItemMetadataProvider });\n      } else {\n        this._dataView = new Slick.Data.DataView();\n      }\n    }\n\n    // for convenience, we provide the property \"editor\" as an Angular-Slickgrid editor complex object\n    // however \"editor\" is used internally by SlickGrid for it's own Editor Factory\n    // so in our lib we will swap \"editor\" and copy it into a new property called \"internalColumnEditor\"\n    // then take back \"editor.model\" and make it the new \"editor\" so that SlickGrid Editor Factory still works\n    this._columnDefinitions = this._columnDefinitions.map((column: Column | any) => {\n      // on every Editor that have a \"collectionAsync\", resolve the data and assign it to the \"collection\" property\n      if (column.editor && column.editor.collectionAsync) {\n        this.loadEditorCollectionAsync(column);\n      }\n      return { ...column, editor: column.editor && column.editor.model, internalColumnEditor: { ...column.editor  }};\n    });\n\n    // save reference for all columns before they optionally become hidden/visible\n    this.sharedService.allColumns = this._columnDefinitions;\n    this.sharedService.visibleColumns = this._columnDefinitions;\n    this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions, this.gridOptions);\n\n    // build SlickGrid Grid, also user might optionally pass a custom dataview (e.g. remote model)\n    this.grid = new Slick.Grid(`#${this.gridId}`, this.customDataView || this._dataView, this._columnDefinitions, this.gridOptions);\n\n    this.sharedService.dataView = this._dataView;\n    this.sharedService.grid = this.grid;\n\n    this.extensionService.attachDifferentExtensions();\n    this.attachDifferentHooks(this.grid, this.gridOptions, this._dataView);\n\n    // emit the Grid & DataView object to make them available in parent component\n    this.onGridCreated.emit(this.grid);\n\n    // initialize the SlickGrid grid\n    this.grid.init();\n\n    if (!this.customDataView && (this._dataView && this._dataView.beginUpdate && this._dataView.setItems && this._dataView.endUpdate)) {\n      this.onDataviewCreated.emit(this._dataView);\n      this._dataView.beginUpdate();\n      this._dataView.setItems(this._dataset, this.gridOptions.datasetIdPropertyName);\n      this._dataView.endUpdate();\n    }\n\n    // user might want to hide the header row on page load but still have `enableFiltering: true`\n    // if that is the case, we need to hide the headerRow ONLY AFTER all filters got created & dataView exist\n    if (this._hideHeaderRowAfterPageLoad) {\n      this.showHeaderRow(false);\n    }\n\n    // after the DataView is created & updated execute some processes\n    this.executeAfterDataviewCreated(this.grid, this.gridOptions, this._dataView);\n\n    // attach resize ONLY after the dataView is ready\n    this.attachResizeHook(this.grid, this.gridOptions);\n\n    // attach grouping and header grouping colspan service\n    if (this.gridOptions.createPreHeaderPanel && !this.gridOptions.enableDraggableGrouping) {\n      this.groupingAndColspanService.init(this.grid, this._dataView);\n    }\n\n    // attach grid  service\n    this.gridService.init(this.grid, this._dataView);\n\n    // when user enables translation, we need to translate Headers on first pass & subsequently in the attachDifferentHooks\n    if (this.gridOptions.enableTranslate) {\n      this.extensionService.translateColumnHeaders();\n    }\n\n    // if Export is enabled, initialize the service with the necessary grid and other objects\n    if (this.gridOptions.enableExport) {\n      this.exportService.init(this.grid, this._dataView);\n    }\n\n    // once all hooks are in placed and the grid is initialized, we can emit an event\n    this.onGridInitialized.emit(this.grid);\n\n    // attach the Backend Service API callback functions only after the grid is initialized\n    // because the preProcess() and onInit() might get triggered\n    if (this.gridOptions && this.gridOptions.backendServiceApi) {\n      this.attachBackendCallbackFunctions(this.gridOptions);\n    }\n\n    this.gridStateService.init(this.grid, this.extensionService, this.filterService, this.sortService);\n\n    this.onAngularGridCreated.emit({\n      // Slick Grid & DataView objects\n      dataView: this._dataView,\n      slickGrid: this.grid,\n\n      // public methods\n      destroy: this.destroy.bind(this),\n\n      // return all available Services (non-singleton)\n      backendService: this.gridOptions && this.gridOptions.backendServiceApi && this.gridOptions.backendServiceApi.service,\n      exportService: this.exportService,\n      filterService: this.filterService,\n      gridEventService: this.gridEventService,\n      gridStateService: this.gridStateService,\n      gridService: this.gridService,\n      groupingService: this.groupingAndColspanService,\n      extensionService: this.extensionService,\n\n      /** @deprecated please use \"extensionService\" instead */\n      pluginService: this.extensionService,\n      resizerService: this.resizer,\n      sortService: this.sortService,\n    });\n  }\n\n  /**\n   * Commits the current edit to the grid\n   */\n  commitEdit(target: Element) {\n    if (this.grid.getOptions().autoCommitEdit) {\n      const activeNode = this.grid.getActiveCellNode();\n\n      // a timeout must be set or this could come into conflict when slickgrid\n      // tries to commit the edit when going from one editor to another on the grid\n      // through the click event. If the timeout was not here it would\n      // try to commit/destroy the twice, which would throw a jquery\n      // error about the element not being in the DOM\n      setTimeout(() => {\n        // make sure the target is the active editor so we do not\n        // commit prematurely\n        if (activeNode && activeNode.contains(target) && this.grid.getEditorLock().isActive()) {\n          this.grid.getEditorLock().commitCurrentEdit();\n        }\n      });\n    }\n  }\n\n  /**\n   * Define what our internal Post Process callback, it will execute internally after we get back result from the Process backend call\n   * For now, this is GraphQL Service only feature and it will basically refresh the Dataset & Pagination without having the user to create his own PostProcess every time\n   */\n  createBackendApiInternalPostProcessCallback(gridOptions: GridOption) {\n    if (gridOptions && gridOptions.backendServiceApi) {\n      const backendApi = gridOptions.backendServiceApi;\n\n      // internalPostProcess only works with a GraphQL Service, so make sure it is that type\n      if (backendApi && backendApi.service && backendApi.service instanceof GraphqlService) {\n        backendApi.internalPostProcess = (processResult: any) => {\n          const datasetName = (backendApi && backendApi.service && typeof backendApi.service.getDatasetName === 'function') ? backendApi.service.getDatasetName() : '';\n          if (processResult && processResult.data && processResult.data[datasetName]) {\n            this._dataset = processResult.data[datasetName].nodes;\n            this.refreshGridData(this._dataset, processResult.data[datasetName].totalCount);\n          } else {\n            this._dataset = [];\n          }\n        };\n      }\n    }\n  }\n\n  attachDifferentHooks(grid: any, gridOptions: GridOption, dataView: any) {\n    // on locale change, we have to manually translate the Headers, GridMenu\n    this.subscriptions.push(\n      this.translate.onLangChange.subscribe((event) => {\n        if (gridOptions.enableTranslate) {\n          this.extensionService.translateColumnHeaders();\n          this.extensionService.translateColumnPicker();\n          this.extensionService.translateGridMenu();\n          this.extensionService.translateHeaderMenu();\n        }\n      })\n    );\n\n    // if user entered some Columns \"presets\", we need to reflect them all in the grid\n    if (gridOptions.presets && Array.isArray(gridOptions.presets.columns) && gridOptions.presets.columns.length > 0) {\n      const gridColumns: Column[] = this.gridStateService.getAssociatedGridColumns(grid, gridOptions.presets.columns);\n      if (gridColumns && Array.isArray(gridColumns) && gridColumns.length > 0) {\n        // make sure that the checkbox selector is also visible if it is enabled\n        if (gridOptions.enableCheckboxSelector) {\n          const checkboxColumn = (Array.isArray(this._columnDefinitions) && this._columnDefinitions.length > 0) ? this._columnDefinitions[0] : null;\n          if (checkboxColumn && checkboxColumn.id === '_checkbox_selector' && gridColumns[0].id !== '_checkbox_selector') {\n            gridColumns.unshift(checkboxColumn);\n          }\n        }\n\n        // finally set the new presets columns (including checkbox selector if need be)\n        grid.setColumns(gridColumns);\n      }\n    }\n\n    // attach external sorting (backend) when available or default onSort (dataView)\n    if (gridOptions.enableSorting && !this.customDataView) {\n      gridOptions.backendServiceApi ? this.sortService.attachBackendOnSort(grid, dataView) : this.sortService.attachLocalOnSort(grid, dataView);\n    }\n\n    // attach external filter (backend) when available or default onFilter (dataView)\n    if (gridOptions.enableFiltering && !this.customDataView) {\n      this.filterService.init(grid);\n\n      // if user entered some \"presets\", we need to reflect them all in the DOM\n      if (gridOptions.presets && Array.isArray(gridOptions.presets.filters) && gridOptions.presets.filters.length > 0) {\n        this.filterService.populateColumnFilterSearchTerms();\n      }\n      gridOptions.backendServiceApi ? this.filterService.attachBackendOnFilter(grid) : this.filterService.attachLocalOnFilter(grid, this._dataView);\n    }\n\n    // if user set an onInit Backend, we'll run it right away (and if so, we also need to run preProcess, internalPostProcess & postProcess)\n    if (gridOptions.backendServiceApi) {\n      const backendApi = gridOptions.backendServiceApi;\n\n      if (backendApi && backendApi.service && backendApi.service.init) {\n        backendApi.service.init(backendApi.options, gridOptions.pagination, this.grid);\n      }\n    }\n\n    // expose all Slick Grid Events through dispatch\n    for (const prop in grid) {\n      if (grid.hasOwnProperty(prop) && prop.startsWith('on')) {\n        this._eventHandler.subscribe(grid[prop], (e: any, args: any) => {\n          return this.dispatchCustomEvent(`${slickgridEventPrefix}${titleCase(prop)}`, { eventData: e, args });\n        });\n      }\n    }\n\n    // expose all Slick DataView Events through dispatch\n    for (const prop in dataView) {\n      if (dataView.hasOwnProperty(prop) && prop.startsWith('on')) {\n        this._eventHandler.subscribe(dataView[prop], (e: any, args: any) => {\n          return this.dispatchCustomEvent(`${slickgridEventPrefix}${titleCase(prop)}`, { eventData: e, args });\n        });\n      }\n    }\n\n    // expose GridState Service changes event through dispatch\n    this.subscriptions.push(\n      this.gridStateService.onGridStateChanged.subscribe((gridStateChange: GridStateChange) => {\n        this.onGridStateChanged.emit(gridStateChange);\n      })\n    );\n\n\n    // on cell click, mainly used with the columnDef.action callback\n    this.gridEventService.attachOnCellChange(grid, dataView);\n    this.gridEventService.attachOnClick(grid, dataView);\n\n    if (dataView && grid) {\n      this._eventHandler.subscribe(dataView.onRowCountChanged, (e: any, args: any) => {\n        grid.updateRowCount();\n        grid.render();\n      });\n      this._eventHandler.subscribe(dataView.onRowsChanged, (e: any, args: any) => {\n        grid.invalidateRows(args.rows);\n        grid.render();\n      });\n    }\n\n    // does the user have a colspan callback?\n    if (gridOptions.colspanCallback) {\n      this._dataView.getItemMetadata = (rowNumber: number) => {\n        const item = this._dataView.getItem(rowNumber);\n        return gridOptions.colspanCallback(item);\n      };\n    }\n  }\n\n  attachBackendCallbackFunctions(gridOptions: GridOption) {\n    const backendApi = gridOptions.backendServiceApi;\n    const serviceOptions: BackendServiceOption = (backendApi && backendApi.service && backendApi.service.options) ? backendApi.service.options : {};\n    const isExecuteCommandOnInit = (!serviceOptions) ? false : ((serviceOptions && serviceOptions.hasOwnProperty('executeProcessCommandOnInit')) ? serviceOptions['executeProcessCommandOnInit'] : true);\n\n    // update backend filters (if need be) before the query runs\n    if (backendApi) {\n      const backendService = backendApi.service;\n\n      // if user entered some any \"presets\", we need to reflect them all in the grid\n      if (gridOptions && gridOptions.presets) {\n         // Filters \"presets\"\n         if (backendService && backendService.updateFilters && Array.isArray(gridOptions.presets.filters) && gridOptions.presets.filters.length > 0) {\n          backendService.updateFilters(gridOptions.presets.filters, true);\n        }\n        // Sorters \"presets\"\n        if (backendService && backendService.updateSorters && Array.isArray(gridOptions.presets.sorters) && gridOptions.presets.sorters.length > 0) {\n          backendService.updateSorters(undefined, gridOptions.presets.sorters);\n        }\n        // Pagination \"presets\"\n        if (backendService && backendService.updatePagination && gridOptions.presets.pagination) {\n          backendService.updatePagination(gridOptions.presets.pagination.pageNumber, gridOptions.presets.pagination.pageSize);\n        }\n      } else {\n        const columnFilters = this.filterService.getColumnFilters();\n        if (columnFilters && backendService && backendService.updateFilters) {\n          backendService.updateFilters(columnFilters, false);\n        }\n      }\n    }\n\n    if (backendApi && backendApi.service && (backendApi.onInit || isExecuteCommandOnInit)) {\n      const query = (typeof backendApi.service.buildQuery === 'function') ? backendApi.service.buildQuery() : '';\n      const observableOrPromise = (isExecuteCommandOnInit) ? backendApi.process(query) : backendApi.onInit(query);\n\n      // wrap this inside a setTimeout to avoid timing issue since the gridOptions needs to be ready before running this onInit\n      setTimeout(async () => {\n        // keep start time & end timestamps & return it after process execution\n        const startTime = new Date();\n\n        if (backendApi.preProcess) {\n          backendApi.preProcess();\n        }\n\n        try {\n          // the process could be an Observable (like HttpClient) or a Promise\n          // in any case, we need to have a Promise so that we can await on it (if an Observable, convert it to Promise)\n          const processResult: GraphqlResult | any = await castToPromise(observableOrPromise);\n          const endTime = new Date();\n\n          // define what our internal Post Process callback, only available for GraphQL Service for now\n          // it will basically refresh the Dataset & Pagination without having the user to create his own PostProcess every time\n          if (processResult && backendApi && backendApi.service instanceof GraphqlService && backendApi.internalPostProcess) {\n            backendApi.internalPostProcess(processResult);\n          }\n\n          // send the response process to the postProcess callback\n          if (backendApi.postProcess) {\n            if (processResult instanceof Object) {\n              processResult.statistics = {\n                startTime,\n                endTime,\n                executionTime: endTime.valueOf() - startTime.valueOf(),\n                totalItemCount: this.gridOptions && this.gridOptions.pagination && this.gridOptions.pagination.totalItems\n              };\n            }\n            backendApi.postProcess(processResult);\n          }\n        } catch (e) {\n          if (backendApi && backendApi.onError) {\n            backendApi.onError(e);\n          } else {\n            throw e;\n          }\n        }\n      });\n    }\n  }\n\n  attachResizeHook(grid: any, options: GridOption) {\n    // expand/autofit columns on first page load\n    if (grid && options.autoFitColumnsOnFirstLoad && options.enableAutoSizeColumns) {\n      grid.autosizeColumns();\n\n      // compensate anytime SlickGrid measureScrollbar is incorrect (only seems to happen in Chrome 1/5 computers)\n      this.resizer.compensateHorizontalScroll(this.grid, this.gridOptions);\n    }\n\n    // auto-resize grid on browser resize\n    if (this._fixedHeight || this._fixedWidth) {\n      this.resizer.init(grid, { height: this._fixedHeight, width: this._fixedWidth });\n    } else {\n      this.resizer.init(grid);\n    }\n    if (options.enableAutoResize) {\n      this.resizer.attachAutoResizeDataGrid();\n      if (grid && options.autoFitColumnsOnFirstLoad && options.enableAutoSizeColumns) {\n        grid.autosizeColumns();\n      }\n    }\n  }\n\n  executeAfterDataviewCreated(grid: any, gridOptions: GridOption, dataView: any) {\n    // if user entered some Sort \"presets\", we need to reflect them all in the DOM\n    if (gridOptions.enableSorting) {\n      if (gridOptions.presets && Array.isArray(gridOptions.presets.sorters) && gridOptions.presets.sorters.length > 0) {\n        this.sortService.loadLocalPresets(grid, dataView);\n      }\n    }\n  }\n\n  mergeGridOptions(gridOptions): GridOption {\n    gridOptions.gridId = this.gridId;\n    gridOptions.gridContainerId = `slickGridContainer-${this.gridId}`;\n\n    // use jquery extend to deep merge & copy to avoid immutable properties being changed in GlobalGridOptions after a route change\n    const options = $.extend(true, {}, GlobalGridOptions, this.forRootConfig, gridOptions);\n\n    // also make sure to show the header row if user have enabled filtering\n    this._hideHeaderRowAfterPageLoad = (options.showHeaderRow === false);\n    if (options.enableFiltering && !options.showHeaderRow) {\n      options.showHeaderRow = options.enableFiltering;\n    }\n    return options;\n  }\n\n  /**\n   * On a Pagination changed, we will trigger a Grid State changed with the new pagination info\n   * Also if we use Row Selection or the Checkbox Selector, we need to reset any selection\n   */\n  paginationChanged(pagination: Pagination) {\n    if (this.gridOptions.enableRowSelection || this.gridOptions.enableCheckboxSelector) {\n      this.gridService.setSelectedRows([]);\n    }\n\n    this.gridStateService.onGridStateChanged.next({\n      change: { newValues: pagination, type: GridStateType.pagination },\n      gridState: this.gridStateService.getCurrentGridState()\n    });\n  }\n\n  /**\n   * When dataset changes, we need to refresh the entire grid UI & possibly resize it as well\n   * @param dataset\n   */\n  refreshGridData(dataset: any[], totalCount?: number) {\n    if (Array.isArray(dataset) && this.grid && this._dataView && typeof this._dataView.setItems === 'function') {\n      this._dataView.setItems(dataset, this.gridOptions.datasetIdPropertyName);\n      if (!this.gridOptions.backendServiceApi) {\n        this._dataView.reSort();\n      }\n\n      // this.grid.setData(dataset);\n      this.grid.invalidate();\n      this.grid.render();\n\n      if (this.gridOptions.backendServiceApi) {\n        // do we want to show pagination?\n        // if we have a backendServiceApi and the enablePagination is undefined, we'll assume that we do want to see it, else get that defined value\n        this.showPagination = ((this.gridOptions.backendServiceApi && this.gridOptions.enablePagination === undefined) ? true : this.gridOptions.enablePagination) || false;\n\n        // before merging the grid options, make sure that it has the totalItems count\n        // once we have that, we can merge and pass all these options to the pagination component\n        if (!this.gridOptions.pagination) {\n          this.gridOptions.pagination = (this.gridOptions.pagination) ? this.gridOptions.pagination : undefined;\n        }\n        if (this.gridOptions.pagination && totalCount !== undefined) {\n          this.gridOptions.pagination.totalItems = totalCount;\n        }\n        if (this.gridOptions.presets && this.gridOptions.presets.pagination && this.gridOptions.pagination) {\n          this.gridOptions.pagination.pageSize = this.gridOptions.presets.pagination.pageSize;\n          this.gridOptions.pagination.pageNumber = this.gridOptions.presets.pagination.pageNumber;\n        }\n        this.gridPaginationOptions = this.mergeGridOptions(this.gridOptions);\n      }\n\n      // resize the grid inside a slight timeout, in case other DOM element changed prior to the resize (like a filter/pagination changed)\n      if (this.grid && this.gridOptions.enableAutoResize) {\n        const delay = this.gridOptions.autoResize && this.gridOptions.autoResize.delay;\n        this.resizer.resizeGrid(delay || 10);\n      }\n    }\n  }\n\n  /**\n   * Dynamically change or update the column definitions list.\n   * We will re-render the grid so that the new header and data shows up correctly.\n   * If using i18n, we also need to trigger a re-translate of the column headers\n   */\n  updateColumnDefinitionsList(newColumnDefinitions) {\n    if (this.gridOptions.enableTranslate) {\n      this.extensionService.translateColumnHeaders(false, newColumnDefinitions);\n    } else {\n      this.extensionService.renderColumnHeaders(newColumnDefinitions);\n    }\n\n    if (this.gridOptions && this.gridOptions.enableAutoSizeColumns) {\n      this.grid.autosizeColumns();\n    }\n  }\n\n  /** Toggle the filter row displayed on first row\n   * @param isShowing\n   */\n  showHeaderRow(isShowing: boolean) {\n    this.grid.setHeaderRowVisibility(isShowing);\n    return isShowing;\n  }\n\n  /** Toggle the filter row displayed on first row */\n  toggleHeaderRow() {\n    const isShowing = !this.grid.getOptions().showHeaderRow;\n    this.grid.setHeaderRowVisibility(isShowing);\n    return isShowing;\n  }\n\n  //\n  // private functions\n  // ------------------\n\n  /** Dispatch of Custom Event, which by default will bubble & is cancelable */\n  private dispatchCustomEvent(eventName: string, data?: any, isBubbling: boolean = true, isCancelable: boolean = true) {\n    const eventInit: CustomEventInit = { bubbles: isBubbling, cancelable: isCancelable };\n    if (data) {\n      eventInit.detail = data;\n    }\n    return this.elm.nativeElement.dispatchEvent(new CustomEvent(eventName, eventInit));\n  }\n\n  /** Load the Editor Collection asynchronously and replace the \"collection\" property when Observable resolves */\n  private loadEditorCollectionAsync(column: Column) {\n    const collectionAsync = column && column.editor && column.editor.collectionAsync;\n    if (collectionAsync instanceof Observable) {\n      this.subscriptions.push(\n        collectionAsync.subscribe((resolvedCollection) => this.updateEditorCollection(column, resolvedCollection))\n      );\n    }\n  }\n\n  /**\n   * Update the Editor \"collection\" property from an async call resolved\n   * Since this is called after the async call resolves, the pointer will not be the same as the \"column\" argument passed.\n   * Once we found the new pointer, we will reassign the \"editor\" and \"collection\" to the \"internalColumnEditor\" so it has newest collection\n   */\n  private updateEditorCollection(column: Column, newCollection: any[]) {\n    column.editor.collection = newCollection;\n\n    // find the new column reference pointer\n    const columns = this.grid.getColumns();\n    if (Array.isArray(columns)) {\n      const columnRef: Column = columns.find((col: Column) => col.id === column.id);\n      columnRef.internalColumnEditor = column.editor;\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { AngularSlickgridComponent } from './../components/angular-slickgrid.component';\r\nimport { CollectionService } from './../services/collection.service';\r\nimport { FilterFactory } from '../filters/filterFactory';\r\nimport { GraphqlService } from './../services/graphql.service';\r\nimport { GridOdataService } from './../services/grid-odata.service';\r\nimport { GridOption } from './../models/gridOption.interface';\r\nimport { SlickPaginationComponent } from './../components/slick-pagination.component';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    TranslateModule\r\n  ],\r\n  declarations: [\r\n    AngularSlickgridComponent,\r\n    SlickPaginationComponent\r\n  ],\r\n  exports: [\r\n    AngularSlickgridComponent,\r\n    SlickPaginationComponent\r\n  ],\r\n  entryComponents: [AngularSlickgridComponent]\r\n})\r\nexport class AngularSlickgridModule {\r\n  static forRoot(config: GridOption = {}) {\r\n    return {\r\n      ngModule: AngularSlickgridModule,\r\n      providers: [\r\n        { provide: 'config', useValue: config },\r\n        CollectionService,\r\n        FilterFactory,\r\n        GraphqlService,\r\n        GridOdataService\r\n      ]\r\n    };\r\n  }\r\n}\r\n"]}